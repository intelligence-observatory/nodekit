<!-- example.html -->
<!doctype html>
<html lang="en">
<head>
    <link rel="icon" href="data:,">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>NodeKit Browser</title>
</head>
<body>
<div id="app"></div>
<script type="module" src="src/main.ts"></script>
<script type="module">

    let nodeGraph = {
        "board": {
            "board_width_px": 768,
            "board_height_px": 768
        },
        "nodes": [
            {
                "node_id": "6b38bd83-fb81-4770-8b15-322b3cad87db",
                "cards": [
                    {
                        "card_id": "190e15b6-0efd-492f-89a8-7a36b2a66874",
                        "card_type": "BlankCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.1,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "color": "#32a852"
                    },
                    {
                        "card_id": "f38f4ce2-b593-4bb3-a7ee-8878e4b1b224",
                        "card_type": "FixationPointCard",
                        "x": -0.05,
                        "y": -0.28,
                        "w": 0.05,
                        "h": 0.05,
                        "t_start": 0,
                        "t_end": null
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "9d0160e8-b2b7-4056-a9a0-f32b0e8ab1e9",
                        "sensor_type": "ClickSensor",
                        "t_armed": 0,
                        "card_id": "f38f4ce2-b593-4bb3-a7ee-8878e4b1b224"
                    },
                    {
                        "sensor_id": "2ffb942a-51bb-4a51-b360-841c4b23f72f",
                        "sensor_type": "KeySensor",
                        "t_armed": 0,
                        "key": " "
                    }
                ],
                "outcomes": [
                    {
                        "sensor_id": "9d0160e8-b2b7-4056-a9a0-f32b0e8ab1e9",
                        "cards": [
                            {
                                "text": "Yay",
                                "text_color": "#000000",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "card_id": "df4b207b-3596-43c1-8b3c-2e9a13a0adec",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 200,
                                "background_color": "#E6E6E6"
                            }
                        ],
                        "bonus_amount_usd": "0.01"
                    },
                    {
                        "sensor_id": "2ffb942a-51bb-4a51-b360-841c4b23f72f",
                        "cards": [
                            {
                                "text": "Boo",
                                "text_color": "#000000",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "card_id": "34b4743b-5a61-4167-935f-5365e546c4ca",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "background_color": "#E6E6E6"
                            }
                        ],
                        "bonus_amount_usd": "-0.01"
                    },
                    {
                        "sensor_id": "f1f62ad0-758c-4b8a-8cce-442b17d63bef",
                        "cards": [
                            {
                                "text": "Boo",
                                "text_color": "#000000",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "card_id": "34b4743b-5a61-4167-935f-5365e546c4ca",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "background_color": "#E6E6E6"
                            }
                        ],
                        "bonus_amount_usd": "-0.05"
                    }
                ],
                "effects": []
            },
            {
                "node_id": "e9acad13-516c-4607-9bc7-303f3ef6e8ab",
                "cards": [
                    {
                        "card_id": "0ade2cf9-4de1-4628-b4f8-caf050d1559a",
                        "card_type": "BlankCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.1,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "color": "#32a852"
                    },
                    {
                        "card_id": "2736cd02-f77e-4900-999e-87ed16d949ac",
                        "card_type": "FixationPointCard",
                        "x": -0.17,
                        "y": 0.0,
                        "w": 0.05,
                        "h": 0.05,
                        "t_start": 0,
                        "t_end": null
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "0820f586-614f-4c9a-aedf-c5e4a93b2b51",
                        "sensor_type": "ClickSensor",
                        "t_armed": 0,
                        "card_id": "2736cd02-f77e-4900-999e-87ed16d949ac"
                    },
                    {
                        "sensor_id": "6a526c5d-a88d-49e9-b3d0-30ccd1dfc1f0",
                        "sensor_type": "KeySensor",
                        "t_armed": 0,
                        "key": " "
                    }
                ],
                "outcomes": [
                    {
                        "sensor_id": "0820f586-614f-4c9a-aedf-c5e4a93b2b51",
                        "cards": [
                            {
                                "text": "Yay",
                                "text_color": "#000000",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "card_id": "9da8c823-4062-4215-a0ce-e60ced2c61eb",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 200,
                                "background_color": "#E6E6E6"
                            }
                        ],
                        "bonus_amount_usd": "0.01"
                    },
                    {
                        "sensor_id": "6a526c5d-a88d-49e9-b3d0-30ccd1dfc1f0",
                        "cards": [
                            {
                                "text": "Boo",
                                "text_color": "#000000",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "card_id": "2a0b066c-d370-4e53-a9c7-b7393d1146ae",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "background_color": "#E6E6E6"
                            }
                        ],
                        "bonus_amount_usd": "-0.01"
                    },
                    {
                        "sensor_id": "c4dd291a-8045-408a-ae2f-98c03f727455",
                        "cards": [
                            {
                                "text": "Boo",
                                "text_color": "#000000",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "card_id": "2a0b066c-d370-4e53-a9c7-b7393d1146ae",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "background_color": "#E6E6E6"
                            }
                        ],
                        "bonus_amount_usd": "-0.05"
                    }
                ],
                "effects": []
            }
        ],
        "base_payment_usd": "0.01",
        "max_duration_sec": 600,
        "title": "Test task (sandbox)",
        "description": "Test task",
        "keywords": [
            "test",
            "example"
        ],
        "nodekit_version": "0.1.0"
    }

    const assetUrls = [];

    import {play} from '/src/main.ts';

    window.focus();

    window.onload = async () => {
        // Add focus
        let events = await play(
            nodeGraph,
            assetUrls,
            (event) => {
                console.log(event);
            }
        )
        console.log(events)
    };
</script>

</body>
</html>
