<!-- example.html -->
<!doctype html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>NodeKit Browser</title>
</head>
<body>
<div id="app"></div>
<script type="module" src="src/main.ts"></script>
<script type="module">

    let timeline = {
        "nodes": [
            {
                "node_id": "fa3a9e69-62ce-4382-9eba-fa5459a074e0",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080"
                },
                "cards": [
                    {
                        "card_id": "18978365-a212-4b9f-b353-f34b66b19dd1",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.8,
                        "h": 0.8,
                        "t_start": 0,
                        "t_end": null,
                        "text": "# Welcome!\n\nThis is a test task.",
                        "font_size": 0.0175,
                        "justification_horizontal": "left",
                        "justification_vertical": "top",
                        "text_color": "#000000",
                        "background_color": "#ffffff"
                    },
                    {
                        "card_id": "9ec28e2f-ae14-4f1d-a012-fc2b8c7d2d18",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": -0.45,
                        "w": 0.3,
                        "h": 0.05,
                        "t_start": 1000,
                        "t_end": null,
                        "text": "Continue",
                        "font_size": 0.0175,
                        "justification_horizontal": "center",
                        "justification_vertical": "center",
                        "text_color": "#ffffff",
                        "background_color": "#32a852"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "470aff75-5a34-41a5-b55d-6178d9395c4e",
                        "sensor_type": "ClickSensor",
                        "t_start": 1000,
                        "region": {
                            "region_type": "ShapeRegion",
                            "shape": "rectangle",
                            "x": 0.0,
                            "y": -0.45,
                            "w": 0.3,
                            "h": 0.05
                        }
                    }
                ],
                "outcomes": [],
                "effects": []
            },
            {
                "node_id": "9b3bc1ba-584b-4acf-8bab-d50c07a88f36",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080"
                },
                "cards": [
                    {
                        "card_id": "4856eb14-98f2-4f58-a5eb-fbf314a00cfa",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.8,
                        "h": 0.8,
                        "t_start": 0,
                        "t_end": null,
                        "text": "## Instructions\n\nBla bla bla.",
                        "font_size": 0.0175,
                        "justification_horizontal": "left",
                        "justification_vertical": "top",
                        "text_color": "#000000",
                        "background_color": "#ffffff"
                    },
                    {
                        "card_id": "871712f8-d44e-435b-9c8d-c199f7dce7d8",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": -0.45,
                        "w": 0.3,
                        "h": 0.05,
                        "t_start": 1000,
                        "t_end": null,
                        "text": "Continue",
                        "font_size": 0.0175,
                        "justification_horizontal": "center",
                        "justification_vertical": "center",
                        "text_color": "#ffffff",
                        "background_color": "#32a852"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "749c0d49-ba5e-4e23-9bda-fa372160ec71",
                        "sensor_type": "ClickSensor",
                        "t_start": 1000,
                        "region": {
                            "region_type": "ShapeRegion",
                            "shape": "rectangle",
                            "x": 0.0,
                            "y": -0.45,
                            "w": 0.3,
                            "h": 0.05
                        }
                    }
                ],
                "outcomes": [],
                "effects": []
            },
            {
                "node_id": "3d09ceeb-91d8-42be-9bf5-937f4d63612c",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080"
                },
                "cards": [
                    {
                        "card_id": "80f41811-7adb-44fc-9507-44d982ce0f78",
                        "card_type": "VideoCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.5,
                        "h": 0.5,
                        "t_start": 0,
                        "t_end": null,
                        "video": {
                            "sha256": "3f224a8b6a7917ae1364cf2cc9daf7a5f7073bfe0fb5d9b638d8a6efc1c867f7",
                            "mime_type": "video/mp4"
                        },
                        "muted": true,
                        "loop": false
                    },
                    {
                        "card_id": "04e66fe4-f42c-4535-9ced-f8a63f8c6703",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": -0.4,
                        "w": 0.5,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "text": "Press space to continue",
                        "font_size": 0.0175,
                        "justification_horizontal": "center",
                        "justification_vertical": "center",
                        "text_color": "#000000",
                        "background_color": "#E6E6E600"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "cc161651-7f9c-4a69-bbc8-9fd29088dc5e",
                        "sensor_type": "KeySensor",
                        "t_start": 0,
                        "key": " "
                    }
                ],
                "outcomes": [],
                "effects": []
            },
            {
                "node_id": "dd0500bc-db65-42ec-a740-41a89259b759",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080"
                },
                "cards": [
                    {
                        "card_id": "1a0f687e-afb4-45ea-953d-bdf4d0c15def",
                        "card_type": "ImageCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.5,
                        "h": 0.5,
                        "t_start": 0,
                        "t_end": null,
                        "image": {
                            "sha256": "b87d9ff074668df4e7698280bf6ac0a11c307389eaabec400dd00023462cb416",
                            "mime_type": "image/png"
                        }
                    },
                    {
                        "card_id": "690e77c2-e571-4067-b782-f888130d3f41",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": -0.4,
                        "w": 0.5,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "text": "Press space to continue",
                        "font_size": 0.0175,
                        "justification_horizontal": "center",
                        "justification_vertical": "center",
                        "text_color": "#000000",
                        "background_color": "#E6E6E600"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "a9b19ea2-b870-4af7-89f6-dd0f65d45a81",
                        "sensor_type": "KeySensor",
                        "t_start": 0,
                        "key": " "
                    }
                ],
                "outcomes": [],
                "effects": []
            },
            {
                "node_id": "3f39aeee-842f-45a2-ba5c-57d50abc9abf",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080"
                },
                "cards": [
                    {
                        "card_id": "4d7ed16a-5b3b-4853-85f6-74d2fde6ae87",
                        "card_type": "BlankCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.1,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "color": "#32a852"
                    },
                    {
                        "card_id": "fc1337a6-bab7-44b4-bb30-f2752d72c33a",
                        "card_type": "FixationPointCard",
                        "x": 0.08,
                        "y": -0.28,
                        "w": 0.0375,
                        "h": 0.0375,
                        "t_start": 0,
                        "t_end": null
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "5aadf1d1-fb34-41c3-b30c-22c6e14c8b98",
                        "sensor_type": "ClickSensor",
                        "t_start": 0,
                        "region": {
                            "region_type": "ShapeRegion",
                            "shape": "ellipse",
                            "x": 0.08,
                            "y": -0.28,
                            "w": 0.0375,
                            "h": 0.0375
                        }
                    },
                    {
                        "sensor_id": "13589f02-60ad-45c2-b30d-601b341fafa7",
                        "sensor_type": "KeySensor",
                        "t_start": 0,
                        "key": " "
                    }
                ],
                "outcomes": [
                    {
                        "sensor_id": "5aadf1d1-fb34-41c3-b30c-22c6e14c8b98",
                        "cards": [
                            {
                                "card_id": "0206f47e-7bdf-463c-b2a1-9d1403072cb2",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 200,
                                "text": "Yay",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "0.01"
                    },
                    {
                        "sensor_id": "13589f02-60ad-45c2-b30d-601b341fafa7",
                        "cards": [
                            {
                                "card_id": "d2d864ec-550d-4679-b9b1-eeccc421ba11",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "text": "Boo",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "-0.01"
                    },
                    {
                        "sensor_id": "60a98b8f-48bb-4d43-8b8e-abc707e70300",
                        "cards": [
                            {
                                "card_id": "d2d864ec-550d-4679-b9b1-eeccc421ba11",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "text": "Boo",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "-0.05"
                    }
                ],
                "effects": []
            },
            {
                "node_id": "6453360d-79ef-4ce5-b3d4-6c102de1bab9",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080"
                },
                "cards": [
                    {
                        "card_id": "cda74289-f254-4f27-88e7-83c63a9c0b3e",
                        "card_type": "BlankCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.1,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "color": "#32a852"
                    },
                    {
                        "card_id": "942908ad-6e3e-44e6-969a-605b7e1b630f",
                        "card_type": "FixationPointCard",
                        "x": -0.13,
                        "y": -0.17,
                        "w": 0.0375,
                        "h": 0.0375,
                        "t_start": 0,
                        "t_end": null
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "3b1273e4-c8c9-4412-af76-a81ab0bea00a",
                        "sensor_type": "ClickSensor",
                        "t_start": 0,
                        "region": {
                            "region_type": "ShapeRegion",
                            "shape": "ellipse",
                            "x": -0.13,
                            "y": -0.17,
                            "w": 0.0375,
                            "h": 0.0375
                        }
                    },
                    {
                        "sensor_id": "e85585b9-390b-4c8a-9fda-bd4d668a2153",
                        "sensor_type": "KeySensor",
                        "t_start": 0,
                        "key": " "
                    }
                ],
                "outcomes": [
                    {
                        "sensor_id": "3b1273e4-c8c9-4412-af76-a81ab0bea00a",
                        "cards": [
                            {
                                "card_id": "1276cc93-d05f-435e-a7b0-49af01bf9a61",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 200,
                                "text": "Yay",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "0.01"
                    },
                    {
                        "sensor_id": "e85585b9-390b-4c8a-9fda-bd4d668a2153",
                        "cards": [
                            {
                                "card_id": "5549a901-0596-42c2-84df-1091c32574d9",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "text": "Boo",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "-0.01"
                    },
                    {
                        "sensor_id": "ba178a78-b1bb-40af-ba17-a0d05e1f1a47",
                        "cards": [
                            {
                                "card_id": "5549a901-0596-42c2-84df-1091c32574d9",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "text": "Boo",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "-0.05"
                    }
                ],
                "effects": []
            }
        ],
        "nodekit_version": "0.1.0"
    }


    let assetUrls =  [
        {
            'identifier': {
                "sha256": "3f224a8b6a7917ae1364cf2cc9daf7a5f7073bfe0fb5d9b638d8a6efc1c867f7",
                "mime_type": "video/mp4"
            },
            'url': 'static/test-video.mp4',
        },
        {
            'identifier': {
                "sha256": "b87d9ff074668df4e7698280bf6ac0a11c307389eaabec400dd00023462cb416",
                "mime_type": "image/png"
            },
            'url': 'static/lo_poly_animal_BEAR_BLK_label.png',
        }
    ]

    import {play} from '/src/main.ts';

    window.focus();

    window.onload = async () => {
        // Add focus
        let events = await play(
            timeline,
            assetUrls,
            (event) => {
                console.log(event);
            }
        )
        console.log(events)
    };
</script>

</body>
</html>
