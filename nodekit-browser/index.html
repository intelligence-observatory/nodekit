<!-- example.html -->
<!doctype html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>NodeKit Browser</title>
</head>
<body>
<div id="app"></div>
<script type="module" src="src/main.ts"></script>
<script type="module">

    let timeline = {
        "nodes":[
            {
                "node_id": "16fcd650-8650-4a4b-b732-cc64e0f4c3e8",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080ff"
                },
                "cards": [
                    {
                        "card_id": "2a5d7874-5228-43ac-a3ed-da5cce415f9c",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.8,
                        "h": 0.8,
                        "t_start": 0,
                        "t_end": null,
                        "text": "# Welcome!\n\nThis is a test task.",
                        "font_size": 0.0175,
                        "justification_horizontal": "left",
                        "justification_vertical": "top",
                        "text_color": "#000000",
                        "background_color": "#ffffffff"
                    },
                    {
                        "card_id": "cdab1878-82ce-4571-9ed2-c5d20836e198",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": -0.45,
                        "w": 0.3,
                        "h": 0.05,
                        "t_start": 1000,
                        "t_end": null,
                        "text": "Continue",
                        "font_size": 0.0175,
                        "justification_horizontal": "center",
                        "justification_vertical": "center",
                        "text_color": "#ffffffff",
                        "background_color": "#32a852ff"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "dfad18da-99ca-4386-b682-58f3f4859d5f",
                        "sensor_type": "ClickSensor",
                        "t_start": 1000,
                        "region": {
                            "region_type": "ShapeRegion",
                            "shape": "rectangle",
                            "x": 0.0,
                            "y": -0.45,
                            "w": 0.3,
                            "h": 0.05
                        }
                    }
                ],
                "outcomes": [],
                "effects": []
            },
            {
                "node_id": "ed213d49-4095-458e-99b9-75296a71a5c3",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080ff"
                },
                "cards": [
                    {
                        "card_id": "dae72bde-26ee-4758-a107-9ddebc83be67",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.8,
                        "h": 0.8,
                        "t_start": 0,
                        "t_end": null,
                        "text": "## Instructions\n\nBla bla bla.",
                        "font_size": 0.0175,
                        "justification_horizontal": "left",
                        "justification_vertical": "top",
                        "text_color": "#000000",
                        "background_color": "#ffffffff"
                    },
                    {
                        "card_id": "a40bb483-b2ff-430d-be7a-b7d620185045",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": -0.45,
                        "w": 0.3,
                        "h": 0.05,
                        "t_start": 1000,
                        "t_end": null,
                        "text": "Continue",
                        "font_size": 0.0175,
                        "justification_horizontal": "center",
                        "justification_vertical": "center",
                        "text_color": "#ffffffff",
                        "background_color": "#32a852ff"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "af8e2f66-2d7a-466f-a494-f3de9604b314",
                        "sensor_type": "ClickSensor",
                        "t_start": 1000,
                        "region": {
                            "region_type": "ShapeRegion",
                            "shape": "rectangle",
                            "x": 0.0,
                            "y": -0.45,
                            "w": 0.3,
                            "h": 0.05
                        }
                    }
                ],
                "outcomes": [],
                "effects": []
            },
            {
                "node_id": "df0ef385-16ed-4f78-b3cc-79bd840926d9",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080ff"
                },
                "cards": [
                    {
                        "card_id": "8e5ffa11-4617-476a-9715-6daa991c1f73",
                        "card_type": "VideoCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.5,
                        "h": 0.5,
                        "t_start": 0,
                        "t_end": null,
                        "video": {
                            "sha256": "3f224a8b6a7917ae1364cf2cc9daf7a5f7073bfe0fb5d9b638d8a6efc1c867f7",
                            "mime_type": "video/mp4"
                        },
                        "muted": true,
                        "loop": false
                    },
                    {
                        "card_id": "9aecf6bd-9350-4d1f-9c34-49f74c006e47",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": -0.4,
                        "w": 0.5,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "text": "Press space to continue",
                        "font_size": 0.0175,
                        "justification_horizontal": "center",
                        "justification_vertical": "center",
                        "text_color": "#000000",
                        "background_color": "#E6E6E600"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "4b6fae9b-20a1-43e8-9b34-9fe76840753c",
                        "sensor_type": "KeySensor",
                        "t_start": 0,
                        "key": " "
                    }
                ],
                "outcomes": [],
                "effects": []
            },
            {
                "node_id": "2da80f2c-e627-4d5c-9ac2-e762bd273e36",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080ff"
                },
                "cards": [
                    {
                        "card_id": "c0ed2395-6780-4091-b6aa-fbed38027908",
                        "card_type": "ImageCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.5,
                        "h": 0.5,
                        "t_start": 0,
                        "t_end": null,
                        "image": {
                            "sha256": "b87d9ff074668df4e7698280bf6ac0a11c307389eaabec400dd00023462cb416",
                            "mime_type": "image/png"
                        }
                    },
                    {
                        "card_id": "7d4a9cd8-64de-4126-b2ae-0a1970d55a20",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": -0.4,
                        "w": 0.5,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "text": "Press space to continue",
                        "font_size": 0.0175,
                        "justification_horizontal": "center",
                        "justification_vertical": "center",
                        "text_color": "#000000",
                        "background_color": "#E6E6E600"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "3173f734-6031-4874-87f2-13c1ba781cfd",
                        "sensor_type": "KeySensor",
                        "t_start": 0,
                        "key": " "
                    }
                ],
                "outcomes": [],
                "effects": []
            },
            {
                "node_id": "6e37cccb-3ff7-4785-9817-4ce406a221e2",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080ff"
                },
                "cards": [
                    {
                        "card_id": "43958567-afa7-4710-ac41-a2ae568f1d80",
                        "card_type": "ShapeCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.1,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "rectangle",
                        "color": "#32a852ff"
                    },
                    {
                        "card_id": "aa01a31c-64f6-4408-aca9-0e12d086c03d",
                        "card_type": "ShapeCard",
                        "x": 0.08,
                        "y": -0.28,
                        "w": 0.0375,
                        "h": 0.0375,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "ellipse",
                        "color": "#ffffffff"
                    },
                    {
                        "card_id": "27349212-886e-40b3-803c-1b777bfea0ac",
                        "card_type": "ShapeCard",
                        "x": 0.08,
                        "y": -0.28,
                        "w": 0.00375,
                        "h": 0.03375,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "rectangle",
                        "color": "#000000ff"
                    },
                    {
                        "card_id": "cf56fd85-478d-455f-920b-1409cc08e6ff",
                        "card_type": "ShapeCard",
                        "x": 0.08,
                        "y": -0.28,
                        "w": 0.03375,
                        "h": 0.00375,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "rectangle",
                        "color": "#000000ff"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "8f5659a0-c4c8-4fb2-a4e4-0afb56c7b6cc",
                        "sensor_type": "ClickSensor",
                        "t_start": 0,
                        "region": {
                            "region_type": "ShapeRegion",
                            "shape": "ellipse",
                            "x": 0.08,
                            "y": -0.28,
                            "w": 0.0375,
                            "h": 0.0375
                        }
                    },
                    {
                        "sensor_id": "7b7e3849-aaae-4355-a9bd-94f1f50fbeab",
                        "sensor_type": "KeySensor",
                        "t_start": 0,
                        "key": " "
                    }
                ],
                "outcomes": [
                    {
                        "sensor_id": "8f5659a0-c4c8-4fb2-a4e4-0afb56c7b6cc",
                        "cards": [
                            {
                                "card_id": "400ed24a-6b5e-4349-bf58-593fc6e86150",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 200,
                                "text": "Yay",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "0.01"
                    },
                    {
                        "sensor_id": "7b7e3849-aaae-4355-a9bd-94f1f50fbeab",
                        "cards": [
                            {
                                "card_id": "f94ddd08-79d9-458b-a155-6616a98e735a",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "text": "Boo",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "-0.01"
                    },
                    {
                        "sensor_id": "a1d81270-b4bd-4c7b-8422-966a1be0cb10",
                        "cards": [
                            {
                                "card_id": "f94ddd08-79d9-458b-a155-6616a98e735a",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "text": "Boo",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "-0.05"
                    }
                ],
                "effects": []
            },
            {
                "node_id": "99b05acd-1490-4ff4-a927-9aea69c0dc58",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080ff"
                },
                "cards": [
                    {
                        "card_id": "a431ebcc-410c-4297-9f45-b882c2f74e96",
                        "card_type": "ShapeCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.1,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "rectangle",
                        "color": "#32a852ff"
                    },
                    {
                        "card_id": "f0278fe0-20a8-4bca-ad1b-21d91e04e94f",
                        "card_type": "ShapeCard",
                        "x": -0.13,
                        "y": -0.17,
                        "w": 0.0375,
                        "h": 0.0375,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "ellipse",
                        "color": "#ffffffff"
                    },
                    {
                        "card_id": "c8526d30-5541-4323-b26b-db2f16f36a67",
                        "card_type": "ShapeCard",
                        "x": -0.13,
                        "y": -0.17,
                        "w": 0.00375,
                        "h": 0.03375,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "rectangle",
                        "color": "#000000ff"
                    },
                    {
                        "card_id": "2ca0ced3-42d2-4bf9-b89f-c47730b77f1c",
                        "card_type": "ShapeCard",
                        "x": -0.13,
                        "y": -0.17,
                        "w": 0.03375,
                        "h": 0.00375,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "rectangle",
                        "color": "#000000ff"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "374f7133-dbb8-40ad-9f5a-66b1a334e579",
                        "sensor_type": "ClickSensor",
                        "t_start": 0,
                        "region": {
                            "region_type": "ShapeRegion",
                            "shape": "ellipse",
                            "x": -0.13,
                            "y": -0.17,
                            "w": 0.0375,
                            "h": 0.0375
                        }
                    },
                    {
                        "sensor_id": "4be4f89a-2181-46f5-ad38-e3e15658fd9a",
                        "sensor_type": "KeySensor",
                        "t_start": 0,
                        "key": " "
                    }
                ],
                "outcomes": [
                    {
                        "sensor_id": "374f7133-dbb8-40ad-9f5a-66b1a334e579",
                        "cards": [
                            {
                                "card_id": "c102f826-cc48-4150-b222-b49f06be854c",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 200,
                                "text": "Yay",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "0.01"
                    },
                    {
                        "sensor_id": "4be4f89a-2181-46f5-ad38-e3e15658fd9a",
                        "cards": [
                            {
                                "card_id": "ace126b1-5528-4cc8-b06d-33e8fbef2665",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "text": "Boo",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "-0.01"
                    },
                    {
                        "sensor_id": "fc433d3b-65dd-41fa-8850-c1b35cb855db",
                        "cards": [
                            {
                                "card_id": "ace126b1-5528-4cc8-b06d-33e8fbef2665",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "text": "Boo",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "-0.05"
                    }
                ],
                "effects": []
            }
        ],
        "nodekit_version": "0.1.0"
    }


    let assetUrls =  [
        {
            'identifier': {
                "sha256": "3f224a8b6a7917ae1364cf2cc9daf7a5f7073bfe0fb5d9b638d8a6efc1c867f7",
                "mime_type": "video/mp4"
            },
            'url': 'static/test-video.mp4',
        },
        {
            'identifier': {
                "sha256": "b87d9ff074668df4e7698280bf6ac0a11c307389eaabec400dd00023462cb416",
                "mime_type": "image/png"
            },
            'url': 'static/lo_poly_animal_BEAR_BLK_label.png',
        }
    ]

    import {play} from '/src/main.ts';

    window.focus();

    window.onload = async () => {
        // Add focus
        let events = await play(
            timeline,
            assetUrls,
            (event) => {
                console.log(event);
            }
        )
        console.log(events)
    };
</script>

</body>
</html>
