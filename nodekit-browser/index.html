<!-- example.html -->
<!doctype html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>NodeKit Browser</title>
</head>
<body>
<div id="app"></div>
<script type="module" src="src/main.ts"></script>
<script type="module">

    let timeline = {
        "nodes":[
            {
                "node_id": "24f32e69-2865-4bc1-b6d7-aa256c9c1fd2",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080"
                },
                "cards": [
                    {
                        "card_id": "a2d96893-753f-4763-b44c-1c7666329acf",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.8,
                        "h": 0.8,
                        "t_start": 0,
                        "t_end": null,
                        "text": "# Welcome!\n\nThis is a test task.",
                        "font_size": 0.0175,
                        "justification_horizontal": "left",
                        "justification_vertical": "top",
                        "text_color": "#000000",
                        "background_color": "#ffffff"
                    },
                    {
                        "card_id": "87f87b6b-7b93-4897-a6c1-3cfba80a7d57",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": -0.45,
                        "w": 0.3,
                        "h": 0.05,
                        "t_start": 1000,
                        "t_end": null,
                        "text": "Continue",
                        "font_size": 0.0175,
                        "justification_horizontal": "center",
                        "justification_vertical": "center",
                        "text_color": "#ffffff",
                        "background_color": "#32a852"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "14dc3a3f-11f4-4166-8389-ae41d734749f",
                        "sensor_type": "ClickSensor",
                        "t_start": 1000,
                        "region": {
                            "region_type": "ShapeRegion",
                            "shape": "rectangle",
                            "x": 0.0,
                            "y": -0.45,
                            "w": 0.3,
                            "h": 0.05
                        }
                    }
                ],
                "outcomes": [],
                "effects": []
            },
            {
                "node_id": "8de3521e-ba76-41ab-ba7a-a4ed9c3d8a4b",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080"
                },
                "cards": [
                    {
                        "card_id": "4be8bc97-5fea-4662-9c4a-ec264b7e101c",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.8,
                        "h": 0.8,
                        "t_start": 0,
                        "t_end": null,
                        "text": "## Instructions\n\nBla bla bla.",
                        "font_size": 0.0175,
                        "justification_horizontal": "left",
                        "justification_vertical": "top",
                        "text_color": "#000000",
                        "background_color": "#ffffff"
                    },
                    {
                        "card_id": "893a6c73-f3a3-4695-bd0f-9cea34e408bd",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": -0.45,
                        "w": 0.3,
                        "h": 0.05,
                        "t_start": 1000,
                        "t_end": null,
                        "text": "Continue",
                        "font_size": 0.0175,
                        "justification_horizontal": "center",
                        "justification_vertical": "center",
                        "text_color": "#ffffff",
                        "background_color": "#32a852"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "8b06c4cc-7d15-4053-918a-6711f08f2ec4",
                        "sensor_type": "ClickSensor",
                        "t_start": 1000,
                        "region": {
                            "region_type": "ShapeRegion",
                            "shape": "rectangle",
                            "x": 0.0,
                            "y": -0.45,
                            "w": 0.3,
                            "h": 0.05
                        }
                    }
                ],
                "outcomes": [],
                "effects": []
            },
            {
                "node_id": "4442431d-b5bf-43a9-8612-46a1e6fe5648",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080"
                },
                "cards": [
                    {
                        "card_id": "e09e7cce-eb13-48e8-b863-4840ebe15b13",
                        "card_type": "VideoCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.5,
                        "h": 0.5,
                        "t_start": 0,
                        "t_end": null,
                        "video": {
                            "sha256": "3f224a8b6a7917ae1364cf2cc9daf7a5f7073bfe0fb5d9b638d8a6efc1c867f7",
                            "mime_type": "video/mp4"
                        },
                        "muted": true,
                        "loop": false
                    },
                    {
                        "card_id": "30ea4a2b-2ab6-4b3d-b0ec-19ff6317f787",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": -0.4,
                        "w": 0.5,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "text": "Press space to continue",
                        "font_size": 0.0175,
                        "justification_horizontal": "center",
                        "justification_vertical": "center",
                        "text_color": "#000000",
                        "background_color": "#E6E6E600"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "34334c2b-6722-465d-8fdf-c8884746c807",
                        "sensor_type": "KeySensor",
                        "t_start": 0,
                        "key": " "
                    }
                ],
                "outcomes": [],
                "effects": []
            },
            {
                "node_id": "4b57088f-b037-4a5c-80ae-6add2c65bcba",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080"
                },
                "cards": [
                    {
                        "card_id": "2bb30591-ae87-4e9e-ad39-0badd53ceb18",
                        "card_type": "ImageCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.5,
                        "h": 0.5,
                        "t_start": 0,
                        "t_end": null,
                        "image": {
                            "sha256": "b87d9ff074668df4e7698280bf6ac0a11c307389eaabec400dd00023462cb416",
                            "mime_type": "image/png"
                        }
                    },
                    {
                        "card_id": "47813450-6a73-4f08-aa65-35c9e8e092d5",
                        "card_type": "TextCard",
                        "x": 0.0,
                        "y": -0.4,
                        "w": 0.5,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "text": "Press space to continue",
                        "font_size": 0.0175,
                        "justification_horizontal": "center",
                        "justification_vertical": "center",
                        "text_color": "#000000",
                        "background_color": "#E6E6E600"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "6316ea2e-4f65-4ca4-a934-ee6a76bc8dc4",
                        "sensor_type": "KeySensor",
                        "t_start": 0,
                        "key": " "
                    }
                ],
                "outcomes": [],
                "effects": []
            },
            {
                "node_id": "1dc46539-621e-4604-b573-99568774abdf",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080"
                },
                "cards": [
                    {
                        "card_id": "c2448711-d2d7-4431-adca-a65cc1a7ee53",
                        "card_type": "ShapeCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.1,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "rectangle",
                        "color": "#32a852"
                    },
                    {
                        "card_id": "bc7ebbb9-8011-4dc5-8678-af39e45895f4",
                        "card_type": "ShapeCard",
                        "x": 0.08,
                        "y": -0.28,
                        "w": 0.0375,
                        "h": 0.0375,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "ellipse",
                        "color": "#ffffff"
                    },
                    {
                        "card_id": "511bf85a-155c-493c-85ec-69ec9108faad",
                        "card_type": "ShapeCard",
                        "x": 0.08,
                        "y": -0.28,
                        "w": 0.00375,
                        "h": 0.03375,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "rectangle",
                        "color": "#000000"
                    },
                    {
                        "card_id": "09838536-d36f-4948-b962-0bd3f6693e3d",
                        "card_type": "ShapeCard",
                        "x": 0.08,
                        "y": -0.28,
                        "w": 0.03375,
                        "h": 0.00375,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "rectangle",
                        "color": "#000000"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "77faadb5-9121-4b65-882e-2e089a18ee88",
                        "sensor_type": "ClickSensor",
                        "t_start": 0,
                        "region": {
                            "region_type": "ShapeRegion",
                            "shape": "ellipse",
                            "x": 0.08,
                            "y": -0.28,
                            "w": 0.0375,
                            "h": 0.0375
                        }
                    },
                    {
                        "sensor_id": "fe2d5c2a-72ff-4306-8690-81b09658a5c0",
                        "sensor_type": "KeySensor",
                        "t_start": 0,
                        "key": " "
                    }
                ],
                "outcomes": [
                    {
                        "sensor_id": "77faadb5-9121-4b65-882e-2e089a18ee88",
                        "cards": [
                            {
                                "card_id": "d9e7890a-c372-4b3a-80b7-b6dea839e033",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 200,
                                "text": "Yay",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "0.01"
                    },
                    {
                        "sensor_id": "fe2d5c2a-72ff-4306-8690-81b09658a5c0",
                        "cards": [
                            {
                                "card_id": "c08ddfab-f8bb-424f-b99d-97080c01d2bb",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "text": "Boo",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "-0.01"
                    },
                    {
                        "sensor_id": "e0e5c0cf-0e6e-44be-a617-1f15cd2e213f",
                        "cards": [
                            {
                                "card_id": "c08ddfab-f8bb-424f-b99d-97080c01d2bb",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "text": "Boo",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "-0.05"
                    }
                ],
                "effects": []
            },
            {
                "node_id": "c4fb263b-ec94-4533-919d-77e9a1f82ec7",
                "board": {
                    "board_width_px": 768,
                    "board_height_px": 768,
                    "background_color": "#808080"
                },
                "cards": [
                    {
                        "card_id": "95be1517-9e22-42bd-a008-2cc4fc9b0079",
                        "card_type": "ShapeCard",
                        "x": 0.0,
                        "y": 0.0,
                        "w": 0.1,
                        "h": 0.1,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "rectangle",
                        "color": "#32a852"
                    },
                    {
                        "card_id": "0bafc13f-8f55-4c15-bcc9-3e71513f7a12",
                        "card_type": "ShapeCard",
                        "x": -0.13,
                        "y": -0.17,
                        "w": 0.0375,
                        "h": 0.0375,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "ellipse",
                        "color": "#ffffff"
                    },
                    {
                        "card_id": "aa81f544-d29e-4b74-ae25-a27a88341b29",
                        "card_type": "ShapeCard",
                        "x": -0.13,
                        "y": -0.17,
                        "w": 0.00375,
                        "h": 0.03375,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "rectangle",
                        "color": "#000000"
                    },
                    {
                        "card_id": "23d97d09-bf3e-4550-a983-98bc50e53639",
                        "card_type": "ShapeCard",
                        "x": -0.13,
                        "y": -0.17,
                        "w": 0.03375,
                        "h": 0.00375,
                        "t_start": 0,
                        "t_end": null,
                        "shape": "rectangle",
                        "color": "#000000"
                    }
                ],
                "sensors": [
                    {
                        "sensor_id": "58cb8003-7b21-43f2-91f5-ac514b007a8a",
                        "sensor_type": "ClickSensor",
                        "t_start": 0,
                        "region": {
                            "region_type": "ShapeRegion",
                            "shape": "ellipse",
                            "x": -0.13,
                            "y": -0.17,
                            "w": 0.0375,
                            "h": 0.0375
                        }
                    },
                    {
                        "sensor_id": "0e178c77-f939-4b8e-a134-a5530bc47249",
                        "sensor_type": "KeySensor",
                        "t_start": 0,
                        "key": " "
                    }
                ],
                "outcomes": [
                    {
                        "sensor_id": "58cb8003-7b21-43f2-91f5-ac514b007a8a",
                        "cards": [
                            {
                                "card_id": "a89de178-2d36-48c6-8d44-936017b10bfa",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 200,
                                "text": "Yay",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "0.01"
                    },
                    {
                        "sensor_id": "0e178c77-f939-4b8e-a134-a5530bc47249",
                        "cards": [
                            {
                                "card_id": "4364b61f-1368-46d4-a908-54ba1732c124",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "text": "Boo",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "-0.01"
                    },
                    {
                        "sensor_id": "3cf48e64-376e-40ad-86a8-a870a4d2bad7",
                        "cards": [
                            {
                                "card_id": "4364b61f-1368-46d4-a908-54ba1732c124",
                                "card_type": "TextCard",
                                "x": 0.0,
                                "y": 0.0,
                                "w": 0.5,
                                "h": 0.5,
                                "t_start": 0,
                                "t_end": 400,
                                "text": "Boo",
                                "font_size": 0.0175,
                                "justification_horizontal": "center",
                                "justification_vertical": "center",
                                "text_color": "#000000",
                                "background_color": "#E6E6E600"
                            }
                        ],
                        "bonus_amount_usd": "-0.05"
                    }
                ],
                "effects": []
            }
        ],
        "nodekit_version": "0.1.0"
    }


    let assetUrls =  [
        {
            'identifier': {
                "sha256": "3f224a8b6a7917ae1364cf2cc9daf7a5f7073bfe0fb5d9b638d8a6efc1c867f7",
                "mime_type": "video/mp4"
            },
            'url': 'static/test-video.mp4',
        },
        {
            'identifier': {
                "sha256": "b87d9ff074668df4e7698280bf6ac0a11c307389eaabec400dd00023462cb416",
                "mime_type": "image/png"
            },
            'url': 'static/lo_poly_animal_BEAR_BLK_label.png',
        }
    ]

    import {play} from '/src/main.ts';

    window.focus();

    window.onload = async () => {
        // Add focus
        let events = await play(
            timeline,
            assetUrls,
            (event) => {
                console.log(event);
            }
        )
        console.log(events)
    };
</script>

</body>
</html>
