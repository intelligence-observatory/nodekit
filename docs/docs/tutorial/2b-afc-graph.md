
??? tip "Do the previous tutorial first!"
    This tutorial assumes you completed the [previous tutorial](2-first-graph.md), which gives an overview of Graphs, Nodes, and Transitions.


In this tutorial, we will write a Graph that describes a "real" behavioral task, where some instructions will be shown to the agent, then a series of N-way classification trials with feedback are run.

Ultimately, the Graph will look like this: 

![Hello, world!](PNG/nested-graph.png)

???+ question "Why does this Graph look different?"
    In the picture above, one can notice something new: a _Graph made up of Graphs_. This enables one to write a Graph _hierarchically_, using smaller organizational units of one's choosing (such as "trials" and "blocks").
       

## Step 1: Write the instructions Graph

### Format instructions using Markdown

## Step 2: Write the AFC Graph

### Load image and video assets

### Set up "feedback" logic with the `IfThenElse` Transition

## Step 3: Use `nk.concat` to wire together the final Graph 


## Step 4: Play the Graph

## Step 5: View and save the Trace 


Because `Trace` is a `pydantic.BaseModel`, you can save it as a JSON file by using Pydantic's [.model_dump_json](https://docs.pydantic.dev/latest/concepts/serialization/#json-mode) instance method. 

Save the Trace you generated by running the following line: 

```python
import nodekit as nk
from pathlib import Path 

trace: nk.Trace

Path('my-trace.json').write_text(trace.model_dump_json())
```

## Summary

## What's next?