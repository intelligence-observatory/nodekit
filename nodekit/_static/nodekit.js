var NodeKit=(function(Sr){"use strict";class pa{constructor(){this.startTime=null}start(){this.startTime=performance.now()}now(){if(this.startTime===null)throw new Error("Clock has not been started. Call start() before calling convertToTimeElapsedMsec().");let e=performance.now()-this.startTime;return e=Math.round(e),e}checkClockStarted(){return this.startTime!==null}}function ga(r){return{event_type:"BrowserContextSampledEvent",t:r.now(),user_agent:navigator.userAgent,timestamp_client:new Date().toISOString(),device_pixel_ratio:window.devicePixelRatio,display:{width_px:screen.width,height_px:screen.height},viewport:{width_px:window.innerWidth,height_px:window.innerHeight}}}var ma="2.0.4",_r=500,ps="user-agent",zt="",gs="?",Mn="function",Et="undefined",Vt="object",xr="string",Ne="browser",ot="cpu",Qe="device",Ge="engine",Ve="os",Ft="result",y="name",m="type",v="vendor",S="version",Pe="architecture",rn="major",b="model",sn="console",X="mobile",he="tablet",ye="smarttv",Je="wearable",Dn="xr",on="embedded",an="inapp",Tr="brands",Ot="formFactors",Rr="fullVersionList",Ht="platform",Ar="platformVersion",Bn="bitness",vt="sec-ch-ua",wa=vt+"-full-version-list",ba=vt+"-arch",Ea=vt+"-"+Bn,va=vt+"-form-factors",ya=vt+"-"+X,ka=vt+"-"+b,ms=vt+"-"+Ht,Sa=ms+"-version",ws=[Tr,Rr,X,b,Ht,Ar,Pe,Ot,Bn],Un="Amazon",qt="Apple",bs="ASUS",Es="BlackBerry",Lt="Google",vs="Huawei",Cr="Lenovo",ys="Honor",zn="LG",Or="Microsoft",Lr="Motorola",Ir="Nvidia",ks="OnePlus",Nr="OPPO",ln="Samsung",Ss="Sharp",cn="Sony",Pr="Xiaomi",$r="Zebra",_s="Chrome",xs="Chromium",yt="Chromecast",Vn="Edge",un="Firefox",hn="Opera",Mr="Facebook",Ts="Sogou",jt="Mobile ",dn=" Browser",Dr="Windows",_a=typeof window!==Et,$e=_a&&window.navigator?window.navigator:void 0,kt=$e&&$e.userAgentData?$e.userAgentData:void 0,xa=function(r,e){var t={},n=e;if(!Hn(e)){n={};for(var i in e)for(var o in e[i])n[o]=e[i][o].concat(n[o]?n[o]:[])}for(var s in r)t[s]=n[s]&&n[s].length%2===0?n[s].concat(r[s]):r[s];return t},Fn=function(r){for(var e={},t=0;t<r.length;t++)e[r[t].toUpperCase()]=r[t];return e},Br=function(r,e){if(typeof r===Vt&&r.length>0){for(var t in r)if(at(e)==at(r[t]))return!0;return!1}return Gt(r)?at(e)==at(r):!1},Hn=function(r,e){for(var t in r)return/^(browser|cpu|device|engine|os)$/.test(t)||(e?Hn(r[t]):!1)},Gt=function(r){return typeof r===xr},Ur=function(r){if(r){for(var e=[],t=Wt(/\\?\"/g,r).split(","),n=0;n<t.length;n++)if(t[n].indexOf(";")>-1){var i=qn(t[n]).split(";v=");e[n]={brand:i[0],version:i[1]}}else e[n]=qn(t[n]);return e}},at=function(r){return Gt(r)?r.toLowerCase():r},zr=function(r){return Gt(r)?Wt(/[^\d\.]/g,r).split(".")[0]:void 0},lt=function(r){for(var e in r){var t=r[e];typeof t==Vt&&t.length==2?this[t[0]]=t[1]:this[t]=void 0}return this},Wt=function(r,e){return Gt(e)?e.replace(r,zt):e},fn=function(r){return Wt(/\\?\"/g,r)},qn=function(r,e){if(Gt(r))return r=Wt(/^\s\s*/,r),typeof e===Et?r:r.substring(0,_r)},Vr=function(r,e){if(!(!r||!e))for(var t=0,n,i,o,s,a,l;t<e.length&&!a;){var c=e[t],u=e[t+1];for(n=i=0;n<c.length&&!a&&c[n];)if(a=c[n++].exec(r),a)for(o=0;o<u.length;o++)l=a[++i],s=u[o],typeof s===Vt&&s.length>0?s.length===2?typeof s[1]==Mn?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:s.length>=3&&(typeof s[1]===Mn&&!(s[1].exec&&s[1].test)?s.length>3?this[s[0]]=l?s[1].apply(this,s.slice(2)):void 0:this[s[0]]=l?s[1].call(this,l,s[2]):void 0:s.length==3?this[s[0]]=l?l.replace(s[1],s[2]):void 0:s.length==4?this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):void 0:s.length>4&&(this[s[0]]=l?s[3].apply(this,[l.replace(s[1],s[2])].concat(s.slice(4))):void 0)):this[s]=l||void 0;t+=2}},et=function(r,e){for(var t in e)if(typeof e[t]===Vt&&e[t].length>0){for(var n=0;n<e[t].length;n++)if(Br(e[t][n],r))return t===gs?void 0:t}else if(Br(e[t],r))return t===gs?void 0:t;return e.hasOwnProperty("*")?e["*"]:r},Rs={ME:"4.90","NT 3.51":"3.51","NT 4.0":"4.0",2e3:["5.0","5.01"],XP:["5.1","5.2"],Vista:"6.0",7:"6.1",8:"6.2","8.1":"6.3",10:["6.4","10.0"],NT:""},As={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":void 0},Ta={Chrome:"Google Chrome",Edge:"Microsoft Edge","Edge WebView2":"Microsoft Edge WebView2","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"},Cs={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[S,[y,jt+"Chrome"]],[/webview.+edge\/([\w\.]+)/i],[S,[y,Vn+" WebView"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[S,[y,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[y,S],[/opios[\/ ]+([\w\.]+)/i],[S,[y,hn+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[S,[y,hn+" GX"]],[/\bopr\/([\w\.]+)/i],[S,[y,hn]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[S,[y,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[S,[y,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[y,S],[/quark(?:pc)?\/([-\w\.]+)/i],[S,[y,"Quark"]],[/\bddg\/([\w\.]+)/i],[S,[y,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[S,[y,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[S,[y,"WeChat"]],[/konqueror\/([\w\.]+)/i],[S,[y,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[S,[y,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[S,[y,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[S,[y,"Smart "+Cr+dn]],[/(avast|avg)\/([\w\.]+)/i],[[y,/(.+)/,"$1 Secure"+dn],S],[/\bfocus\/([\w\.]+)/i],[S,[y,un+" Focus"]],[/\bopt\/([\w\.]+)/i],[S,[y,hn+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[S,[y,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[S,[y,"Dolphin"]],[/coast\/([\w\.]+)/i],[S,[y,hn+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[S,[y,"MIUI"+dn]],[/fxios\/([\w\.-]+)/i],[S,[y,jt+un]],[/\bqihoobrowser\/?([\w\.]*)/i],[S,[y,"360"]],[/\b(qq)\/([\w\.]+)/i],[[y,/(.+)/,"$1Browser"],S],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[y,/(.+)/,"$1"+dn],S],[/samsungbrowser\/([\w\.]+)/i],[S,[y,ln+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[S,[y,Ts+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[y,Ts+" Mobile"],S],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[y,S],[/(lbbrowser|rekonq)/i],[y],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[S,y],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[y,Mr],S,[m,an]],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat|klarna)[\/ ]([-\w\.]+)/i],[y,S,[m,an]],[/\bgsa\/([\w\.]+) .*safari\//i],[S,[y,"GSA"],[m,an]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[S,[y,"TikTok"],[m,an]],[/\[(linkedin)app\]/i],[y,[m,an]],[/(chromium)[\/ ]([-\w\.]+)/i],[y,S],[/headlesschrome(?:\/([\w\.]+)| )/i],[S,[y,_s+" Headless"]],[/wv\).+chrome\/([\w\.]+).+edgw\//i],[S,[y,Vn+" WebView2"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[y,_s+" WebView"],S],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[S,[y,"Android"+dn]],[/chrome\/([\w\.]+) mobile/i],[S,[y,jt+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[y,S],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[S,[y,jt+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[y,jt+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[S,y],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[y,[S,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[y,S],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[y,jt+un],S],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[y,"Netscape"],S],[/(wolvic|librewolf)\/([\w\.]+)/i],[y,S],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[S,[y,un+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[y,[S,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[y,[S,/[^\d\.]+./,zt]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[Pe,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[Pe,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[Pe,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[Pe,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[Pe,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[Pe,/ower/,zt,at]],[/ sun4\w[;\)]/i],[[Pe,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[Pe,at]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[b,[v,ln],[m,he]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr]|browser)[-\w]+)/i,/sec-(sgh\w+)/i],[b,[v,ln],[m,X]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[b,[v,qt],[m,X]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[b,[v,qt],[m,he]],[/(macintosh);/i],[b,[v,qt]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[b,[v,Ss],[m,X]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[b,[v,ys],[m,he]],[/honor([-\w ]+)[;\)]/i],[b,[v,ys],[m,X]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[b,[v,vs],[m,he]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[b,[v,vs],[m,X]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[b,/_/g," "],[v,Pr],[m,he]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[b,/_/g," "],[v,Pr],[m,X]],[/droid.+; (cph2[3-6]\d[13579]|((gm|hd)19|(ac|be|in|kb)20|(d[en]|eb|le|mt)21|ne22)[0-2]\d|p[g-k]\w[1m]10)\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[b,[v,ks],[m,X]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[b,[v,Nr],[m,X]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[b,[v,et,{OnePlus:["203","304","403","404","413","415"],"*":Nr}],[m,he]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[b,[v,"BLU"],[m,X]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[b,[v,"Vivo"],[m,X]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[b,[v,"Realme"],[m,X]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[b,[v,Cr],[m,he]],[/lenovo[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i],[b,[v,Cr],[m,X]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ]([\w\s]+)(\)| bui)/i,/((?:moto(?! 360)[-\w\(\) ]+|xt\d{3,4}[cgkosw\+]?[-\d]*|nexus 6)(?= bui|\)))/i],[b,[v,Lr],[m,X]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[b,[v,Lr],[m,he]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[b,[v,zn],[m,he]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch|webos))(\w+)/i,/\blg-?([\d\w]+) bui/i],[b,[v,zn],[m,X]],[/(nokia) (t[12][01])/i],[v,b,[m,he]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[b,/_/g," "],[m,X],[v,"Nokia"]],[/(pixel (c|tablet))\b/i],[b,[v,Lt],[m,he]],[/droid.+;(?: google)? (g(01[13]a|020[aem]|025[jn]|1b60|1f8f|2ybb|4s1m|576d|5nz6|8hhn|8vou|a02099|c15s|d1yq|e2ae|ec77|gh2x|kv4x|p4bc|pj41|r83y|tt9q|ur25|wvk6)|pixel[\d ]*a?( pro)?( xl)?( fold)?( \(5g\))?)( bui|\))/i],[b,[v,Lt],[m,X]],[/(google) (pixelbook( go)?)/i],[v,b],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-\w\w\d\d)(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[b,[v,cn],[m,X]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[b,"Xperia Tablet"],[v,cn],[m,he]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[b,[v,Un],[m,he]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[b,/(.+)/g,"Fire Phone $1"],[v,Un],[m,X]],[/(playbook);[-\w\),; ]+(rim)/i],[b,v,[m,he]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[b,[v,Es],[m,X]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[b,[v,bs],[m,he]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[b,[v,bs],[m,X]],[/(nexus 9)/i],[b,[v,"HTC"],[m,he]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[v,[b,/_/g," "],[m,X]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[b,[v,"TCL"],[m,he]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[b,[v,"TCL"],[m,X]],[/(itel) ((\w+))/i],[[v,at],b,[m,et,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[b,[v,"Acer"],[m,he]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[b,[v,"Meizu"],[m,X]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[b,[v,"Ulefone"],[m,X]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[b,[v,"Energizer"],[m,X]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[b,[v,"Cat"],[m,X]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[b,[v,"Smartfren"],[m,X]],[/droid.+; (a(in)?(0(15|59|6[35])|142)p?)/i],[b,[v,"Nothing"],[m,X]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[b,[v,"Archos"],[m,he]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[b,[v,"Archos"],[m,X]],[/; (n159v)/i],[b,[v,"HMD"],[m,X]],[/(imo) (tab \w+)/i,/(infinix|tecno) (x1101b?|p904|dp(7c|8d|10a)( pro)?|p70[1-3]a?|p904|t1101)/i],[v,b,[m,he]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|infinix|lava|oneplus|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(oppo) ?([\w ]+) bui/i],[v,b,[m,X]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[v,b,[m,he]],[/(surface duo)/i],[b,[v,Or],[m,he]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[b,[v,"Fairphone"],[m,X]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[b,[v,Ir],[m,he]],[/(sprint) (\w+)/i],[v,b,[m,X]],[/(kin\.[onetw]{3})/i],[[b,/\./g," "],[v,Or],[m,X]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[b,[v,$r],[m,he]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[b,[v,$r],[m,X]],[/smart-tv.+(samsung)/i],[v,[m,ye]],[/hbbtv.+maple;(\d+)/i],[[b,/^/,"SmartTV"],[v,ln],[m,ye]],[/(vizio)(?: |.+model\/)(\w+-\w+)/i,/tcast.+(lg)e?. ([-\w]+)/i],[v,b,[m,ye]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,zn],[m,ye]],[/(apple) ?tv/i],[v,[b,qt+" TV"],[m,ye]],[/crkey.*devicetype\/chromecast/i],[[b,yt+" Third Generation"],[v,Lt],[m,ye]],[/crkey.*devicetype\/([^/]*)/i],[[b,/^/,"Chromecast "],[v,Lt],[m,ye]],[/fuchsia.*crkey/i],[[b,yt+" Nest Hub"],[v,Lt],[m,ye]],[/crkey/i],[[b,yt],[v,Lt],[m,ye]],[/(portaltv)/i],[b,[v,Mr],[m,ye]],[/droid.+aft(\w+)( bui|\))/i],[b,[v,Un],[m,ye]],[/(shield \w+ tv)/i],[b,[v,Ir],[m,ye]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[b,[v,Ss],[m,ye]],[/(bravia[\w ]+)( bui|\))/i],[b,[v,cn],[m,ye]],[/(mi(tv|box)-?\w+) bui/i],[b,[v,Pr],[m,ye]],[/Hbbtv.*(technisat) (.*);/i],[v,b,[m,ye]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[v,/.+\/(\w+)/,"$1",et,{LG:"lge"}],[b,qn],[m,ye]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[b,[m,ye]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:|large screen[\w ]+safari)\b/i],[[m,ye]],[/(playstation \w+)/i],[b,[v,cn],[m,sn]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[b,[v,Or],[m,sn]],[/(ouya)/i,/(nintendo) (\w+)/i,/(retroid) (pocket ([^\)]+))/i],[v,b,[m,sn]],[/droid.+; (shield)( bui|\))/i],[b,[v,Ir],[m,sn]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[b,[v,ln],[m,Je]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[v,b,[m,Je]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[b,[v,Nr],[m,Je]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[b,[v,qt],[m,Je]],[/(opwwe\d{3})/i],[b,[v,ks],[m,Je]],[/(moto 360)/i],[b,[v,Lr],[m,Je]],[/(smartwatch 3)/i],[b,[v,cn],[m,Je]],[/(g watch r)/i],[b,[v,zn],[m,Je]],[/droid.+; (wt63?0{2,3})\)/i],[b,[v,$r],[m,Je]],[/droid.+; (glass) \d/i],[b,[v,Lt],[m,Dn]],[/(pico) (4|neo3(?: link|pro)?)/i],[v,b,[m,Dn]],[/(quest( \d| pro)?s?).+vr/i],[b,[v,Mr],[m,Dn]],[/mobile vr; rv.+firefox/i],[[m,Dn]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[m,on]],[/(aeobc)\b/i],[b,[v,Un],[m,on]],[/(homepod).+mac os/i],[b,[v,qt],[m,on]],[/windows iot/i],[[m,on]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[b,[m,et,{mobile:"Mobile",xr:"VR","*":he}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,he]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,X]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[b,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[S,[y,Vn+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[y,S],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[S,[y,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[y,S],[/ladybird\//i],[[y,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[S,y]],os:[[/(windows nt) (6\.[23]); arm/i],[[y,/N/,"R"],[S,et,Rs]],[/(windows (?:phone|mobile|iot))(?: os)?[\/ ]?([\d\.]*( se)?)/i,/(windows)[\/ ](1[01]|2000|3\.1|7|8(\.1)?|9[58]|me|server 20\d\d( r2)?|vista|xp)/i],[y,S],[/windows nt ?([\d\.\)]*)(?!.+xbox)/i,/\bwin(?=3| ?9|n)(?:nt| 9x )?([\d\.;]*)/i],[[S,/(;|\))/g,"",et,Rs],[y,Dr]],[/(windows ce)\/?([\d\.]*)/i],[y,S],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[S,/_/g,"."],[y,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+(haiku|morphos))/i],[[y,"macOS"],[S,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[S,[y,yt+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[S,[y,yt+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[S,[y,yt+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[S,[y,yt+" Linux"]],[/crkey\/([\d\.]+)/i],[S,[y,yt]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[S,y],[/(ubuntu) ([\w\.]+) like android/i],[[y,/(.+)/,"$1 Touch"],S],[/(harmonyos)[\/ ]?([\d\.]*)/i,/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen)\w*[-\/\.; ]?([\d\.]*)/i],[y,S],[/\(bb(10);/i],[S,[y,Es]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[S,[y,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[S,[y,un+" OS"]],[/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i,/webos(?:[ \/]?|\.tv-20(?=2[2-9]))(\d[\d\.]*)/i],[S,[y,"webOS"]],[/web0s;.+?(?:chr[o0]me|safari)\/(\d+)/i],[[S,et,{25:"120",24:"108",23:"94",22:"87",6:"79",5:"68",4:"53",3:"38",2:"538",1:"537","*":"TV"}],[y,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[S,[y,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[y,"Chrome OS"],S],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/linux.+(mint)[\/\(\) ]?([\w\.]*)/i,/(mageia|vectorlinux|fuchsia|arcaos|arch(?= ?linux))[;l ]([\d\.]*)/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire|knoppix)(?: gnu[\/ ]linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/\b(aix)[; ]([1-9\.]{0,4})/i,/(hurd|linux|morphos)(?: (?:arm|x86|ppc)\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) ?(r\d)?/i],[y,S],[/(sunos) ?([\d\.]*)/i],[[y,"Solaris"],S],[/\b(beos|os\/2|amigaos|openvms|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[y,S]]},jn=(function(){var r={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}};return lt.call(r.init,[[Ne,[y,S,rn,m]],[ot,[Pe]],[Qe,[m,b,v]],[Ge,[y,S]],[Ve,[y,S]]]),lt.call(r.isIgnore,[[Ne,[S,rn]],[Ge,[S]],[Ve,[S]]]),lt.call(r.isIgnoreRgx,[[Ne,/ ?browser$/i],[Ve,/ ?os$/i]]),lt.call(r.toString,[[Ne,[y,S]],[ot,[Pe]],[Qe,[v,b]],[Ge,[y,S]],[Ve,[y,S]]]),r})(),Ra=function(r,e){var t=jn.init[e],n=jn.isIgnore[e]||0,i=jn.isIgnoreRgx[e]||0,o=jn.toString[e]||0;function s(){lt.call(this,t)}return s.prototype.getItem=function(){return r},s.prototype.withClientHints=function(){return kt?kt.getHighEntropyValues(ws).then(function(a){return r.setCH(new Os(a,!1)).parseCH().get()}):r.parseCH().get()},s.prototype.withFeatureCheck=function(){return r.detectFeature().get()},e!=Ft&&(s.prototype.is=function(a){var l=!1;for(var c in this)if(this.hasOwnProperty(c)&&!Br(n,c)&&at(i?Wt(i,this[c]):this[c])==at(i?Wt(i,a):a)){if(l=!0,a!=Et)break}else if(a==Et&&l){l=!l;break}return l},s.prototype.toString=function(){var a=zt;for(var l in o)typeof this[o[l]]!==Et&&(a+=(a?" ":zt)+this[o[l]]);return a||Et}),kt||(s.prototype.then=function(a){var l=this,c=function(){for(var p in l)l.hasOwnProperty(p)&&(this[p]=l[p])};c.prototype={is:s.prototype.is,toString:s.prototype.toString};var u=new c;return a(u),u}),new s};function Os(r,e){if(r=r||{},lt.call(this,ws),e)lt.call(this,[[Tr,Ur(r[vt])],[Rr,Ur(r[wa])],[X,/\?1/.test(r[ya])],[b,fn(r[ka])],[Ht,fn(r[ms])],[Ar,fn(r[Sa])],[Pe,fn(r[ba])],[Ot,Ur(r[va])],[Bn,fn(r[Ea])]]);else for(var t in r)this.hasOwnProperty(t)&&typeof r[t]!==Et&&(this[t]=r[t])}function Ls(r,e,t,n){return this.get=function(i){return i?this.data.hasOwnProperty(i)?this.data[i]:void 0:this.data},this.set=function(i,o){return this.data[i]=o,this},this.setCH=function(i){return this.uaCH=i,this},this.detectFeature=function(){if($e&&$e.userAgent==this.ua)switch(this.itemType){case Ne:$e.brave&&typeof $e.brave.isBrave==Mn&&this.set(y,"Brave");break;case Qe:!this.get(m)&&kt&&kt[X]&&this.set(m,X),this.get(b)=="Macintosh"&&$e&&typeof $e.standalone!==Et&&$e.maxTouchPoints&&$e.maxTouchPoints>2&&this.set(b,"iPad").set(m,he);break;case Ve:!this.get(y)&&kt&&kt[Ht]&&this.set(y,kt[Ht]);break;case Ft:var i=this.data,o=function(s){return i[s].getItem().detectFeature().get()};this.set(Ne,o(Ne)).set(ot,o(ot)).set(Qe,o(Qe)).set(Ge,o(Ge)).set(Ve,o(Ve))}return this},this.parseUA=function(){return this.itemType!=Ft&&Vr.call(this.data,this.ua,this.rgxMap),this.itemType==Ne&&this.set(rn,zr(this.get(S))),this},this.parseCH=function(){var i=this.uaCH,o=this.rgxMap;switch(this.itemType){case Ne:case Ge:var s=i[Rr]||i[Tr],a;if(s)for(var l in s){var c=s[l].brand||s[l],u=s[l].version;this.itemType==Ne&&!/not.a.brand/i.test(c)&&(!a||/Chrom/.test(a)&&c!=xs||a==Vn&&/WebView2/.test(c))&&(c=et(c,Ta),a=this.get(y),a&&!/Chrom/.test(a)&&/Chrom/.test(c)||this.set(y,c).set(S,u).set(rn,zr(u)),a=c),this.itemType==Ge&&c==xs&&this.set(S,u)}break;case ot:var p=i[Pe];p&&(p&&i[Bn]=="64"&&(p+="64"),Vr.call(this.data,p+";",o));break;case Qe:if(i[X]&&this.set(m,X),i[b]&&(this.set(b,i[b]),!this.get(m)||!this.get(v))){var f={};Vr.call(f,"droid 9; "+i[b]+")",o),!this.get(m)&&f.type&&this.set(m,f.type),!this.get(v)&&f.vendor&&this.set(v,f.vendor)}if(i[Ot]){var E;if(typeof i[Ot]!="string")for(var R=0;!E&&R<i[Ot].length;)E=et(i[Ot][R++],As);else E=et(i[Ot],As);this.set(m,E)}break;case Ve:var w=i[Ht];if(w){var N=i[Ar];w==Dr&&(N=parseInt(zr(N),10)>=13?"11":"10"),this.set(y,w).set(S,N)}this.get(y)==Dr&&i[b]=="Xbox"&&this.set(y,"Xbox").set(S,void 0);break;case Ft:var j=this.data,J=function(Q){return j[Q].getItem().setCH(i).parseCH().get()};this.set(Ne,J(Ne)).set(ot,J(ot)).set(Qe,J(Qe)).set(Ge,J(Ge)).set(Ve,J(Ve))}return this},lt.call(this,[["itemType",r],["ua",e],["uaCH",n],["rgxMap",t],["data",Ra(this,r)]]),this}function ct(r,e,t){if(typeof r===Vt?(Hn(r,!0)?(typeof e===Vt&&(t=e),e=r):(t=r,e=void 0),r=void 0):typeof r===xr&&!Hn(e,!0)&&(t=e,e=void 0),t&&typeof t.append===Mn){var n={};t.forEach(function(l,c){n[c]=l}),t=n}if(!(this instanceof ct))return new ct(r,e,t).getResult();var i=typeof r===xr?r:t&&t[ps]?t[ps]:$e&&$e.userAgent?$e.userAgent:zt,o=new Os(t,!0),s=e?xa(Cs,e):Cs,a=function(l){return l==Ft?function(){return new Ls(l,i,s,o).set("ua",i).set(Ne,this.getBrowser()).set(ot,this.getCPU()).set(Qe,this.getDevice()).set(Ge,this.getEngine()).set(Ve,this.getOS()).get()}:function(){return new Ls(l,i,s[l],o).parseUA().get()}};return lt.call(this,[["getBrowser",a(Ne)],["getCPU",a(ot)],["getDevice",a(Qe)],["getEngine",a(Ge)],["getOS",a(Ve)],["getResult",a(Ft)],["getUA",function(){return i}],["setUA",function(l){return Gt(l)&&(i=l.length>_r?qn(l,_r):l),this}]]).setUA(i),this}ct.VERSION=ma,ct.BROWSER=Fn([y,S,rn,m]),ct.CPU=Fn([Pe]),ct.DEVICE=Fn([b,v,m,sn,X,ye,he,Je,on]),ct.ENGINE=ct.OS=Fn([y,S]);function Aa(){return!new ct().getDevice().type}function Ca(){const r=document.createElement("div");r.classList.add("nodekit-container"),document.body.appendChild(r);const e=document.createElement("div");return e.classList.add("nodekit-content"),r.appendChild(e),e}class Oa{resolveAssetUrl(e){if(e.locator.locator_type=="URL")return e.locator.url;if(e.locator.locator_type=="RelativePath"){let t=document.baseURI;const i=e.locator.relative_path.replace(/\\/g,"/").split("/").map(o=>encodeURIComponent(o)).join("/");return new URL(i,t).toString()}throw new Error("Unsupported locator for the browser environment. Found:"+JSON.stringify(e))}async getImageElement(e){let t=this.resolveAssetUrl(e),n=new Image;return n.src=t,new Promise((i,o)=>{n.onload=()=>i(n),n.onerror=s=>o(s)})}async getVideoElement(e){let t=this.resolveAssetUrl(e),n=document.createElement("video");n.controls=!1;let i=new Promise((o,s)=>{n.oncanplaythrough=()=>{o(n)},n.onerror=a=>s(a)});return n.src=t,n.load(),i}}class Fe{constructor(){this._listenerRegistry=[]}mount(e){e.appendChild(this.root)}disable(e="dimmed"){switch(this.root.setAttribute("disabled","true"),this.root.style.pointerEvents="none",this.root.style.userSelect="none",e){case"invisible":this.root.style.opacity="0";break;case"dimmed":this.root.style.opacity="0.3";break;case"visible":this.root.style.opacity="1";break}}enable(){this.root.removeAttribute("disabled"),this.root.style.pointerEvents="",this.root.style.userSelect="",this.root.style.opacity=""}destroy(){for(const e of this._findChildrenComponents())e.destroy();this.root.remove(),this.removeAllEventListeners()}_registerEventListener(e,t,n,i){e.addEventListener(t,n,i),this._listenerRegistry.push({type:t,handler:n,options:i})}_findChildrenComponents(){const e=[];for(const t of Object.keys(this)){const n=this[t];n instanceof Fe?e.push(n):Array.isArray(n)&&n.every(i=>i instanceof Fe)&&e.push(...n)}return e}removeAllEventListeners(){for(const{type:e,handler:t,options:n}of this._listenerRegistry)this.root.removeEventListener(e,t,n);this._listenerRegistry=[];for(const e of this._findChildrenComponents())e.removeAllEventListeners()}}class La extends Fe{constructor(){super(),this.root=document.createElement("div"),this.root.className="status-dot"}setState(e){const t=this.root;t.classList.remove("status-dot--positive","status-dot--negative","status-dot--neutral");const i=new Set(["positive","negative","neutral"]).has(e)?e:"negative";t.classList.add(`status-dot--${i}`)}}class Ia extends Fe{constructor(e){switch(super(),this.root=document.createElement("div"),this.root.className="progress-bar",this.progressBarDiv=document.createElement("div"),this.progressBarDiv.className="progress-bar__inner",this.root.appendChild(this.progressBarDiv),e){case"cognition":this.progressBarDiv.classList.add("progress-bar__inner--cognition");break;case"system":this.progressBarDiv.classList.add("progress-bar__inner--system");break;default:throw new Error(`Unknown progress bar type: ${e}`)}}setProgress(e){const t=Math.round(Math.min(Math.max(e,0),100));this.progressBarDiv.style.width=`${t}%`}}class Gn extends Fe{constructor(e){super(),this.root=document.createElement("div"),this.root.classList.add("overlay"),this.root.id=e}setVisibility(e){e?this.root.classList.add("overlay--visible-state"):this.root.classList.remove("overlay--visible-state")}}class Na extends Fe{constructor(){super(),this.spinnerFrames=["⠋","⠙","⠹","⠸","⠼","⠴","⠦","⠧","⠇","⠏"],this.spinnerInterval=null,this.frameIndex=0,this.root=document.createElement("span"),this.root.style.paddingRight="0.5rem",this.root.textContent=this.spinnerFrames[this.frameIndex]}startSpinning(){this.frameIndex=0,this.spinnerInterval=window.setInterval(()=>{this.root.textContent=this.spinnerFrames[this.frameIndex++%this.spinnerFrames.length]},100)}stopSpinning(){this.spinnerInterval!==null&&(clearInterval(this.spinnerInterval),this.spinnerInterval=null)}}class Pa extends Gn{constructor(){super("session-connecting-overlay"),this.displayTimeout=null;const e=document.createElement("div");e.classList.add("connecting-message-box"),this.root.appendChild(e),this.spinner=new Na,this.spinner.mount(e);const t=document.createElement("div");t.classList.add("connecting-message-box__text"),t.textContent="Connecting...",e.appendChild(t)}show(e){this.displayTimeout=window.setTimeout(()=>{this.spinner.startSpinning(),super.setVisibility(!0)},e)}hide(){this.displayTimeout!==null&&(clearTimeout(this.displayTimeout),this.displayTimeout=null),this.spinner.stopSpinning(),super.setVisibility(!1)}}function $a(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fr,Is;function Ma(){if(Is)return Fr;Is=1;function r(h){return h instanceof Map?h.clear=h.delete=h.set=function(){throw new Error("map is read-only")}:h instanceof Set&&(h.add=h.clear=h.delete=function(){throw new Error("set is read-only")}),Object.freeze(h),Object.getOwnPropertyNames(h).forEach(g=>{const x=h[g],G=typeof x;(G==="object"||G==="function")&&!Object.isFrozen(x)&&r(x)}),h}class e{constructor(g){g.data===void 0&&(g.data={}),this.data=g.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(h){return h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function n(h,...g){const x=Object.create(null);for(const G in h)x[G]=h[G];return g.forEach(function(G){for(const be in G)x[be]=G[be]}),x}const i="</span>",o=h=>!!h.scope,s=(h,{prefix:g})=>{if(h.startsWith("language:"))return h.replace("language:","language-");if(h.includes(".")){const x=h.split(".");return[`${g}${x.shift()}`,...x.map((G,be)=>`${G}${"_".repeat(be+1)}`)].join(" ")}return`${g}${h}`};class a{constructor(g,x){this.buffer="",this.classPrefix=x.classPrefix,g.walk(this)}addText(g){this.buffer+=t(g)}openNode(g){if(!o(g))return;const x=s(g.scope,{prefix:this.classPrefix});this.span(x)}closeNode(g){o(g)&&(this.buffer+=i)}value(){return this.buffer}span(g){this.buffer+=`<span class="${g}">`}}const l=(h={})=>{const g={children:[]};return Object.assign(g,h),g};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(g){this.top.children.push(g)}openNode(g){const x=l({scope:g});this.add(x),this.stack.push(x)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(g){return this.constructor._walk(g,this.rootNode)}static _walk(g,x){return typeof x=="string"?g.addText(x):x.children&&(g.openNode(x),x.children.forEach(G=>this._walk(g,G)),g.closeNode(x)),g}static _collapse(g){typeof g!="string"&&g.children&&(g.children.every(x=>typeof x=="string")?g.children=[g.children.join("")]:g.children.forEach(x=>{c._collapse(x)}))}}class u extends c{constructor(g){super(),this.options=g}addText(g){g!==""&&this.add(g)}startScope(g){this.openNode(g)}endScope(){this.closeNode()}__addSublanguage(g,x){const G=g.root;x&&(G.scope=`language:${x}`),this.add(G)}toHTML(){return new a(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function p(h){return h?typeof h=="string"?h:h.source:null}function f(h){return w("(?=",h,")")}function E(h){return w("(?:",h,")*")}function R(h){return w("(?:",h,")?")}function w(...h){return h.map(x=>p(x)).join("")}function N(h){const g=h[h.length-1];return typeof g=="object"&&g.constructor===Object?(h.splice(h.length-1,1),g):{}}function j(...h){return"("+(N(h).capture?"":"?:")+h.map(G=>p(G)).join("|")+")"}function J(h){return new RegExp(h.toString()+"|").exec("").length-1}function Q(h,g){const x=h&&h.exec(g);return x&&x.index===0}const ee=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function de(h,{joinWith:g}){let x=0;return h.map(G=>{x+=1;const be=x;let we=p(G),I="";for(;we.length>0;){const L=ee.exec(we);if(!L){I+=we;break}I+=we.substring(0,L.index),we=we.substring(L.index+L[0].length),L[0][0]==="\\"&&L[1]?I+="\\"+String(Number(L[1])+be):(I+=L[0],L[0]==="("&&x++)}return I}).map(G=>`(${G})`).join(g)}const ne=/\b\B/,oe="[a-zA-Z]\\w*",F="[a-zA-Z_]\\w*",qe="\\b\\d+(\\.\\d+)?",nt="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Ee="\\b(0b[01]+)",pt="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",gt=(h={})=>{const g=/^#![ ]*\//;return h.binary&&(h.begin=w(g,/.*\b/,h.binary,/\b.*/)),n({scope:"meta",begin:g,end:/$/,relevance:0,"on:begin":(x,G)=>{x.index!==0&&G.ignoreMatch()}},h)},A={begin:"\\\\[\\s\\S]",relevance:0},T={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[A]},z={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[A]},P={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},M=function(h,g,x={}){const G=n({scope:"comment",begin:h,end:g,contains:[]},x);G.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const be=j("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return G.contains.push({begin:w(/[ ]+/,"(",be,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),G},$=M("//","$"),q=M("/\\*","\\*/"),V=M("#","$"),K={scope:"number",begin:qe,relevance:0},W={scope:"number",begin:nt,relevance:0},ke={scope:"number",begin:Ee,relevance:0},Y={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[A,{begin:/\[/,end:/\]/,relevance:0,contains:[A]}]},Me={scope:"title",begin:oe,relevance:0},xn={scope:"title",begin:F,relevance:0},ur={begin:"\\.\\s*"+F,relevance:0};var Pt=Object.freeze({__proto__:null,APOS_STRING_MODE:T,BACKSLASH_ESCAPE:A,BINARY_NUMBER_MODE:ke,BINARY_NUMBER_RE:Ee,COMMENT:M,C_BLOCK_COMMENT_MODE:q,C_LINE_COMMENT_MODE:$,C_NUMBER_MODE:W,C_NUMBER_RE:nt,END_SAME_AS_BEGIN:function(h){return Object.assign(h,{"on:begin":(g,x)=>{x.data._beginMatch=g[1]},"on:end":(g,x)=>{x.data._beginMatch!==g[1]&&x.ignoreMatch()}})},HASH_COMMENT_MODE:V,IDENT_RE:oe,MATCH_NOTHING_RE:ne,METHOD_GUARD:ur,NUMBER_MODE:K,NUMBER_RE:qe,PHRASAL_WORDS_MODE:P,QUOTE_STRING_MODE:z,REGEXP_MODE:Y,RE_STARTERS_RE:pt,SHEBANG:gt,TITLE_MODE:Me,UNDERSCORE_IDENT_RE:F,UNDERSCORE_TITLE_MODE:xn});function dr(h,g){h.input[h.index-1]==="."&&g.ignoreMatch()}function St(h,g){h.className!==void 0&&(h.scope=h.className,delete h.className)}function Yt(h,g){g&&h.beginKeywords&&(h.begin="\\b("+h.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",h.__beforeBegin=dr,h.keywords=h.keywords||h.beginKeywords,delete h.beginKeywords,h.relevance===void 0&&(h.relevance=0))}function mt(h,g){Array.isArray(h.illegal)&&(h.illegal=j(...h.illegal))}function Tn(h,g){if(h.match){if(h.begin||h.end)throw new Error("begin & end are not supported with match");h.begin=h.match,delete h.match}}function Rn(h,g){h.relevance===void 0&&(h.relevance=1)}const _t=(h,g)=>{if(!h.beforeMatch)return;if(h.starts)throw new Error("beforeMatch cannot be used with starts");const x=Object.assign({},h);Object.keys(h).forEach(G=>{delete h[G]}),h.keywords=x.keywords,h.begin=w(x.beforeMatch,f(x.begin)),h.starts={relevance:0,contains:[Object.assign(x,{endsParent:!0})]},h.relevance=0,delete x.beforeMatch},Kt=["of","and","for","in","not","or","if","then","parent","list","value"],Zt="keyword";function An(h,g,x=Zt){const G=Object.create(null);return typeof h=="string"?be(x,h.split(" ")):Array.isArray(h)?be(x,h):Object.keys(h).forEach(function(we){Object.assign(G,An(h[we],g,we))}),G;function be(we,I){g&&(I=I.map(L=>L.toLowerCase())),I.forEach(function(L){const H=L.split("|");G[H[0]]=[we,fr(H[0],H[1])]})}}function fr(h,g){return g?Number(g):as(h)?0:1}function as(h){return Kt.includes(h.toLowerCase())}const Qt={},De=h=>{console.error(h)},wt=(h,...g)=>{console.log(`WARN: ${h}`,...g)},Be=(h,g)=>{Qt[`${h}/${g}`]||(console.log(`Deprecated as of ${h}. ${g}`),Qt[`${h}/${g}`]=!0)},$t=new Error;function Cn(h,g,{key:x}){let G=0;const be=h[x],we={},I={};for(let L=1;L<=g.length;L++)I[L+G]=be[L],we[L+G]=!0,G+=J(g[L-1]);h[x]=I,h[x]._emit=we,h[x]._multi=!0}function pr(h){if(Array.isArray(h.begin)){if(h.skip||h.excludeBegin||h.returnBegin)throw De("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),$t;if(typeof h.beginScope!="object"||h.beginScope===null)throw De("beginScope must be object"),$t;Cn(h,h.begin,{key:"beginScope"}),h.begin=de(h.begin,{joinWith:""})}}function On(h){if(Array.isArray(h.end)){if(h.skip||h.excludeEnd||h.returnEnd)throw De("skip, excludeEnd, returnEnd not compatible with endScope: {}"),$t;if(typeof h.endScope!="object"||h.endScope===null)throw De("endScope must be object"),$t;Cn(h,h.end,{key:"endScope"}),h.end=de(h.end,{joinWith:""})}}function gr(h){h.scope&&typeof h.scope=="object"&&h.scope!==null&&(h.beginScope=h.scope,delete h.scope)}function Jt(h){gr(h),typeof h.beginScope=="string"&&(h.beginScope={_wrap:h.beginScope}),typeof h.endScope=="string"&&(h.endScope={_wrap:h.endScope}),pr(h),On(h)}function en(h){function g(I,L){return new RegExp(p(I),"m"+(h.case_insensitive?"i":"")+(h.unicodeRegex?"u":"")+(L?"g":""))}class x{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(L,H){H.position=this.position++,this.matchIndexes[this.matchAt]=H,this.regexes.push([H,L]),this.matchAt+=J(L)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const L=this.regexes.map(H=>H[1]);this.matcherRe=g(de(L,{joinWith:"|"}),!0),this.lastIndex=0}exec(L){this.matcherRe.lastIndex=this.lastIndex;const H=this.matcherRe.exec(L);if(!H)return null;const ce=H.findIndex((At,tn)=>tn>0&&At!==void 0),fe=this.matchIndexes[ce];return H.splice(0,ce),Object.assign(H,fe)}}class G{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(L){if(this.multiRegexes[L])return this.multiRegexes[L];const H=new x;return this.rules.slice(L).forEach(([ce,fe])=>H.addRule(ce,fe)),H.compile(),this.multiRegexes[L]=H,H}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(L,H){this.rules.push([L,H]),H.type==="begin"&&this.count++}exec(L){const H=this.getMatcher(this.regexIndex);H.lastIndex=this.lastIndex;let ce=H.exec(L);if(this.resumingScanAtSamePosition()&&!(ce&&ce.index===this.lastIndex)){const fe=this.getMatcher(0);fe.lastIndex=this.lastIndex+1,ce=fe.exec(L)}return ce&&(this.regexIndex+=ce.position+1,this.regexIndex===this.count&&this.considerAll()),ce}}function be(I){const L=new G;return I.contains.forEach(H=>L.addRule(H.begin,{rule:H,type:"begin"})),I.terminatorEnd&&L.addRule(I.terminatorEnd,{type:"end"}),I.illegal&&L.addRule(I.illegal,{type:"illegal"}),L}function we(I,L){const H=I;if(I.isCompiled)return H;[St,Tn,Jt,_t].forEach(fe=>fe(I,L)),h.compilerExtensions.forEach(fe=>fe(I,L)),I.__beforeBegin=null,[Yt,mt,Rn].forEach(fe=>fe(I,L)),I.isCompiled=!0;let ce=null;return typeof I.keywords=="object"&&I.keywords.$pattern&&(I.keywords=Object.assign({},I.keywords),ce=I.keywords.$pattern,delete I.keywords.$pattern),ce=ce||/\w+/,I.keywords&&(I.keywords=An(I.keywords,h.case_insensitive)),H.keywordPatternRe=g(ce,!0),L&&(I.begin||(I.begin=/\B|\b/),H.beginRe=g(H.begin),!I.end&&!I.endsWithParent&&(I.end=/\B|\b/),I.end&&(H.endRe=g(H.end)),H.terminatorEnd=p(H.end)||"",I.endsWithParent&&L.terminatorEnd&&(H.terminatorEnd+=(I.end?"|":"")+L.terminatorEnd)),I.illegal&&(H.illegalRe=g(I.illegal)),I.contains||(I.contains=[]),I.contains=[].concat(...I.contains.map(function(fe){return xt(fe==="self"?I:fe)})),I.contains.forEach(function(fe){we(fe,H)}),I.starts&&we(I.starts,L),H.matcher=be(H),H}if(h.compilerExtensions||(h.compilerExtensions=[]),h.contains&&h.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return h.classNameAliases=n(h.classNameAliases||{}),we(h)}function je(h){return h?h.endsWithParent||je(h.starts):!1}function xt(h){return h.variants&&!h.cachedVariants&&(h.cachedVariants=h.variants.map(function(g){return n(h,{variants:null},g)})),h.cachedVariants?h.cachedVariants:je(h)?n(h,{starts:h.starts?n(h.starts):null}):Object.isFrozen(h)?n(h):h}var Ln="11.11.1";class In extends Error{constructor(g,x){super(g),this.name="HTMLInjectionError",this.html=x}}const Nn=t,Mt=n,Dt=Symbol("nomatch"),ls=7,Tt=function(h){const g=Object.create(null),x=Object.create(null),G=[];let be=!0;const we="Could not find the language '{}', did you forget to load/include a language module?",I={disableAutodetect:!0,name:"Plain text",contains:[]};let L={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:u};function H(k){return L.noHighlightRe.test(k)}function ce(k){let B=k.className+" ";B+=k.parentNode?k.parentNode.className:"";const re=L.languageDetectRe.exec(B);if(re){const ge=O(re[1]);return ge||(wt(we.replace("{}",re[1])),wt("Falling back to no-highlight mode for this block.",k)),ge?re[1]:"no-highlight"}return B.split(/\s+/).find(ge=>H(ge)||O(ge))}function fe(k,B,re){let ge="",_e="";typeof B=="object"?(ge=k,re=B.ignoreIllegals,_e=B.language):(Be("10.7.0","highlight(lang, code, ...args) has been deprecated."),Be("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),_e=k,ge=B),re===void 0&&(re=!0);const Ze={code:ge,language:_e};rt("before:highlight",Ze);const Ct=Ze.result?Ze.result:At(Ze.language,Ze.code,re);return Ct.code=Ze.code,rt("after:highlight",Ct),Ct}function At(k,B,re,ge){const _e=Object.create(null);function Ze(C,U){return C.keywords[U]}function Ct(){if(!Z.keywords){xe.addText(me);return}let C=0;Z.keywordPatternRe.lastIndex=0;let U=Z.keywordPatternRe.exec(me),te="";for(;U;){te+=me.substring(C,U.index);const ue=st.case_insensitive?U[0].toLowerCase():U[0],Re=Ze(Z,ue);if(Re){const[bt,Qc]=Re;if(xe.addText(te),te="",_e[ue]=(_e[ue]||0)+1,_e[ue]<=ls&&(kr+=Qc),bt.startsWith("_"))te+=U[0];else{const Jc=st.classNameAliases[bt]||bt;it(U[0],Jc)}}else te+=U[0];C=Z.keywordPatternRe.lastIndex,U=Z.keywordPatternRe.exec(me)}te+=me.substring(C),xe.addText(te)}function vr(){if(me==="")return;let C=null;if(typeof Z.subLanguage=="string"){if(!g[Z.subLanguage]){xe.addText(me);return}C=At(Z.subLanguage,me,!0,fa[Z.subLanguage]),fa[Z.subLanguage]=C._top}else C=Bt(me,Z.subLanguage.length?Z.subLanguage:null);Z.relevance>0&&(kr+=C.relevance),xe.__addSublanguage(C._emitter,C.language)}function ze(){Z.subLanguage!=null?vr():Ct(),me=""}function it(C,U){C!==""&&(xe.startScope(U),xe.addText(C),xe.endScope())}function ca(C,U){let te=1;const ue=U.length-1;for(;te<=ue;){if(!C._emit[te]){te++;continue}const Re=st.classNameAliases[C[te]]||C[te],bt=U[te];Re?it(bt,Re):(me=bt,Ct(),me=""),te++}}function ua(C,U){return C.scope&&typeof C.scope=="string"&&xe.openNode(st.classNameAliases[C.scope]||C.scope),C.beginScope&&(C.beginScope._wrap?(it(me,st.classNameAliases[C.beginScope._wrap]||C.beginScope._wrap),me=""):C.beginScope._multi&&(ca(C.beginScope,U),me="")),Z=Object.create(C,{parent:{value:Z}}),Z}function ha(C,U,te){let ue=Q(C.endRe,te);if(ue){if(C["on:end"]){const Re=new e(C);C["on:end"](U,Re),Re.isMatchIgnored&&(ue=!1)}if(ue){for(;C.endsParent&&C.parent;)C=C.parent;return C}}if(C.endsWithParent)return ha(C.parent,U,te)}function Wc(C){return Z.matcher.regexIndex===0?(me+=C[0],1):(hs=!0,0)}function Xc(C){const U=C[0],te=C.rule,ue=new e(te),Re=[te.__beforeBegin,te["on:begin"]];for(const bt of Re)if(bt&&(bt(C,ue),ue.isMatchIgnored))return Wc(U);return te.skip?me+=U:(te.excludeBegin&&(me+=U),ze(),!te.returnBegin&&!te.excludeBegin&&(me=U)),ua(te,C),te.returnBegin?0:U.length}function Yc(C){const U=C[0],te=B.substring(C.index),ue=ha(Z,C,te);if(!ue)return Dt;const Re=Z;Z.endScope&&Z.endScope._wrap?(ze(),it(U,Z.endScope._wrap)):Z.endScope&&Z.endScope._multi?(ze(),ca(Z.endScope,C)):Re.skip?me+=U:(Re.returnEnd||Re.excludeEnd||(me+=U),ze(),Re.excludeEnd&&(me=U));do Z.scope&&xe.closeNode(),!Z.skip&&!Z.subLanguage&&(kr+=Z.relevance),Z=Z.parent;while(Z!==ue.parent);return ue.starts&&ua(ue.starts,C),Re.returnEnd?0:U.length}function Kc(){const C=[];for(let U=Z;U!==st;U=U.parent)U.scope&&C.unshift(U.scope);C.forEach(U=>xe.openNode(U))}let yr={};function da(C,U){const te=U&&U[0];if(me+=C,te==null)return ze(),0;if(yr.type==="begin"&&U.type==="end"&&yr.index===U.index&&te===""){if(me+=B.slice(U.index,U.index+1),!be){const ue=new Error(`0 width match regex (${k})`);throw ue.languageName=k,ue.badRule=yr.rule,ue}return 1}if(yr=U,U.type==="begin")return Xc(U);if(U.type==="illegal"&&!re){const ue=new Error('Illegal lexeme "'+te+'" for mode "'+(Z.scope||"<unnamed>")+'"');throw ue.mode=Z,ue}else if(U.type==="end"){const ue=Yc(U);if(ue!==Dt)return ue}if(U.type==="illegal"&&te==="")return me+=`
`,1;if(us>1e5&&us>U.index*3)throw new Error("potential infinite loop, way more iterations than matches");return me+=te,te.length}const st=O(k);if(!st)throw De(we.replace("{}",k)),new Error('Unknown language: "'+k+'"');const Zc=en(st);let cs="",Z=ge||Zc;const fa={},xe=new L.__emitter(L);Kc();let me="",kr=0,Ut=0,us=0,hs=!1;try{if(st.__emitTokens)st.__emitTokens(B,xe);else{for(Z.matcher.considerAll();;){us++,hs?hs=!1:Z.matcher.considerAll(),Z.matcher.lastIndex=Ut;const C=Z.matcher.exec(B);if(!C)break;const U=B.substring(Ut,C.index),te=da(U,C);Ut=C.index+te}da(B.substring(Ut))}return xe.finalize(),cs=xe.toHTML(),{language:k,value:cs,relevance:kr,illegal:!1,_emitter:xe,_top:Z}}catch(C){if(C.message&&C.message.includes("Illegal"))return{language:k,value:Nn(B),illegal:!0,relevance:0,_illegalBy:{message:C.message,index:Ut,context:B.slice(Ut-100,Ut+100),mode:C.mode,resultSoFar:cs},_emitter:xe};if(be)return{language:k,value:Nn(B),illegal:!1,relevance:0,errorRaised:C,_emitter:xe,_top:Z};throw C}}function tn(k){const B={value:Nn(k),illegal:!1,relevance:0,_top:I,_emitter:new L.__emitter(L)};return B._emitter.addText(k),B}function Bt(k,B){B=B||L.languages||Object.keys(g);const re=tn(k),ge=B.filter(O).filter(Se).map(ze=>At(ze,k,!1));ge.unshift(re);const _e=ge.sort((ze,it)=>{if(ze.relevance!==it.relevance)return it.relevance-ze.relevance;if(ze.language&&it.language){if(O(ze.language).supersetOf===it.language)return 1;if(O(it.language).supersetOf===ze.language)return-1}return 0}),[Ze,Ct]=_e,vr=Ze;return vr.secondBest=Ct,vr}function mr(k,B,re){const ge=B&&x[B]||re;k.classList.add("hljs"),k.classList.add(`language-${ge}`)}function Ue(k){let B=null;const re=ce(k);if(H(re))return;if(rt("before:highlightElement",{el:k,language:re}),k.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",k);return}if(k.children.length>0&&(L.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(k)),L.throwUnescapedHTML))throw new In("One of your code blocks includes unescaped HTML.",k.innerHTML);B=k;const ge=B.textContent,_e=re?fe(ge,{language:re,ignoreIllegals:!0}):Bt(ge);k.innerHTML=_e.value,k.dataset.highlighted="yes",mr(k,re,_e.language),k.result={language:_e.language,re:_e.relevance,relevance:_e.relevance},_e.secondBest&&(k.secondBest={language:_e.secondBest.language,relevance:_e.secondBest.relevance}),rt("after:highlightElement",{el:k,result:_e,text:ge})}function wr(k){L=Mt(L,k)}const br=()=>{nn(),Be("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Er(){nn(),Be("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Pn=!1;function nn(){function k(){nn()}if(document.readyState==="loading"){Pn||window.addEventListener("DOMContentLoaded",k,!1),Pn=!0;return}document.querySelectorAll(L.cssSelector).forEach(Ue)}function D(k,B){let re=null;try{re=B(h)}catch(ge){if(De("Language definition for '{}' could not be registered.".replace("{}",k)),be)De(ge);else throw ge;re=I}re.name||(re.name=k),g[k]=re,re.rawDefinition=B.bind(null,h),re.aliases&&pe(re.aliases,{languageName:k})}function d(k){delete g[k];for(const B of Object.keys(x))x[B]===k&&delete x[B]}function _(){return Object.keys(g)}function O(k){return k=(k||"").toLowerCase(),g[k]||g[x[k]]}function pe(k,{languageName:B}){typeof k=="string"&&(k=[k]),k.forEach(re=>{x[re.toLowerCase()]=B})}function Se(k){const B=O(k);return B&&!B.disableAutodetect}function ve(k){k["before:highlightBlock"]&&!k["before:highlightElement"]&&(k["before:highlightElement"]=B=>{k["before:highlightBlock"](Object.assign({block:B.el},B))}),k["after:highlightBlock"]&&!k["after:highlightElement"]&&(k["after:highlightElement"]=B=>{k["after:highlightBlock"](Object.assign({block:B.el},B))})}function Te(k){ve(k),G.push(k)}function Ke(k){const B=G.indexOf(k);B!==-1&&G.splice(B,1)}function rt(k,B){const re=k;G.forEach(function(ge){ge[re]&&ge[re](B)})}function $n(k){return Be("10.7.0","highlightBlock will be removed entirely in v12.0"),Be("10.7.0","Please use highlightElement now."),Ue(k)}Object.assign(h,{highlight:fe,highlightAuto:Bt,highlightAll:nn,highlightElement:Ue,highlightBlock:$n,configure:wr,initHighlighting:br,initHighlightingOnLoad:Er,registerLanguage:D,unregisterLanguage:d,listLanguages:_,getLanguage:O,registerAliases:pe,autoDetection:Se,inherit:Mt,addPlugin:Te,removePlugin:Ke}),h.debugMode=function(){be=!1},h.safeMode=function(){be=!0},h.versionString=Ln,h.regex={concat:w,lookahead:f,either:j,optional:R,anyNumberOfTimes:E};for(const k in Pt)typeof Pt[k]=="object"&&r(Pt[k]);return Object.assign(h,Pt),h},Rt=Tt({});return Rt.newInstance=()=>Tt({}),Fr=Rt,Rt.HighlightJS=Rt,Rt.default=Rt,Fr}var Da=Ma();const Ns=$a(Da);function Ba(r){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},t={match:/[{}[\],:]/,className:"punctuation",relevance:0},n=["true","false","null"],i={scope:"literal",beginKeywords:n.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:n},contains:[e,t,r.QUOTE_STRING_MODE,i,r.C_NUMBER_MODE,r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}Ns.registerLanguage("json",Ba);class Ua extends Fe{constructor(){super(),this.root=document.createElement("div"),this.root.classList.add("json-viewer"),this.jsonViewerContent=document.createElement("div"),this.jsonViewerContent.classList.add("json-viewer__content"),this.root.appendChild(this.jsonViewerContent)}displayAsJson(e){this.clear();const t=document.createElement("pre");t.classList.add("json-viewer__pre"),t.textContent=JSON.stringify(e,null,2),Ns.highlightElement(t),t.style.backgroundColor="transparent",this.jsonViewerContent.appendChild(t)}clear(){}}class za extends Gn{constructor(){super("console-message-overlay");const e=document.createElement("div");e.classList.add("console-title-box"),this.root.appendChild(e),this.titleTextDiv=document.createElement("div"),this.titleTextDiv.classList.add("console-title-box__text"),e.appendChild(this.titleTextDiv),this.jsonViewer=new Ua,this.jsonViewer.mount(this.root);const t=new Va;t.setCopyTarget(this.jsonViewer.root),t.mount(e)}displayMessage(e,t){this.titleTextDiv.innerHTML=e,this.jsonViewer.displayAsJson(t),super.setVisibility(!0)}hide(){this.titleTextDiv.innerHTML="",this.jsonViewer.clear(),super.setVisibility(!1)}}class Va extends Fe{constructor(){super();const e=document.createElement("button");e.classList.add("copy-button"),e.classList.add("copy-button"),e.textContent="Copy",this.root=e}setCopyTarget(e){this.root.onclick=()=>{const t=e.textContent||"";navigator.clipboard.writeText(t)}}}class Fa extends Gn{constructor(){super("session-finished-overlay"),this.submitButton=new Ha,this.submitButton.mount(this.root),this.messageBox=document.createElement("div"),this.messageBox.classList.add("debrief-message-box"),this.root.appendChild(this.messageBox),this.messageSpan=document.createElement("span"),this.messageSpan.classList.add("debrief-message-box__text"),this.messageBox.appendChild(this.messageSpan)}show(e,t){e.length==0?this.messageBox.style.visibility="hidden":this.messageBox.style.visibility="visible",this.messageSpan.textContent=e,this.submitButton.attachClickListener(t),this.setVisibility(!0)}hide(){this.messageSpan.textContent="",super.setVisibility(!1),this.submitButton.removeAllEventListeners()}}class Ha extends Fe{constructor(){super();const e=document.createElement("button");e.classList.add("submit-button"),e.textContent="Press to Submit",this.root=e}attachClickListener(e){this._registerEventListener(this.root,"click",e)}}class qa extends Gn{constructor(){super("session-started-overlay"),this.startButton=new ja,this.startButton.mount(this.root)}show(e){this.startButton.attachClickListener(e),this.setVisibility(!0)}hide(){super.setVisibility(!1),this.startButton.removeAllEventListeners()}}class ja extends Fe{constructor(){super();const e=document.createElement("button");e.classList.add("start-button"),e.textContent="Press to Start",this.root=e}attachClickListener(e){this._registerEventListener(this.root,"click",e)}}class Ga extends Fe{constructor(){super(),this.root=document.createElement("div"),this.root.className="shell-ui",this.progressBar=new Ia("cognition"),this.progressBar.mount(this.root),this.statusDot=new La,this.statusDot.mount(this.root),this.sessionConnectingOverlay=new Pa,this.sessionConnectingOverlay.mount(this.root),this.overlayConsoleMessage=new za,this.overlayConsoleMessage.mount(this.root),this.sessionFinishedOverlay=new Fa,this.sessionFinishedOverlay.mount(this.root),this.sessionStartedOverlay=new qa,this.sessionStartedOverlay.mount(this.root)}setProgressBar(e){this.progressBar.setProgress(e)}setStatusDot(e){this.statusDot.setState(e)}showSessionConnectingOverlay(e=500){this.sessionConnectingOverlay.show(e)}hideSessionConnectingOverlay(){this.sessionConnectingOverlay.hide()}showConsoleMessageOverlay(e,t){this.overlayConsoleMessage.displayMessage(e,t)}showErrorOverlay(e){this.showConsoleMessageOverlay("The following error occurred:",{name:e.name,message:e.message,stack:e.stack})}hideConsoleMessageOverlay(){this.overlayConsoleMessage.hide()}async playStartScreen(){await new Promise((t,n)=>{this.sessionStartedOverlay.show(()=>{this.sessionStartedOverlay.hide(),t()})})}async playEndScreen(e="",t=1e4){let n=new Promise((o,s)=>{this.sessionFinishedOverlay.show(e,()=>{this.sessionFinishedOverlay.hide(),o()})});await n;let i=new Promise((o,s)=>{setTimeout(()=>{this.sessionFinishedOverlay.hide(),o()},t)});await Promise.race([n,i])}}function Wa(){const r=document.createElement("div");return r.className="board-views-ui",r}class Xa{constructor(e,t){this.subscriptions=[],this.target=e,this.clock=t,this.boardCoordinateSystem=this.getCoordinateSystem();const n=()=>{this.boardCoordinateSystem=this.getCoordinateSystem()};window.addEventListener("resize",n);let i=!1,o=0;const s=30,a=l=>{if(!this.clock.checkClockStarted()){console.warn("PointerStream: clock has not started.");return}i||(this.boardCoordinateSystem=this.getCoordinateSystem(),i=!0);let c;switch(l.type){case"pointermove":if(l.timeStamp-o<1e3/s)return;c="move",o=l.timeStamp;break;case"pointerdown":if(l.button!==0)return;c="down";break;case"pointerup":if(l.button!==0)return;c="up";break;default:return}const{x:u,y:p}=this.boardCoordinateSystem.getBoardLocationFromPointerEvent(l),f={sampleType:c,x:u,y:p,t:t.now()};this.subscriptions.forEach(E=>E(f))};this.target.addEventListener("pointermove",a),this.target.addEventListener("pointerdown",a),this.target.addEventListener("pointerup",a)}getCoordinateSystem(){return new Ps(this.target)}subscribe(e){return this.subscriptions.push(e),(()=>{this.subscriptions=this.subscriptions.filter(t=>t!==e)})}destroy(){this.subscriptions=[]}}class Ya{constructor(e){this.listeners=[],this.holdingKeys=new Set,this.handleKeyDown=t=>{if(!this.clock.checkClockStarted()){console.warn("KeyStream: clock has not started.");return}if(this.holdingKeys.has(t.key)&&t.repeat)return;this.holdingKeys.add(t.key);const n={sampleType:"down",key:t.key,t:this.clock.now()};this.emit(n)},this.handleKeyUp=t=>{if(!this.clock.checkClockStarted()){console.warn("KeyStream: clock has not started.");return}this.holdingKeys.delete(t.key);const n={sampleType:"up",key:t.key,t:this.clock.now()};this.emit(n)},window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",()=>{this.holdingKeys.clear()}),this.clock=e}emit(e){for(const t of this.listeners)t(e)}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}destroy(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),this.listeners=[]}}class Ps{constructor(e){const{width:t,height:n,left:i,top:o}=e.getBoundingClientRect();this.boardWidthPx=t,this.boardHeightPx=n,this.boardLeftPx=i,this.boardTopPx=o}getUnitPx(){return Math.min(this.boardWidthPx,this.boardHeightPx)}getBoardLocationPx(e,t,n,i){const o=this.getUnitPx(),s=this.boardWidthPx/o,a=this.boardHeightPx/o,l=o*(e-n/2+s/2),c=o*(-t-i/2+a/2);return{leftPx:l,topPx:c}}getBoardRectanglePx(e,t){return{widthPx:this.getSizePx(e),heightPx:this.getSizePx(t)}}getSizePx(e){return this.getUnitPx()*e}getBoardLocationFromPointerEvent(e){let t=(e.clientX-this.boardLeftPx)/this.boardWidthPx-.5,n=-((e.clientY-this.boardTopPx)/this.boardHeightPx-.5);const i=10;return t=parseFloat(t.toFixed(i)),n=parseFloat(n.toFixed(i)),{x:t,y:n}}}class Ka{constructor(e,t){this.root=document.createElement("div"),this.root.className="board-view",this.root.style.backgroundColor=e,document.body.style.backgroundColor=e,this.clock=t,this.pointerStream=new Xa(this.root,this.clock),this.keyStream=new Ya(this.clock),this.setBoardState(!1,!1)}getCoordinateSystem(){return new Ps(this.root)}setBoardState(e,t){e?this.root.style.opacity="1":this.root.style.opacity="0",t?(this.root.removeAttribute("disabled"),this.root.style.pointerEvents="",this.root.style.userSelect="",this.root.style.opacity=""):(this.root.setAttribute("disabled","true"),this.root.style.pointerEvents="none",this.root.style.userSelect="none")}}function Hr(r,e){const t=document.createElement("div");t.classList.add("board-region");const{leftPx:n,topPx:i}=e.getBoardLocationPx(r.x,r.y,r.w,r.h),{widthPx:o,heightPx:s}=e.getBoardRectanglePx(r.w,r.h);switch(t.style.left=`${n}px`,t.style.top=`${i}px`,t.style.width=`${o}px`,t.style.height=`${s}px`,r.mask){case"ellipse":t.style.borderRadius="50%";break;case"rectangle":break;default:const a=r.mask;console.warn(`Found unsupported Region.mask ${a}. Region: ${JSON.stringify(r)}`);break}return typeof r.z_index=="number"&&(t.style.zIndex=r.z_index.toString()),t}class Za{constructor(){this.events=[],this.rafId=null,this.t0=0,this.state="OPEN",this.onStopQueue=[],this.loop=e=>{if(this.state!=="RUNNING")return;const t=e-this.t0;for(;this.events.length>0&&this.events[0].triggerTimeMsec<=t;)this.events.shift().triggerFunc();this.events.length>0&&(this.rafId=requestAnimationFrame(this.loop))}}scheduleEvent(e){if(this.state!=="OPEN")throw new Error(`Cannot schedule event; scheduler state is ${this.state}`);const t={triggerTimeMsec:e.triggerTimeMsec,triggerFunc:e.triggerFunc},n=this.events.findIndex(i=>i.triggerTimeMsec>t.triggerTimeMsec);n===-1?this.events.push(t):this.events.splice(n,0,t)}scheduleOnStop(e){if(this.state!=="OPEN")throw new Error(`Cannot schedule onStop callback; scheduler state is ${this.state}`);this.onStopQueue.push(e)}start(){this.state==="OPEN"&&(this.state="RUNNING",this.t0=performance.now(),this.loop(this.t0))}stop(){if(this.state==="RUNNING")for(this.state="CLOSED",this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null);this.onStopQueue.length>0;)this.onStopQueue.shift()()}}class $s{constructor(e,t){this.card=e,this.root=t}onStart(){}onDestroy(){}}class qr extends $s{constructor(e,t){const n=Hr(e.region,t);super(e,n),this.boardCoords=t}setHoverState(e){e?this.root.classList.add("card--hovered"):this.root.classList.remove("card--hovered")}setSelectedState(e){e?this.root.classList.add("card--selected"):this.root.classList.remove("card--selected")}setOpacity(e){this.root.style.opacity=`${Math.min(1,Math.max(0,e))*100}%`}checkPointInCard(e,t){const n=this.card.region;switch(n.mask){case"rectangle":const i=n.x-n.w/2,o=n.x+n.w/2,s=n.y+n.h/2,a=n.y-n.h/2;return e>=i&&e<=o&&t>=a&&t<=s;case"ellipse":const l=n.w/2,c=n.h/2,u=e-n.x,p=t-n.y;return u*u/(l*l)+p*p/(c*c)<=1;default:throw new Error(`Unknown mask: ${n.mask}`)}}}class Qa extends $s{constructor(e,t){const n=document.createElement("div");super(e,n),this.childViews=t;for(let[i,o]of Object.entries(this.childViews))this.root.appendChild(o.root)}async prepare(e){}onStart(){for(let e of Object.values(this.childViews))e.onStart()}onDestroy(){for(let e of Object.values(this.childViews))e.onDestroy()}setHoverState(e){for(const t of Object.values(this.childViews))t.setHoverState(e)}setSelectedState(e){for(const t of Object.values(this.childViews))t.setSelectedState(e)}setOpacity(e){for(const t of Object.values(this.childViews))t.setOpacity(e)}checkPointInCard(e,t){for(const n of Object.values(this.childViews))if(n.checkPointInCard(e,t))return!0;return!1}}class Ja extends qr{async prepare(e){this.imageContainer=document.createElement("div"),this.imageContainer.classList.add("image-card"),this.root.appendChild(this.imageContainer),this.image=await e.getImageElement(this.card.image),this.image.classList.add("image-card__content"),this.image.draggable=!1,this.imageContainer.appendChild(this.image)}}class el extends qr{async prepare(e){this.videoContainer=document.createElement("div"),this.videoContainer.classList.add("video-card"),this.root.appendChild(this.videoContainer),this.video=await e.getVideoElement(this.card.video),this.video.classList.add("video-card__content"),this.videoContainer.appendChild(this.video),this.video.muted=!0,this.video.loop=this.card.loop,this.video.draggable=!0}onStart(){if(!this.video)throw new Error("Video not initialized. Did you forget to call load()?");let e=new Promise((i,o)=>{setTimeout(()=>{o(new Error("Video failed to play within 4 frames!"))},66)}),t=new Promise((i,o)=>{if(!this.video)throw new Error("Video not initialized. Did you forget to call load()?");this.video.onplaying=()=>{i(null)}});this.video.play(),Promise.race([t,e]).catch(i=>{console.error(i)})}onDestroy(){this.video&&(this.video.removeAttribute("src"),this.video.load())}}function jr(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var It=jr();function Ms(r){It=r}var pn={exec:()=>null};function ae(r,e=""){let t=typeof r=="string"?r:r.source;const n={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(Ae.caret,"$1"),t=t.replace(i,s),n},getRegex:()=>new RegExp(t,e)};return n}var Ae={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},tl=/^(?:[ \t]*(?:\n|$))+/,nl=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,rl=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,gn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,il=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Gr=/(?:[*+-]|\d{1,9}[.)])/,Ds=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Bs=ae(Ds).replace(/bull/g,Gr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),sl=ae(Ds).replace(/bull/g,Gr).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Wr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ol=/^[^\n]+/,Xr=/(?!\s*\])(?:\\.|[^\[\]\\])+/,al=ae(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Xr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ll=ae(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Gr).getRegex(),Wn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Yr=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,cl=ae("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Yr).replace("tag",Wn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Us=ae(Wr).replace("hr",gn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wn).getRegex(),ul=ae(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Us).getRegex(),Kr={blockquote:ul,code:nl,def:al,fences:rl,heading:il,hr:gn,html:cl,lheading:Bs,list:ll,newline:tl,paragraph:Us,table:pn,text:ol},zs=ae("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",gn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wn).getRegex(),hl={...Kr,lheading:sl,table:zs,paragraph:ae(Wr).replace("hr",gn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",zs).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wn).getRegex()},dl={...Kr,html:ae(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Yr).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:pn,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ae(Wr).replace("hr",gn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Bs).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},fl=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,pl=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Vs=/^( {2,}|\\)\n(?!\s*$)/,gl=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Xn=/[\p{P}\p{S}]/u,Zr=/[\s\p{P}\p{S}]/u,Fs=/[^\s\p{P}\p{S}]/u,ml=ae(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Zr).getRegex(),Hs=/(?!~)[\p{P}\p{S}]/u,wl=/(?!~)[\s\p{P}\p{S}]/u,bl=/(?:[^\s\p{P}\p{S}]|~)/u,El=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,qs=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,vl=ae(qs,"u").replace(/punct/g,Xn).getRegex(),yl=ae(qs,"u").replace(/punct/g,Hs).getRegex(),js="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",kl=ae(js,"gu").replace(/notPunctSpace/g,Fs).replace(/punctSpace/g,Zr).replace(/punct/g,Xn).getRegex(),Sl=ae(js,"gu").replace(/notPunctSpace/g,bl).replace(/punctSpace/g,wl).replace(/punct/g,Hs).getRegex(),_l=ae("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Fs).replace(/punctSpace/g,Zr).replace(/punct/g,Xn).getRegex(),xl=ae(/\\(punct)/,"gu").replace(/punct/g,Xn).getRegex(),Tl=ae(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Rl=ae(Yr).replace("(?:-->|$)","-->").getRegex(),Al=ae("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Rl).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Yn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Cl=ae(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Yn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Gs=ae(/^!?\[(label)\]\[(ref)\]/).replace("label",Yn).replace("ref",Xr).getRegex(),Ws=ae(/^!?\[(ref)\](?:\[\])?/).replace("ref",Xr).getRegex(),Ol=ae("reflink|nolink(?!\\()","g").replace("reflink",Gs).replace("nolink",Ws).getRegex(),Qr={_backpedal:pn,anyPunctuation:xl,autolink:Tl,blockSkip:El,br:Vs,code:pl,del:pn,emStrongLDelim:vl,emStrongRDelimAst:kl,emStrongRDelimUnd:_l,escape:fl,link:Cl,nolink:Ws,punctuation:ml,reflink:Gs,reflinkSearch:Ol,tag:Al,text:gl,url:pn},Ll={...Qr,link:ae(/^!?\[(label)\]\((.*?)\)/).replace("label",Yn).getRegex(),reflink:ae(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Yn).getRegex()},Jr={...Qr,emStrongRDelimAst:Sl,emStrongLDelim:yl,url:ae(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Il={...Jr,br:ae(Vs).replace("{2,}","*").getRegex(),text:ae(Jr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Kn={normal:Kr,gfm:hl,pedantic:dl},mn={normal:Qr,gfm:Jr,breaks:Il,pedantic:Ll},Nl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xs=r=>Nl[r];function tt(r,e){if(e){if(Ae.escapeTest.test(r))return r.replace(Ae.escapeReplace,Xs)}else if(Ae.escapeTestNoEncode.test(r))return r.replace(Ae.escapeReplaceNoEncode,Xs);return r}function Ys(r){try{r=encodeURI(r).replace(Ae.percentDecode,"%")}catch{return null}return r}function Ks(r,e){const t=r.replace(Ae.findPipe,(o,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),n=t.split(Ae.splitPipe);let i=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(Ae.slashPipe,"|");return n}function wn(r,e,t){const n=r.length;if(n===0)return"";let i=0;for(;i<n&&r.charAt(n-i-1)===e;)i++;return r.slice(0,n-i)}function Pl(r,e){if(r.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<r.length;n++)if(r[n]==="\\")n++;else if(r[n]===e[0])t++;else if(r[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function Zs(r,e,t,n,i){const o=e.href,s=e.title||null,a=r[1].replace(i.other.outputLinkReplace,"$1");n.state.inLink=!0;const l={type:r[0].charAt(0)==="!"?"image":"link",raw:t,href:o,title:s,text:a,tokens:n.inlineTokens(a)};return n.state.inLink=!1,l}function $l(r,e,t){const n=r.match(t.other.indentCodeCompensation);if(n===null)return e;const i=n[1];return e.split(`
`).map(o=>{const s=o.match(t.other.beginningSpace);if(s===null)return o;const[a]=s;return a.length>=i.length?o.slice(i.length):o}).join(`
`)}var Zn=class{options;rules;lexer;constructor(r){this.options=r||It}space(r){const e=this.rules.block.newline.exec(r);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(r){const e=this.rules.block.code.exec(r);if(e){const t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:wn(t,`
`)}}}fences(r){const e=this.rules.block.fences.exec(r);if(e){const t=e[0],n=$l(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(r){const e=this.rules.block.heading.exec(r);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){const n=wn(t,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(t=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(r){const e=this.rules.block.hr.exec(r);if(e)return{type:"hr",raw:wn(e[0],`
`)}}blockquote(r){const e=this.rules.block.blockquote.exec(r);if(e){let t=wn(e[0],`
`).split(`
`),n="",i="";const o=[];for(;t.length>0;){let s=!1;const a=[];let l;for(l=0;l<t.length;l++)if(this.rules.other.blockquoteStart.test(t[l]))a.push(t[l]),s=!0;else if(!s)a.push(t[l]);else break;t=t.slice(l);const c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${c}`:c,i=i?`${i}
${u}`:u;const p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,o,!0),this.lexer.state.top=p,t.length===0)break;const f=o.at(-1);if(f?.type==="code")break;if(f?.type==="blockquote"){const E=f,R=E.raw+`
`+t.join(`
`),w=this.blockquote(R);o[o.length-1]=w,n=n.substring(0,n.length-E.raw.length)+w.raw,i=i.substring(0,i.length-E.text.length)+w.text;break}else if(f?.type==="list"){const E=f,R=E.raw+`
`+t.join(`
`),w=this.list(R);o[o.length-1]=w,n=n.substring(0,n.length-f.raw.length)+w.raw,i=i.substring(0,i.length-E.raw.length)+w.raw,t=R.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:o,text:i}}}list(r){let e=this.rules.block.list.exec(r);if(e){let t=e[1].trim();const n=t.length>1,i={type:"list",raw:"",ordered:n,start:n?+t.slice(0,-1):"",loose:!1,items:[]};t=n?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=n?t:"[*+-]");const o=this.rules.other.listItemRegex(t);let s=!1;for(;r;){let l=!1,c="",u="";if(!(e=o.exec(r))||this.rules.block.hr.test(r))break;c=e[0],r=r.substring(c.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,j=>" ".repeat(3*j.length)),f=r.split(`
`,1)[0],E=!p.trim(),R=0;if(this.options.pedantic?(R=2,u=p.trimStart()):E?R=e[1].length+1:(R=e[2].search(this.rules.other.nonSpaceChar),R=R>4?1:R,u=p.slice(R),R+=e[1].length),E&&this.rules.other.blankLine.test(f)&&(c+=f+`
`,r=r.substring(f.length+1),l=!0),!l){const j=this.rules.other.nextBulletRegex(R),J=this.rules.other.hrRegex(R),Q=this.rules.other.fencesBeginRegex(R),ee=this.rules.other.headingBeginRegex(R),de=this.rules.other.htmlBeginRegex(R);for(;r;){const ne=r.split(`
`,1)[0];let oe;if(f=ne,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),oe=f):oe=f.replace(this.rules.other.tabCharGlobal,"    "),Q.test(f)||ee.test(f)||de.test(f)||j.test(f)||J.test(f))break;if(oe.search(this.rules.other.nonSpaceChar)>=R||!f.trim())u+=`
`+oe.slice(R);else{if(E||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||Q.test(p)||ee.test(p)||J.test(p))break;u+=`
`+f}!E&&!f.trim()&&(E=!0),c+=ne+`
`,r=r.substring(ne.length+1),p=oe.slice(R)}}i.loose||(s?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(s=!0));let w=null,N;this.options.gfm&&(w=this.rules.other.listIsTask.exec(u),w&&(N=w[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!w,checked:N,loose:!1,text:u,tokens:[]}),i.raw+=c}const a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const c=i.items[l].tokens.filter(p=>p.type==="space"),u=c.length>0&&c.some(p=>this.rules.other.anyLine.test(p.raw));i.loose=u}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(r){const e=this.rules.block.html.exec(r);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(r){const e=this.rules.block.def.exec(r);if(e){const t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:i}}}table(r){const e=this.rules.block.table.exec(r);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const t=Ks(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===n.length){for(const s of n)this.rules.other.tableAlignRight.test(s)?o.align.push("right"):this.rules.other.tableAlignCenter.test(s)?o.align.push("center"):this.rules.other.tableAlignLeft.test(s)?o.align.push("left"):o.align.push(null);for(let s=0;s<t.length;s++)o.header.push({text:t[s],tokens:this.lexer.inline(t[s]),header:!0,align:o.align[s]});for(const s of i)o.rows.push(Ks(s,o.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:o.align[l]})));return o}}lheading(r){const e=this.rules.block.lheading.exec(r);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(r){const e=this.rules.block.paragraph.exec(r);if(e){const t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(r){const e=this.rules.block.text.exec(r);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(r){const e=this.rules.inline.escape.exec(r);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(r){const e=this.rules.inline.tag.exec(r);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(r){const e=this.rules.inline.link.exec(r);if(e){const t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;const o=wn(t.slice(0,-1),"\\");if((t.length-o.length)%2===0)return}else{const o=Pl(e[2],"()");if(o===-2)return;if(o>-1){const a=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let n=e[2],i="";if(this.options.pedantic){const o=this.rules.other.pedanticHrefTitle.exec(n);o&&(n=o[1],i=o[3])}else i=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n=n.slice(1):n=n.slice(1,-1)),Zs(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(r,e){let t;if((t=this.rules.inline.reflink.exec(r))||(t=this.rules.inline.nolink.exec(r))){const n=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[n.toLowerCase()];if(!i){const o=t[0].charAt(0);return{type:"text",raw:o,text:o}}return Zs(t,i,t[0],this.lexer,this.rules)}}emStrong(r,e,t=""){let n=this.rules.inline.emStrongLDelim.exec(r);if(!n||n[3]&&t.match(this.rules.other.unicodeAlphaNumeric))return;if(!(n[1]||n[2]||"")||!t||this.rules.inline.punctuation.exec(t)){const o=[...n[0]].length-1;let s,a,l=o,c=0;const u=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*r.length+o);(n=u.exec(e))!=null;){if(s=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!s)continue;if(a=[...s].length,n[3]||n[4]){l+=a;continue}else if((n[5]||n[6])&&o%3&&!((o+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);const p=[...n[0]][0].length,f=r.slice(0,o+n.index+p+a);if(Math.min(o,a)%2){const R=f.slice(1,-1);return{type:"em",raw:f,text:R,tokens:this.lexer.inlineTokens(R)}}const E=f.slice(2,-2);return{type:"strong",raw:f,text:E,tokens:this.lexer.inlineTokens(E)}}}}codespan(r){const e=this.rules.inline.code.exec(r);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," ");const n=this.rules.other.nonSpaceChar.test(t),i=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&i&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(r){const e=this.rules.inline.br.exec(r);if(e)return{type:"br",raw:e[0]}}del(r){const e=this.rules.inline.del.exec(r);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(r){const e=this.rules.inline.autolink.exec(r);if(e){let t,n;return e[2]==="@"?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(r){let e;if(e=this.rules.inline.url.exec(r)){let t,n;if(e[2]==="@")t=e[0],n="mailto:"+t;else{let i;do i=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(i!==e[0]);t=e[0],e[1]==="www."?n="http://"+e[0]:n=e[0]}return{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(r){const e=this.rules.inline.text.exec(r);if(e){const t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},ut=class ds{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||It,this.options.tokenizer=this.options.tokenizer||new Zn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:Ae,block:Kn.normal,inline:mn.normal};this.options.pedantic?(t.block=Kn.pedantic,t.inline=mn.pedantic):this.options.gfm&&(t.block=Kn.gfm,this.options.breaks?t.inline=mn.breaks:t.inline=mn.gfm),this.tokenizer.rules=t}static get rules(){return{block:Kn,inline:mn}}static lex(e,t){return new ds(t).lex(e)}static lexInline(e,t){return new ds(t).inlineTokens(e)}lex(e){e=e.replace(Ae.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){for(this.options.pedantic&&(e=e.replace(Ae.tabCharGlobal,"    ").replace(Ae.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some(s=>(i=s.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);const s=t.at(-1);i.raw.length===1&&s!==void 0?s.raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);const s=t.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.at(-1).src=s.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);const s=t.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}let o=e;if(this.options.extensions?.startBlock){let s=1/0;const a=e.slice(1);let l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(s=Math.min(s,l))}),s<1/0&&s>=0&&(o=e.substring(0,s+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){const s=t.at(-1);n&&s?.type==="paragraph"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(i),n=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);const s=t.at(-1);s?.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(i);continue}if(e){const s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n=e,i=null;if(this.tokens.links){const a=Object.keys(this.tokens.links);if(a.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)a.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,i.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,s="";for(;e;){o||(s=""),o=!1;let a;if(this.options.extensions?.inline?.some(c=>(a=c.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);const c=t.at(-1);a.type==="text"&&c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):t.push(a);continue}if(a=this.tokenizer.emStrong(e,n,s)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),t.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),t.push(a);continue}let l=e;if(this.options.extensions?.startInline){let c=1/0;const u=e.slice(1);let p;this.options.extensions.startInline.forEach(f=>{p=f.call({lexer:this},u),typeof p=="number"&&p>=0&&(c=Math.min(c,p))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(a=this.tokenizer.inlineText(l)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(s=a.raw.slice(-1)),o=!0;const c=t.at(-1);c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):t.push(a);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return t}},Qn=class{options;parser;constructor(r){this.options=r||It}space(r){return""}code({text:r,lang:e,escaped:t}){const n=(e||"").match(Ae.notSpaceStart)?.[0],i=r.replace(Ae.endingNewline,"")+`
`;return n?'<pre><code class="language-'+tt(n)+'">'+(t?i:tt(i,!0))+`</code></pre>
`:"<pre><code>"+(t?i:tt(i,!0))+`</code></pre>
`}blockquote({tokens:r}){return`<blockquote>
${this.parser.parse(r)}</blockquote>
`}html({text:r}){return r}heading({tokens:r,depth:e}){return`<h${e}>${this.parser.parseInline(r)}</h${e}>
`}hr(r){return`<hr>
`}list(r){const e=r.ordered,t=r.start;let n="";for(let s=0;s<r.items.length;s++){const a=r.items[s];n+=this.listitem(a)}const i=e?"ol":"ul",o=e&&t!==1?' start="'+t+'"':"";return"<"+i+o+`>
`+n+"</"+i+`>
`}listitem(r){let e="";if(r.task){const t=this.checkbox({checked:!!r.checked});r.loose?r.tokens[0]?.type==="paragraph"?(r.tokens[0].text=t+" "+r.tokens[0].text,r.tokens[0].tokens&&r.tokens[0].tokens.length>0&&r.tokens[0].tokens[0].type==="text"&&(r.tokens[0].tokens[0].text=t+" "+tt(r.tokens[0].tokens[0].text),r.tokens[0].tokens[0].escaped=!0)):r.tokens.unshift({type:"text",raw:t+" ",text:t+" ",escaped:!0}):e+=t+" "}return e+=this.parser.parse(r.tokens,!!r.loose),`<li>${e}</li>
`}checkbox({checked:r}){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>
`}table(r){let e="",t="";for(let i=0;i<r.header.length;i++)t+=this.tablecell(r.header[i]);e+=this.tablerow({text:t});let n="";for(let i=0;i<r.rows.length;i++){const o=r.rows[i];t="";for(let s=0;s<o.length;s++)t+=this.tablecell(o[s]);n+=this.tablerow({text:t})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:r}){return`<tr>
${r}</tr>
`}tablecell(r){const e=this.parser.parseInline(r.tokens),t=r.header?"th":"td";return(r.align?`<${t} align="${r.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:r}){return`<strong>${this.parser.parseInline(r)}</strong>`}em({tokens:r}){return`<em>${this.parser.parseInline(r)}</em>`}codespan({text:r}){return`<code>${tt(r,!0)}</code>`}br(r){return"<br>"}del({tokens:r}){return`<del>${this.parser.parseInline(r)}</del>`}link({href:r,title:e,tokens:t}){const n=this.parser.parseInline(t),i=Ys(r);if(i===null)return n;r=i;let o='<a href="'+r+'"';return e&&(o+=' title="'+tt(e)+'"'),o+=">"+n+"</a>",o}image({href:r,title:e,text:t,tokens:n}){n&&(t=this.parser.parseInline(n,this.parser.textRenderer));const i=Ys(r);if(i===null)return tt(t);r=i;let o=`<img src="${r}" alt="${t}"`;return e&&(o+=` title="${tt(e)}"`),o+=">",o}text(r){return"tokens"in r&&r.tokens?this.parser.parseInline(r.tokens):"escaped"in r&&r.escaped?r.text:tt(r.text)}},ei=class{strong({text:r}){return r}em({text:r}){return r}codespan({text:r}){return r}del({text:r}){return r}html({text:r}){return r}text({text:r}){return r}link({text:r}){return""+r}image({text:r}){return""+r}br(){return""}},ht=class fs{options;renderer;textRenderer;constructor(e){this.options=e||It,this.options.renderer=this.options.renderer||new Qn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ei}static parse(e,t){return new fs(t).parse(e)}static parseInline(e,t){return new fs(t).parseInline(e)}parse(e,t=!0){let n="";for(let i=0;i<e.length;i++){const o=e[i];if(this.options.extensions?.renderers?.[o.type]){const a=o,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){n+=l||"";continue}}const s=o;switch(s.type){case"space":{n+=this.renderer.space(s);continue}case"hr":{n+=this.renderer.hr(s);continue}case"heading":{n+=this.renderer.heading(s);continue}case"code":{n+=this.renderer.code(s);continue}case"table":{n+=this.renderer.table(s);continue}case"blockquote":{n+=this.renderer.blockquote(s);continue}case"list":{n+=this.renderer.list(s);continue}case"html":{n+=this.renderer.html(s);continue}case"paragraph":{n+=this.renderer.paragraph(s);continue}case"text":{let a=s,l=this.renderer.text(a);for(;i+1<e.length&&e[i+1].type==="text";)a=e[++i],l+=`
`+this.renderer.text(a);t?n+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):n+=l;continue}default:{const a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}parseInline(e,t=this.renderer){let n="";for(let i=0;i<e.length;i++){const o=e[i];if(this.options.extensions?.renderers?.[o.type]){const a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=a||"";continue}}const s=o;switch(s.type){case"escape":{n+=t.text(s);break}case"html":{n+=t.html(s);break}case"link":{n+=t.link(s);break}case"image":{n+=t.image(s);break}case"strong":{n+=t.strong(s);break}case"em":{n+=t.em(s);break}case"codespan":{n+=t.codespan(s);break}case"br":{n+=t.br(s);break}case"del":{n+=t.del(s);break}case"text":{n+=t.text(s);break}default:{const a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}},Jn=class{options;block;constructor(r){this.options=r||It}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(r){return r}postprocess(r){return r}processAllTokens(r){return r}provideLexer(){return this.block?ut.lex:ut.lexInline}provideParser(){return this.block?ht.parse:ht.parseInline}},Ml=class{defaults=jr();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ht;Renderer=Qn;TextRenderer=ei;Lexer=ut;Tokenizer=Zn;Hooks=Jn;constructor(...r){this.use(...r)}walkTokens(r,e){let t=[];for(const n of r)switch(t=t.concat(e.call(this,n)),n.type){case"table":{const i=n;for(const o of i.header)t=t.concat(this.walkTokens(o.tokens,e));for(const o of i.rows)for(const s of o)t=t.concat(this.walkTokens(s.tokens,e));break}case"list":{const i=n;t=t.concat(this.walkTokens(i.items,e));break}default:{const i=n;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(o=>{const s=i[o].flat(1/0);t=t.concat(this.walkTokens(s,e))}):i.tokens&&(t=t.concat(this.walkTokens(i.tokens,e)))}}return t}use(...r){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(t=>{const n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const o=e.renderers[i.name];o?e.renderers[i.name]=function(...s){let a=i.renderer.apply(this,s);return a===!1&&(a=o.apply(this,s)),a}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=e[i.level];o?o.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),n.extensions=e),t.renderer){const i=this.defaults.renderer||new Qn(this.defaults);for(const o in t.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const s=o,a=t.renderer[s],l=i[s];i[s]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u||""}}n.renderer=i}if(t.tokenizer){const i=this.defaults.tokenizer||new Zn(this.defaults);for(const o in t.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const s=o,a=t.tokenizer[s],l=i[s];i[s]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}n.tokenizer=i}if(t.hooks){const i=this.defaults.hooks||new Jn;for(const o in t.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;const s=o,a=t.hooks[s],l=i[s];Jn.passThroughHooks.has(o)?i[s]=c=>{if(this.defaults.async)return Promise.resolve(a.call(i,c)).then(p=>l.call(i,p));const u=a.call(i,c);return l.call(i,u)}:i[s]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}n.hooks=i}if(t.walkTokens){const i=this.defaults.walkTokens,o=t.walkTokens;n.walkTokens=function(s){let a=[];return a.push(o.call(this,s)),i&&(a=a.concat(i.call(this,s))),a}}this.defaults={...this.defaults,...n}}),this}setOptions(r){return this.defaults={...this.defaults,...r},this}lexer(r,e){return ut.lex(r,e??this.defaults)}parser(r,e){return ht.parse(r,e??this.defaults)}parseMarkdown(r){return(t,n)=>{const i={...n},o={...this.defaults,...i},s=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=r);const a=o.hooks?o.hooks.provideLexer():r?ut.lex:ut.lexInline,l=o.hooks?o.hooks.provideParser():r?ht.parse:ht.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(c=>a(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>l(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(s);try{o.hooks&&(t=o.hooks.preprocess(t));let c=a(t,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let u=l(c,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(c){return s(c)}}}onError(r,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r){const n="<p>An error occurred:</p><pre>"+tt(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}}},Nt=new Ml;function le(r,e){return Nt.parse(r,e)}le.options=le.setOptions=function(r){return Nt.setOptions(r),le.defaults=Nt.defaults,Ms(le.defaults),le},le.getDefaults=jr,le.defaults=It,le.use=function(...r){return Nt.use(...r),le.defaults=Nt.defaults,Ms(le.defaults),le},le.walkTokens=function(r,e){return Nt.walkTokens(r,e)},le.parseInline=Nt.parseInline,le.Parser=ht,le.parser=ht.parse,le.Renderer=Qn,le.TextRenderer=ei,le.Lexer=ut,le.lexer=ut.lex,le.Tokenizer=Zn,le.Hooks=Jn,le.parse=le,le.options,le.setOptions,le.use,le.walkTokens,le.parseInline,ht.parse,ut.lex;/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Qs,setPrototypeOf:Js,isFrozen:Dl,getPrototypeOf:Bl,getOwnPropertyDescriptor:Ul}=Object;let{freeze:Ce,seal:He,create:eo}=Object,{apply:ti,construct:ni}=typeof Reflect<"u"&&Reflect;Ce||(Ce=function(e){return e}),He||(He=function(e){return e}),ti||(ti=function(e,t,n){return e.apply(t,n)}),ni||(ni=function(e,t){return new e(...t)});const er=Le(Array.prototype.forEach),zl=Le(Array.prototype.lastIndexOf),to=Le(Array.prototype.pop),bn=Le(Array.prototype.push),Vl=Le(Array.prototype.splice),tr=Le(String.prototype.toLowerCase),ri=Le(String.prototype.toString),no=Le(String.prototype.match),En=Le(String.prototype.replace),Fl=Le(String.prototype.indexOf),Hl=Le(String.prototype.trim),We=Le(Object.prototype.hasOwnProperty),Oe=Le(RegExp.prototype.test),vn=ql(TypeError);function Le(r){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ti(r,e,n)}}function ql(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ni(r,t)}}function ie(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tr;Js&&Js(r,null);let n=e.length;for(;n--;){let i=e[n];if(typeof i=="string"){const o=t(i);o!==i&&(Dl(e)||(e[n]=o),i=o)}r[i]=!0}return r}function jl(r){for(let e=0;e<r.length;e++)We(r,e)||(r[e]=null);return r}function dt(r){const e=eo(null);for(const[t,n]of Qs(r))We(r,t)&&(Array.isArray(n)?e[t]=jl(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=dt(n):e[t]=n);return e}function yn(r,e){for(;r!==null;){const n=Ul(r,e);if(n){if(n.get)return Le(n.get);if(typeof n.value=="function")return Le(n.value)}r=Bl(r)}function t(){return null}return t}const ro=Ce(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ii=Ce(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),si=Ce(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Gl=Ce(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),oi=Ce(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Wl=Ce(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),io=Ce(["#text"]),so=Ce(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ai=Ce(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),oo=Ce(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),nr=Ce(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Xl=He(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Yl=He(/<%[\w\W]*|[\w\W]*%>/gm),Kl=He(/\$\{[\w\W]*/gm),Zl=He(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ql=He(/^aria-[\-\w]+$/),ao=He(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Jl=He(/^(?:\w+script|data):/i),ec=He(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),lo=He(/^html$/i),tc=He(/^[a-z][.\w]*(-[.\w]+)+$/i);var co=Object.freeze({__proto__:null,ARIA_ATTR:Ql,ATTR_WHITESPACE:ec,CUSTOM_ELEMENT:tc,DATA_ATTR:Zl,DOCTYPE_NAME:lo,ERB_EXPR:Yl,IS_ALLOWED_URI:ao,IS_SCRIPT_OR_DATA:Jl,MUSTACHE_EXPR:Xl,TMPLIT_EXPR:Kl});const kn={element:1,text:3,progressingInstruction:7,comment:8,document:9},nc=function(){return typeof window>"u"?null:window},rc=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},uo=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ho(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nc();const e=D=>ho(D);if(e.version="3.2.6",e.removed=[],!r||!r.document||r.document.nodeType!==kn.document||!r.Element)return e.isSupported=!1,e;let{document:t}=r;const n=t,i=n.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:p,DOMParser:f,trustedTypes:E}=r,R=l.prototype,w=yn(R,"cloneNode"),N=yn(R,"remove"),j=yn(R,"nextSibling"),J=yn(R,"childNodes"),Q=yn(R,"parentNode");if(typeof s=="function"){const D=t.createElement("template");D.content&&D.content.ownerDocument&&(t=D.content.ownerDocument)}let ee,de="";const{implementation:ne,createNodeIterator:oe,createDocumentFragment:F,getElementsByTagName:qe}=t,{importNode:nt}=n;let Ee=uo();e.isSupported=typeof Qs=="function"&&typeof Q=="function"&&ne&&ne.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:pt,ERB_EXPR:gt,TMPLIT_EXPR:A,DATA_ATTR:T,ARIA_ATTR:z,IS_SCRIPT_OR_DATA:P,ATTR_WHITESPACE:M,CUSTOM_ELEMENT:$}=co;let{IS_ALLOWED_URI:q}=co,V=null;const K=ie({},[...ro,...ii,...si,...oi,...io]);let W=null;const ke=ie({},[...so,...ai,...oo,...nr]);let Y=Object.seal(eo(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Me=null,xn=null,ur=!0,hr=!0,Pt=!1,dr=!0,St=!1,Yt=!0,mt=!1,Tn=!1,Rn=!1,_t=!1,Kt=!1,Zt=!1,An=!0,fr=!1;const as="user-content-";let Qt=!0,De=!1,wt={},Be=null;const $t=ie({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Cn=null;const pr=ie({},["audio","video","img","source","image","track"]);let On=null;const gr=ie({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Jt="http://www.w3.org/1998/Math/MathML",en="http://www.w3.org/2000/svg",je="http://www.w3.org/1999/xhtml";let xt=je,Ln=!1,In=null;const Nn=ie({},[Jt,en,je],ri);let Mt=ie({},["mi","mo","mn","ms","mtext"]),Dt=ie({},["annotation-xml"]);const ls=ie({},["title","style","font","a","script"]);let Tt=null;const Rt=["application/xhtml+xml","text/html"],h="text/html";let g=null,x=null;const G=t.createElement("form"),be=function(d){return d instanceof RegExp||d instanceof Function},we=function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(x&&x===d)){if((!d||typeof d!="object")&&(d={}),d=dt(d),Tt=Rt.indexOf(d.PARSER_MEDIA_TYPE)===-1?h:d.PARSER_MEDIA_TYPE,g=Tt==="application/xhtml+xml"?ri:tr,V=We(d,"ALLOWED_TAGS")?ie({},d.ALLOWED_TAGS,g):K,W=We(d,"ALLOWED_ATTR")?ie({},d.ALLOWED_ATTR,g):ke,In=We(d,"ALLOWED_NAMESPACES")?ie({},d.ALLOWED_NAMESPACES,ri):Nn,On=We(d,"ADD_URI_SAFE_ATTR")?ie(dt(gr),d.ADD_URI_SAFE_ATTR,g):gr,Cn=We(d,"ADD_DATA_URI_TAGS")?ie(dt(pr),d.ADD_DATA_URI_TAGS,g):pr,Be=We(d,"FORBID_CONTENTS")?ie({},d.FORBID_CONTENTS,g):$t,Me=We(d,"FORBID_TAGS")?ie({},d.FORBID_TAGS,g):dt({}),xn=We(d,"FORBID_ATTR")?ie({},d.FORBID_ATTR,g):dt({}),wt=We(d,"USE_PROFILES")?d.USE_PROFILES:!1,ur=d.ALLOW_ARIA_ATTR!==!1,hr=d.ALLOW_DATA_ATTR!==!1,Pt=d.ALLOW_UNKNOWN_PROTOCOLS||!1,dr=d.ALLOW_SELF_CLOSE_IN_ATTR!==!1,St=d.SAFE_FOR_TEMPLATES||!1,Yt=d.SAFE_FOR_XML!==!1,mt=d.WHOLE_DOCUMENT||!1,_t=d.RETURN_DOM||!1,Kt=d.RETURN_DOM_FRAGMENT||!1,Zt=d.RETURN_TRUSTED_TYPE||!1,Rn=d.FORCE_BODY||!1,An=d.SANITIZE_DOM!==!1,fr=d.SANITIZE_NAMED_PROPS||!1,Qt=d.KEEP_CONTENT!==!1,De=d.IN_PLACE||!1,q=d.ALLOWED_URI_REGEXP||ao,xt=d.NAMESPACE||je,Mt=d.MATHML_TEXT_INTEGRATION_POINTS||Mt,Dt=d.HTML_INTEGRATION_POINTS||Dt,Y=d.CUSTOM_ELEMENT_HANDLING||{},d.CUSTOM_ELEMENT_HANDLING&&be(d.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Y.tagNameCheck=d.CUSTOM_ELEMENT_HANDLING.tagNameCheck),d.CUSTOM_ELEMENT_HANDLING&&be(d.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Y.attributeNameCheck=d.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),d.CUSTOM_ELEMENT_HANDLING&&typeof d.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Y.allowCustomizedBuiltInElements=d.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),St&&(hr=!1),Kt&&(_t=!0),wt&&(V=ie({},io),W=[],wt.html===!0&&(ie(V,ro),ie(W,so)),wt.svg===!0&&(ie(V,ii),ie(W,ai),ie(W,nr)),wt.svgFilters===!0&&(ie(V,si),ie(W,ai),ie(W,nr)),wt.mathMl===!0&&(ie(V,oi),ie(W,oo),ie(W,nr))),d.ADD_TAGS&&(V===K&&(V=dt(V)),ie(V,d.ADD_TAGS,g)),d.ADD_ATTR&&(W===ke&&(W=dt(W)),ie(W,d.ADD_ATTR,g)),d.ADD_URI_SAFE_ATTR&&ie(On,d.ADD_URI_SAFE_ATTR,g),d.FORBID_CONTENTS&&(Be===$t&&(Be=dt(Be)),ie(Be,d.FORBID_CONTENTS,g)),Qt&&(V["#text"]=!0),mt&&ie(V,["html","head","body"]),V.table&&(ie(V,["tbody"]),delete Me.tbody),d.TRUSTED_TYPES_POLICY){if(typeof d.TRUSTED_TYPES_POLICY.createHTML!="function")throw vn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof d.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw vn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ee=d.TRUSTED_TYPES_POLICY,de=ee.createHTML("")}else ee===void 0&&(ee=rc(E,i)),ee!==null&&typeof de=="string"&&(de=ee.createHTML(""));Ce&&Ce(d),x=d}},I=ie({},[...ii,...si,...Gl]),L=ie({},[...oi,...Wl]),H=function(d){let _=Q(d);(!_||!_.tagName)&&(_={namespaceURI:xt,tagName:"template"});const O=tr(d.tagName),pe=tr(_.tagName);return In[d.namespaceURI]?d.namespaceURI===en?_.namespaceURI===je?O==="svg":_.namespaceURI===Jt?O==="svg"&&(pe==="annotation-xml"||Mt[pe]):!!I[O]:d.namespaceURI===Jt?_.namespaceURI===je?O==="math":_.namespaceURI===en?O==="math"&&Dt[pe]:!!L[O]:d.namespaceURI===je?_.namespaceURI===en&&!Dt[pe]||_.namespaceURI===Jt&&!Mt[pe]?!1:!L[O]&&(ls[O]||!I[O]):!!(Tt==="application/xhtml+xml"&&In[d.namespaceURI]):!1},ce=function(d){bn(e.removed,{element:d});try{Q(d).removeChild(d)}catch{N(d)}},fe=function(d,_){try{bn(e.removed,{attribute:_.getAttributeNode(d),from:_})}catch{bn(e.removed,{attribute:null,from:_})}if(_.removeAttribute(d),d==="is")if(_t||Kt)try{ce(_)}catch{}else try{_.setAttribute(d,"")}catch{}},At=function(d){let _=null,O=null;if(Rn)d="<remove></remove>"+d;else{const ve=no(d,/^[\r\n\t ]+/);O=ve&&ve[0]}Tt==="application/xhtml+xml"&&xt===je&&(d='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+d+"</body></html>");const pe=ee?ee.createHTML(d):d;if(xt===je)try{_=new f().parseFromString(pe,Tt)}catch{}if(!_||!_.documentElement){_=ne.createDocument(xt,"template",null);try{_.documentElement.innerHTML=Ln?de:pe}catch{}}const Se=_.body||_.documentElement;return d&&O&&Se.insertBefore(t.createTextNode(O),Se.childNodes[0]||null),xt===je?qe.call(_,mt?"html":"body")[0]:mt?_.documentElement:Se},tn=function(d){return oe.call(d.ownerDocument||d,d,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Bt=function(d){return d instanceof p&&(typeof d.nodeName!="string"||typeof d.textContent!="string"||typeof d.removeChild!="function"||!(d.attributes instanceof u)||typeof d.removeAttribute!="function"||typeof d.setAttribute!="function"||typeof d.namespaceURI!="string"||typeof d.insertBefore!="function"||typeof d.hasChildNodes!="function")},mr=function(d){return typeof a=="function"&&d instanceof a};function Ue(D,d,_){er(D,O=>{O.call(e,d,_,x)})}const wr=function(d){let _=null;if(Ue(Ee.beforeSanitizeElements,d,null),Bt(d))return ce(d),!0;const O=g(d.nodeName);if(Ue(Ee.uponSanitizeElement,d,{tagName:O,allowedTags:V}),Yt&&d.hasChildNodes()&&!mr(d.firstElementChild)&&Oe(/<[/\w!]/g,d.innerHTML)&&Oe(/<[/\w!]/g,d.textContent)||d.nodeType===kn.progressingInstruction||Yt&&d.nodeType===kn.comment&&Oe(/<[/\w]/g,d.data))return ce(d),!0;if(!V[O]||Me[O]){if(!Me[O]&&Er(O)&&(Y.tagNameCheck instanceof RegExp&&Oe(Y.tagNameCheck,O)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(O)))return!1;if(Qt&&!Be[O]){const pe=Q(d)||d.parentNode,Se=J(d)||d.childNodes;if(Se&&pe){const ve=Se.length;for(let Te=ve-1;Te>=0;--Te){const Ke=w(Se[Te],!0);Ke.__removalCount=(d.__removalCount||0)+1,pe.insertBefore(Ke,j(d))}}}return ce(d),!0}return d instanceof l&&!H(d)||(O==="noscript"||O==="noembed"||O==="noframes")&&Oe(/<\/no(script|embed|frames)/i,d.innerHTML)?(ce(d),!0):(St&&d.nodeType===kn.text&&(_=d.textContent,er([pt,gt,A],pe=>{_=En(_,pe," ")}),d.textContent!==_&&(bn(e.removed,{element:d.cloneNode()}),d.textContent=_)),Ue(Ee.afterSanitizeElements,d,null),!1)},br=function(d,_,O){if(An&&(_==="id"||_==="name")&&(O in t||O in G))return!1;if(!(hr&&!xn[_]&&Oe(T,_))){if(!(ur&&Oe(z,_))){if(!W[_]||xn[_]){if(!(Er(d)&&(Y.tagNameCheck instanceof RegExp&&Oe(Y.tagNameCheck,d)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(d))&&(Y.attributeNameCheck instanceof RegExp&&Oe(Y.attributeNameCheck,_)||Y.attributeNameCheck instanceof Function&&Y.attributeNameCheck(_))||_==="is"&&Y.allowCustomizedBuiltInElements&&(Y.tagNameCheck instanceof RegExp&&Oe(Y.tagNameCheck,O)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(O))))return!1}else if(!On[_]){if(!Oe(q,En(O,M,""))){if(!((_==="src"||_==="xlink:href"||_==="href")&&d!=="script"&&Fl(O,"data:")===0&&Cn[d])){if(!(Pt&&!Oe(P,En(O,M,"")))){if(O)return!1}}}}}}return!0},Er=function(d){return d!=="annotation-xml"&&no(d,$)},Pn=function(d){Ue(Ee.beforeSanitizeAttributes,d,null);const{attributes:_}=d;if(!_||Bt(d))return;const O={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W,forceKeepAttr:void 0};let pe=_.length;for(;pe--;){const Se=_[pe],{name:ve,namespaceURI:Te,value:Ke}=Se,rt=g(ve),$n=Ke;let k=ve==="value"?$n:Hl($n);if(O.attrName=rt,O.attrValue=k,O.keepAttr=!0,O.forceKeepAttr=void 0,Ue(Ee.uponSanitizeAttribute,d,O),k=O.attrValue,fr&&(rt==="id"||rt==="name")&&(fe(ve,d),k=as+k),Yt&&Oe(/((--!?|])>)|<\/(style|title)/i,k)){fe(ve,d);continue}if(O.forceKeepAttr)continue;if(!O.keepAttr){fe(ve,d);continue}if(!dr&&Oe(/\/>/i,k)){fe(ve,d);continue}St&&er([pt,gt,A],re=>{k=En(k,re," ")});const B=g(d.nodeName);if(!br(B,rt,k)){fe(ve,d);continue}if(ee&&typeof E=="object"&&typeof E.getAttributeType=="function"&&!Te)switch(E.getAttributeType(B,rt)){case"TrustedHTML":{k=ee.createHTML(k);break}case"TrustedScriptURL":{k=ee.createScriptURL(k);break}}if(k!==$n)try{Te?d.setAttributeNS(Te,ve,k):d.setAttribute(ve,k),Bt(d)?ce(d):to(e.removed)}catch{fe(ve,d)}}Ue(Ee.afterSanitizeAttributes,d,null)},nn=function D(d){let _=null;const O=tn(d);for(Ue(Ee.beforeSanitizeShadowDOM,d,null);_=O.nextNode();)Ue(Ee.uponSanitizeShadowNode,_,null),wr(_),Pn(_),_.content instanceof o&&D(_.content);Ue(Ee.afterSanitizeShadowDOM,d,null)};return e.sanitize=function(D){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=null,O=null,pe=null,Se=null;if(Ln=!D,Ln&&(D="<!-->"),typeof D!="string"&&!mr(D))if(typeof D.toString=="function"){if(D=D.toString(),typeof D!="string")throw vn("dirty is not a string, aborting")}else throw vn("toString is not a function");if(!e.isSupported)return D;if(Tn||we(d),e.removed=[],typeof D=="string"&&(De=!1),De){if(D.nodeName){const Ke=g(D.nodeName);if(!V[Ke]||Me[Ke])throw vn("root node is forbidden and cannot be sanitized in-place")}}else if(D instanceof a)_=At("<!---->"),O=_.ownerDocument.importNode(D,!0),O.nodeType===kn.element&&O.nodeName==="BODY"||O.nodeName==="HTML"?_=O:_.appendChild(O);else{if(!_t&&!St&&!mt&&D.indexOf("<")===-1)return ee&&Zt?ee.createHTML(D):D;if(_=At(D),!_)return _t?null:Zt?de:""}_&&Rn&&ce(_.firstChild);const ve=tn(De?D:_);for(;pe=ve.nextNode();)wr(pe),Pn(pe),pe.content instanceof o&&nn(pe.content);if(De)return D;if(_t){if(Kt)for(Se=F.call(_.ownerDocument);_.firstChild;)Se.appendChild(_.firstChild);else Se=_;return(W.shadowroot||W.shadowrootmode)&&(Se=nt.call(n,Se,!0)),Se}let Te=mt?_.outerHTML:_.innerHTML;return mt&&V["!doctype"]&&_.ownerDocument&&_.ownerDocument.doctype&&_.ownerDocument.doctype.name&&Oe(lo,_.ownerDocument.doctype.name)&&(Te="<!DOCTYPE "+_.ownerDocument.doctype.name+`>
`+Te),St&&er([pt,gt,A],Ke=>{Te=En(Te,Ke," ")}),ee&&Zt?ee.createHTML(Te):Te},e.setConfig=function(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};we(D),Tn=!0},e.clearConfig=function(){x=null,Tn=!1},e.isValidAttribute=function(D,d,_){x||we({});const O=g(D),pe=g(d);return br(O,pe,_)},e.addHook=function(D,d){typeof d=="function"&&bn(Ee[D],d)},e.removeHook=function(D,d){if(d!==void 0){const _=zl(Ee[D],d);return _===-1?void 0:Vl(Ee[D],_,1)[0]}return to(Ee[D])},e.removeHooks=function(D){Ee[D]=[]},e.removeAllHooks=function(){Ee=uo()},e}var fo=ho();function ic(r,e){const t=document.createElement("div");switch(t.classList.add("text-content"),t.style.color=r.textColor,t.style.textAlign=r.justificationHorizontal,r.justificationVertical){case"top":t.style.justifyContent="flex-start";break;case"center":t.style.justifyContent="center";break;case"bottom":t.style.justifyContent="flex-end";break;default:throw new Error(`Unknown vertical justification: ${r.justificationVertical}`)}t.style.fontSize=e(r.fontSize);let n=le.parse(r.text);return n instanceof Promise?n.then(i=>{t.innerHTML=fo.sanitize(i)}):t.innerHTML=fo.sanitize(n),t}function sc(r,e,t){switch(t.mask){case"rectangle":const n=t.x-t.w/2,i=t.x+t.w/2,o=t.y+t.h/2,s=t.y-t.h/2;return r>=n&&r<=i&&e>=s&&e<=o;case"ellipse":const a=t.w/2,l=t.h/2,c=r-t.x,u=e-t.y;return c*c/(a*a)+u*u/(l*l)<=1;default:throw new Error(`Unknown mask: ${t.mask}`)}}class oc{constructor(){this.alreadyCalled=!1,this.promise=new Promise(e=>{this.resolveFunc=e})}resolve(e){if(this.alreadyCalled){console.warn("Warning: DeferredValue.resolve called multiple times; ignoring subsequent calls.",e);return}this.alreadyCalled=!0,this.resolveFunc(e)}}class ac extends qr{async prepare(){this.textContainer=document.createElement("div"),this.textContainer.classList.add("text-card"),this.root.style.borderRadius="8px",this.root.appendChild(this.textContainer),this.textContainer.style.backgroundColor=this.card.background_color;const e={text:this.card.text,textColor:this.card.text_color,fontSize:this.card.font_size,justificationHorizontal:this.card.justification_horizontal,justificationVertical:this.card.justification_vertical},t=ic(e,n=>this.boardCoords.getSizePx(n)+"px");this.textContainer.appendChild(t)}}async function Sn(r,e,t){const n=e.getCoordinateSystem();let i=null;switch(r.card_type){case"ImageCard":i=new Ja(r,n);break;case"VideoCard":i=new el(r,n);break;case"TextCard":i=new ac(r,n);break;case"CompositeCard":const o=Object.entries(r.children).map(async([c,u])=>{const p=await Sn(u,e,t);return[c,p]}),s=await Promise.all(o),a=Object.fromEntries(s);i=new Qa(r,a);break;default:const l=r;throw new Error(`Unsupported Card type: ${JSON.stringify(l)}`)}return e.root.appendChild(i.root),await i.prepare(t),i}class ft{constructor(e,t,n){this.subscriptions=[],this.params={sensor:e,boardView:t,assetManager:n}}async prepare(){}start(){}emit(e){this.subscriptions.forEach(t=>t(e))}subscribe(e){this.subscriptions.push(e)}}class lc extends ft{async prepare(){const e=new cc(this.params.sensor,this.params.boardView.getCoordinateSystem());this.params.boardView.root.appendChild(e.root);const t=n=>{const i={t:this.params.boardView.clock.now(),action_type:"SliderAction",bin_index:n.binIndex};this.emit(i)};e.subscribeToSlider(t)}}class cc{constructor(e,t){this.pendingThumbPosition=null,this.rafId=null,this.frameRequested=!1,this.currentBinIndex=null,this.subscribers=new Set,this.isDraggingThumb=!1,this.onPointerDownThumb=n=>{n.preventDefault(),this.isDraggingThumb=!0,this.setThumbVisualState("dragging"),n.target.setPointerCapture(n.pointerId)},this.onPointerUpDocument=n=>{if(this.isDraggingThumb){n.preventDefault(),this.isDraggingThumb=!1;const i=this.calculateNearestBin(n);this.currentBinIndex=i,this.scheduleThumbMove(i),this.setThumbVisualState("committed"),n.target.releasePointerCapture(n.pointerId),this.emitSliderValue()}},this.onPointerMoveDocument=n=>{if(!this.isDraggingThumb)return;n.preventDefault();const i=this.calculateNearestBin(n);this.currentBinIndex=i,this.scheduleThumbMove(i)},this.onClickTrack=n=>{n.preventDefault();const i=this.calculateNearestBin(n);this.currentBinIndex=i,this.scheduleThumbMove(i),this.isDraggingThumb?(this.isDraggingThumb=!1,n.target.releasePointerCapture(n.pointerId),this.setThumbVisualState("committed")):(this.isDraggingThumb=!0,this.setThumbVisualState("dragging"),n.target.setPointerCapture(n.pointerId))},this.root=Hr(e.region,t),this.boardCoords=t,this.sensor=e,this.sliderContainer=document.createElement("div"),this.sliderContainer.classList.add("slider-card"),this.sliderTrack=document.createElement("div"),this.sliderTrack.classList.add("slider-card__track"),this.sliderContainer.appendChild(this.sliderTrack),this.sliderThumb=document.createElement("div"),this.sliderThumb.classList.add("slider-card__thumb"),this.sliderContainer.appendChild(this.sliderThumb),e.orientation==="horizontal"?(this.sliderTrack.classList.add("slider-card__track--horizontal"),this.sliderThumb.classList.add("slider-card__thumb--horizontal")):(this.sliderTrack.classList.add("slider-card__track--vertical"),this.sliderThumb.classList.add("slider-card__thumb--vertical")),this.root.appendChild(this.sliderContainer),this.binIndexToProportion=n=>e.num_bins<=1?0:n/(e.num_bins-1),this.renderTicks(),this.setThumbVisualState("uncommitted"),this.scheduleThumbMove(e.initial_bin_index),this.sliderTrack.addEventListener("pointerdown",this.onClickTrack),this.sliderThumb.addEventListener("pointerdown",this.onPointerDownThumb),document.addEventListener("pointermove",this.onPointerMoveDocument),document.addEventListener("pointerup",this.onPointerUpDocument)}renderTicks(){const e=this.sensor;if(!e.show_bin_markers)return;this.sliderTrack.querySelectorAll(".slider-card__track-tick").forEach(c=>c.remove());const t=e.num_bins,n=document.createDocumentFragment(),i=e.orientation==="horizontal",o=Math.max(1,i?this.boardCoords.getSizePx(e.region.w):this.boardCoords.getSizePx(e.region.h)),s=8,a=Math.max(0,s/2),l=Math.max(0,o-s);for(let c=0;c<t;c++){if(c===0||c===t-1)continue;const p=(a+c*l/(t-1))/o*100,f=document.createElement("div");f.classList.add("slider-card__track-tick"),f.style.pointerEvents="none";const E="75%";e.orientation==="horizontal"?(f.style.width="1px",f.style.height=E,f.style.left=`${p}%`,f.style.top="50%",f.style.transform="translate(-50%, -50%)"):(f.style.width=E,f.style.height="1px",f.style.top=`${p}%`,f.style.left="50%",f.style.transform="translate(-50%, -50%)"),n.appendChild(f)}this.sliderTrack.appendChild(n)}setThumbVisualState(e){const t="slider-card__thumb--active",n="slider-card__thumb--uncommitted";switch(e){case"dragging":this.sliderThumb.classList.add(t),this.sliderThumb.classList.remove(n);return;case"committed":this.sliderThumb.classList.remove(t),this.sliderThumb.classList.remove(n);return;case"uncommitted":this.sliderThumb.classList.remove(t),this.sliderThumb.classList.add(n);return;default:return}}scheduleThumbMove(e){const t=this.binIndexToProportion(e);this.pendingThumbPosition=Math.max(0,Math.min(1,t)),this.frameRequested||(this.frameRequested=!0,this.rafId=requestAnimationFrame(()=>{this.frameRequested=!1,this.flushThumbVisualUpdate()}))}flushThumbVisualUpdate(){if(this.pendingThumbPosition==null)return;const e=this.sliderThumb.getBoundingClientRect(),t=this.sliderContainer.getBoundingClientRect();if(this.sensor.orientation==="horizontal"){const n=this.pendingThumbPosition*(t.width-e.width);this.sliderThumb.style.left=`${n}px`}else{const n=t.height-e.height-this.pendingThumbPosition*(t.height-e.height);this.sliderThumb.style.top=`${n}px`}this.pendingThumbPosition=null}calculateNearestBin(e){if(this.sensor.num_bins<=1)return 0;const t=this.sliderTrack.getBoundingClientRect();let n;switch(this.sensor.orientation){case"horizontal":n=(e.clientX-t.left)/t.width;break;case"vertical":n=1-(e.clientY-t.top)/t.height;break;default:const a=this.sensor.orientation;throw new Error(`Unsupported SliderSensor.orientation found ${JSON.stringify(a)}`)}n=Math.max(0,Math.min(1,n));const i=n*(this.sensor.num_bins-1);return Math.round(i)}onDestroy(){this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null,this.frameRequested=!1,this.pendingThumbPosition=null),this.sliderTrack.removeEventListener("pointerdown",this.onClickTrack)}emitSliderValue(){if(this.currentBinIndex==null)return;const e=this.currentBinIndex,t={sliderNormalizedPosition:e/(this.sensor.num_bins-1),binIndex:e,domTimestamp:performance.now()};for(let n of this.subscribers)n(t)}subscribeToSlider(e){this.subscribers.add(e)}}class uc extends ft{async prepare(){const e=new hc(this.params.sensor,this.params.boardView.getCoordinateSystem());this.params.boardView.root.appendChild(e.root);const t=n=>{const i={action_type:"FreeTextEntryAction",text:n,t:this.params.boardView.clock.now()};this.emit(i)};e.subscribe(t)}}class hc{constructor(e,t){this.root=Hr(e.region,t);const n=document.createElement("div");n.classList.add("free-text-entry");const i=document.createElement("textarea");i.classList.add("free-text-entry__input"),i.spellcheck=!1,i.placeholder=e.prompt??"",i.style.fontSize=t.getSizePx(e.font_size)+"px",i.maxLength=e.max_length??1e4;const o=document.createElement("div");o.classList.add("free-text-entry__gutter");const s="Done",a="",l=document.createElement("button");l.classList.add("free-text-entry__submit"),l.textContent=a,l.disabled=e.min_length>0,o.appendChild(l),n.appendChild(i),n.appendChild(o),this.root.appendChild(n);const c=()=>{const u=i.value.trim().length>=e.min_length;l.textContent=u?s:a,u?(l.classList.add("submittable"),l.disabled=!1):(l.classList.remove("submittable"),l.disabled=!0)};i.addEventListener("input",()=>{c()}),this.textAreaElement=i,this.doneButton=l,c()}subscribe(e){this.doneButton.addEventListener("click",()=>{const t=this.textAreaElement.value;e(t),this.doneButton.textContent="✓"})}}class dc extends ft{async prepare(){const e=this.params.sensor.keys,t=n=>{if(n.sampleType!=="down"||!e.has(n.key))return;const i={t:n.t,action_type:"KeyAction",key:n.key};this.emit(i)};this.params.boardView.keyStream.subscribe(t)}}class fc extends ft{async prepare(){const e=this.params.sensor.region,t=n=>{if(n.sampleType!=="down")return;if(sc(n.x,n.y,e)){const o={t:n.t,action_type:"ClickAction",x:n.x,y:n.y};this.emit(o);return}};this.params.boardView.pointerStream.subscribe(t)}}class pc extends ft{start(){setTimeout(()=>{const e={action_type:"WaitAction",t:this.params.boardView.clock.now()};this.emit(e)},this.params.sensor.duration_msec)}}class gc extends ft{async prepare(){const e={};let t=[];for(const[o,s]of Object.entries(this.params.sensor.choices))e[o]=await Sn(s,this.params.boardView,this.params.assetManager),t.push(o);t.sort();let n=null;const i=o=>{let s=null,a=!1;for(const l of t){const c=e[l];if(!c.checkPointInCard(o.x,o.y)){c.setHoverState(!1);continue}if(o.sampleType==="down"){c.setSelectedState(!0),c.setHoverState(!1),s=l,n=l,a=!0;const p={action_type:"SelectAction",t:this.params.boardView.clock.now(),selection:l};this.emit(p)}n!==l&&c.setHoverState(!0)}if(a)for(const l of t){if(l===s)continue;e[l].setSelectedState(!1)}};this.params.boardView.pointerStream.subscribe(i)}}class mc extends ft{async prepare(){const e=this.params.sensor.min_selections,t=this.params.sensor.max_selections??Object.keys(this.params.sensor.choices).length,n=new Set,i={};let o=[];for(const[f,E]of Object.entries(this.params.sensor.choices))i[f]=await Sn(E,this.params.boardView,this.params.assetManager),o.push(f);o.sort();const s=await Sn(this.params.sensor.confirm_button,this.params.boardView,this.params.assetManager);s.setOpacity(.1);let a=!1,l=!1;const c=()=>{const f=n.size>=t;for(const E of o){const R=i[E],w=n.has(E);R.setSelectedState(w),f&&!w?R.setOpacity(.25):R.setOpacity(1)}},u=()=>{const f={action_type:"MultiSelectAction",t:this.params.boardView.clock.now(),selections:Array.from(n)};this.emit(f)},p=f=>{if(l)return;const E=n.size>=t;let R=!1;for(const w of o){const N=i[w];if(!N.checkPointInCard(f.x,f.y)){N.setHoverState(!1);continue}const J=n.has(w);E&&!J?N.setHoverState(!1):N.setHoverState(!0),f.sampleType==="down"&&(J?(n.delete(w),R=!0):n.size<t&&(n.add(w),R=!0))}R&&(c(),a=n.size>=e),a?(s.setOpacity(1),s.checkPointInCard(f.x,f.y)?(s.setHoverState(!0),f.sampleType==="down"&&(u(),l=!0,s.setOpacity(.5),s.setSelectedState(!0))):s.setHoverState(!1)):s.setOpacity(.1)};this.params.boardView.pointerStream.subscribe(p)}}class wc extends ft{constructor(){super(...arguments),this.childBindings={}}async prepare(){let e={};for(const[t,n]of Object.entries(this.params.sensor.children))e[t]=null,this.childBindings[t]=await li(n,this.params.boardView,this.params.assetManager),this.childBindings[t].subscribe(i=>{e[t]=i;let o=this.checkValid(e);o!==null&&this.emit(o)})}checkValid(e){let t={};for(const n of Object.keys(e)){const i=n;if(e[i]===null)return null;t[i]=e[i]}return{action_type:"ProductAction",child_actions:t,t:this.params.boardView.clock.now()}}start(){for(const[e,t]of Object.entries(this.childBindings))t.start()}}class bc extends ft{constructor(){super(...arguments),this.childBindings={}}async prepare(){for(const[e,t]of Object.entries(this.params.sensor.children))this.childBindings[e]=await li(t,this.params.boardView,this.params.assetManager),this.childBindings[e].subscribe(n=>{const i={action_type:"SumAction",child_id:e,child_action:n,t:this.params.boardView.clock.now()};this.emit(i)})}start(){for(const[e,t]of Object.entries(this.childBindings))t.start()}}async function li(r,e,t){let n=null;switch(r.sensor_type){case"WaitSensor":{n=new pc(r,e,t);break}case"KeySensor":{n=new dc(r,e,t);break}case"ClickSensor":{n=new fc(r,e,t);break}case"SliderSensor":{n=new lc(r,e,t);break}case"FreeTextEntrySensor":{n=new uc(r,e,t);break}case"SelectSensor":{n=new gc(r,e,t);break}case"MultiSelectSensor":{n=new mc(r,e,t);break}case"ProductSensor":{n=new wc(r,e,t);break}case"SumSensor":{n=new bc(r,e,t);break}default:{const i=r;throw new Error(`Unknown Sensor provided: ${JSON.stringify(i)}`)}}return await n.prepare(),n}class Ec{constructor(e,t,n){this.prepared=!1,this.started=!1,this.deferredAction=new oc,this.boardView=new Ka(e.board_color,n),this.root=this.boardView.root,this.node=e,this.scheduler=new Za,this.assetManager=t}async prepare(){const e=await Sn(this.node.stimulus,this.boardView,this.assetManager);this.scheduler.scheduleEvent({triggerTimeMsec:0,triggerFunc:()=>{e.onStart()}}),this.scheduler.scheduleOnStop(()=>{e.onDestroy()});const t=await li(this.node.sensor,this.boardView,this.assetManager);t.subscribe(n=>{this.deferredAction.resolve(n)}),this.scheduler.scheduleEvent({triggerTimeMsec:0,triggerFunc:()=>{t.start()}}),this.node.hide_pointer&&(this.boardView.root.style.cursor="none"),this.prepared=!0}async run(){if(this.prepared||(console.warn("Running a NodePlay without preparing it first!"),await this.prepare()),this.started)throw new Error("NodePlay already started");this.boardView.setBoardState(!0,!0);const e=this.boardView.clock.now();this.started=!0,this.scheduler.start();const t=await this.deferredAction.promise;this.scheduler.stop();const n=this.boardView.clock.now();return{tStart:e,tEnd:n,action:t}}}const rr="0.1.0";var ir={exports:{}},ci,po;function sr(){if(po)return ci;po=1;const r="2.0.0",e=256,t=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,i=e-6;return ci={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:r,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ci}var ui,go;function or(){return go||(go=1,ui=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}),ui}var mo;function _n(){return mo||(mo=1,(function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=sr(),o=or();e=r.exports={};const s=e.re=[],a=e.safeRe=[],l=e.src=[],c=e.safeSrc=[],u=e.t={};let p=0;const f="[a-zA-Z0-9-]",E=[["\\s",1],["\\d",i],[f,n]],R=N=>{for(const[j,J]of E)N=N.split(`${j}*`).join(`${j}{0,${J}}`).split(`${j}+`).join(`${j}{1,${J}}`);return N},w=(N,j,J)=>{const Q=R(j),ee=p++;o(N,ee,j),u[N]=ee,l[ee]=j,c[ee]=Q,s[ee]=new RegExp(j,J?"g":void 0),a[ee]=new RegExp(Q,J?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),w("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${f}+`),w("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),w("FULL",`^${l[u.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),w("LOOSE",`^${l[u.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),w("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),w("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",l[u.COERCE],!0),w("COERCERTLFULL",l[u.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",w("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",w("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ir,ir.exports)),ir.exports}var hi,wo;function di(){if(wo)return hi;wo=1;const r=Object.freeze({loose:!0}),e=Object.freeze({});return hi=n=>n?typeof n!="object"?r:n:e,hi}var fi,bo;function Eo(){if(bo)return fi;bo=1;const r=/^[0-9]+$/,e=(n,i)=>{const o=r.test(n),s=r.test(i);return o&&s&&(n=+n,i=+i),n===i?0:o&&!s?-1:s&&!o?1:n<i?-1:1};return fi={compareIdentifiers:e,rcompareIdentifiers:(n,i)=>e(i,n)},fi}var pi,vo;function Ie(){if(vo)return pi;vo=1;const r=or(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:t}=sr(),{safeRe:n,t:i}=_n(),o=di(),{compareIdentifiers:s}=Eo();class a{constructor(c,u){if(u=o(u),c instanceof a){if(c.loose===!!u.loose&&c.includePrerelease===!!u.includePrerelease)return c;c=c.version}else if(typeof c!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof c}".`);if(c.length>e)throw new TypeError(`version is longer than ${e} characters`);r("SemVer",c,u),this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease;const p=c.trim().match(u.loose?n[i.LOOSE]:n[i.FULL]);if(!p)throw new TypeError(`Invalid Version: ${c}`);if(this.raw=c,this.major=+p[1],this.minor=+p[2],this.patch=+p[3],this.major>t||this.major<0)throw new TypeError("Invalid major version");if(this.minor>t||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>t||this.patch<0)throw new TypeError("Invalid patch version");p[4]?this.prerelease=p[4].split(".").map(f=>{if(/^[0-9]+$/.test(f)){const E=+f;if(E>=0&&E<t)return E}return f}):this.prerelease=[],this.build=p[5]?p[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(c){if(r("SemVer.compare",this.version,this.options,c),!(c instanceof a)){if(typeof c=="string"&&c===this.version)return 0;c=new a(c,this.options)}return c.version===this.version?0:this.compareMain(c)||this.comparePre(c)}compareMain(c){return c instanceof a||(c=new a(c,this.options)),s(this.major,c.major)||s(this.minor,c.minor)||s(this.patch,c.patch)}comparePre(c){if(c instanceof a||(c=new a(c,this.options)),this.prerelease.length&&!c.prerelease.length)return-1;if(!this.prerelease.length&&c.prerelease.length)return 1;if(!this.prerelease.length&&!c.prerelease.length)return 0;let u=0;do{const p=this.prerelease[u],f=c.prerelease[u];if(r("prerelease compare",u,p,f),p===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(p===void 0)return-1;if(p===f)continue;return s(p,f)}while(++u)}compareBuild(c){c instanceof a||(c=new a(c,this.options));let u=0;do{const p=this.build[u],f=c.build[u];if(r("build compare",u,p,f),p===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(p===void 0)return-1;if(p===f)continue;return s(p,f)}while(++u)}inc(c,u,p){if(c.startsWith("pre")){if(!u&&p===!1)throw new Error("invalid increment argument: identifier is empty");if(u){const f=`-${u}`.match(this.options.loose?n[i.PRERELEASELOOSE]:n[i.PRERELEASE]);if(!f||f[1]!==u)throw new Error(`invalid identifier: ${u}`)}}switch(c){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",u,p);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",u,p);break;case"prepatch":this.prerelease.length=0,this.inc("patch",u,p),this.inc("pre",u,p);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",u,p),this.inc("pre",u,p);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const f=Number(p)?1:0;if(this.prerelease.length===0)this.prerelease=[f];else{let E=this.prerelease.length;for(;--E>=0;)typeof this.prerelease[E]=="number"&&(this.prerelease[E]++,E=-2);if(E===-1){if(u===this.prerelease.join(".")&&p===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(f)}}if(u){let E=[u,f];p===!1&&(E=[u]),s(this.prerelease[0],u)===0?isNaN(this.prerelease[1])&&(this.prerelease=E):this.prerelease=E}break}default:throw new Error(`invalid increment argument: ${c}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return pi=a,pi}var gi,yo;function Xt(){if(yo)return gi;yo=1;const r=Ie();return gi=(t,n,i=!1)=>{if(t instanceof r)return t;try{return new r(t,n)}catch(o){if(!i)return null;throw o}},gi}var mi,ko;function vc(){if(ko)return mi;ko=1;const r=Xt();return mi=(t,n)=>{const i=r(t,n);return i?i.version:null},mi}var wi,So;function yc(){if(So)return wi;So=1;const r=Xt();return wi=(t,n)=>{const i=r(t.trim().replace(/^[=v]+/,""),n);return i?i.version:null},wi}var bi,_o;function kc(){if(_o)return bi;_o=1;const r=Ie();return bi=(t,n,i,o,s)=>{typeof i=="string"&&(s=o,o=i,i=void 0);try{return new r(t instanceof r?t.version:t,i).inc(n,o,s).version}catch{return null}},bi}var Ei,xo;function Sc(){if(xo)return Ei;xo=1;const r=Xt();return Ei=(t,n)=>{const i=r(t,null,!0),o=r(n,null,!0),s=i.compare(o);if(s===0)return null;const a=s>0,l=a?i:o,c=a?o:i,u=!!l.prerelease.length;if(!!c.prerelease.length&&!u){if(!c.patch&&!c.minor)return"major";if(c.compareMain(l)===0)return c.minor&&!c.patch?"minor":"patch"}const f=u?"pre":"";return i.major!==o.major?f+"major":i.minor!==o.minor?f+"minor":i.patch!==o.patch?f+"patch":"prerelease"},Ei}var vi,To;function _c(){if(To)return vi;To=1;const r=Ie();return vi=(t,n)=>new r(t,n).major,vi}var yi,Ro;function xc(){if(Ro)return yi;Ro=1;const r=Ie();return yi=(t,n)=>new r(t,n).minor,yi}var ki,Ao;function Tc(){if(Ao)return ki;Ao=1;const r=Ie();return ki=(t,n)=>new r(t,n).patch,ki}var Si,Co;function Rc(){if(Co)return Si;Co=1;const r=Xt();return Si=(t,n)=>{const i=r(t,n);return i&&i.prerelease.length?i.prerelease:null},Si}var _i,Oo;function Xe(){if(Oo)return _i;Oo=1;const r=Ie();return _i=(t,n,i)=>new r(t,i).compare(new r(n,i)),_i}var xi,Lo;function Ac(){if(Lo)return xi;Lo=1;const r=Xe();return xi=(t,n,i)=>r(n,t,i),xi}var Ti,Io;function Cc(){if(Io)return Ti;Io=1;const r=Xe();return Ti=(t,n)=>r(t,n,!0),Ti}var Ri,No;function Ai(){if(No)return Ri;No=1;const r=Ie();return Ri=(t,n,i)=>{const o=new r(t,i),s=new r(n,i);return o.compare(s)||o.compareBuild(s)},Ri}var Ci,Po;function Oc(){if(Po)return Ci;Po=1;const r=Ai();return Ci=(t,n)=>t.sort((i,o)=>r(i,o,n)),Ci}var Oi,$o;function Lc(){if($o)return Oi;$o=1;const r=Ai();return Oi=(t,n)=>t.sort((i,o)=>r(o,i,n)),Oi}var Li,Mo;function ar(){if(Mo)return Li;Mo=1;const r=Xe();return Li=(t,n,i)=>r(t,n,i)>0,Li}var Ii,Do;function Ni(){if(Do)return Ii;Do=1;const r=Xe();return Ii=(t,n,i)=>r(t,n,i)<0,Ii}var Pi,Bo;function Uo(){if(Bo)return Pi;Bo=1;const r=Xe();return Pi=(t,n,i)=>r(t,n,i)===0,Pi}var $i,zo;function Vo(){if(zo)return $i;zo=1;const r=Xe();return $i=(t,n,i)=>r(t,n,i)!==0,$i}var Mi,Fo;function Di(){if(Fo)return Mi;Fo=1;const r=Xe();return Mi=(t,n,i)=>r(t,n,i)>=0,Mi}var Bi,Ho;function Ui(){if(Ho)return Bi;Ho=1;const r=Xe();return Bi=(t,n,i)=>r(t,n,i)<=0,Bi}var zi,qo;function jo(){if(qo)return zi;qo=1;const r=Uo(),e=Vo(),t=ar(),n=Di(),i=Ni(),o=Ui();return zi=(a,l,c,u)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof c=="object"&&(c=c.version),a===c;case"!==":return typeof a=="object"&&(a=a.version),typeof c=="object"&&(c=c.version),a!==c;case"":case"=":case"==":return r(a,c,u);case"!=":return e(a,c,u);case">":return t(a,c,u);case">=":return n(a,c,u);case"<":return i(a,c,u);case"<=":return o(a,c,u);default:throw new TypeError(`Invalid operator: ${l}`)}},zi}var Vi,Go;function Ic(){if(Go)return Vi;Go=1;const r=Ie(),e=Xt(),{safeRe:t,t:n}=_n();return Vi=(o,s)=>{if(o instanceof r)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;s=s||{};let a=null;if(!s.rtl)a=o.match(s.includePrerelease?t[n.COERCEFULL]:t[n.COERCE]);else{const E=s.includePrerelease?t[n.COERCERTLFULL]:t[n.COERCERTL];let R;for(;(R=E.exec(o))&&(!a||a.index+a[0].length!==o.length);)(!a||R.index+R[0].length!==a.index+a[0].length)&&(a=R),E.lastIndex=R.index+R[1].length+R[2].length;E.lastIndex=-1}if(a===null)return null;const l=a[2],c=a[3]||"0",u=a[4]||"0",p=s.includePrerelease&&a[5]?`-${a[5]}`:"",f=s.includePrerelease&&a[6]?`+${a[6]}`:"";return e(`${l}.${c}.${u}${p}${f}`,s)},Vi}var Fi,Wo;function Nc(){if(Wo)return Fi;Wo=1;class r{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(t,n)}return this}}return Fi=r,Fi}var Hi,Xo;function Ye(){if(Xo)return Hi;Xo=1;const r=/\s+/g;class e{constructor(T,z){if(z=i(z),T instanceof e)return T.loose===!!z.loose&&T.includePrerelease===!!z.includePrerelease?T:new e(T.raw,z);if(T instanceof o)return this.raw=T.value,this.set=[[T]],this.formatted=void 0,this;if(this.options=z,this.loose=!!z.loose,this.includePrerelease=!!z.includePrerelease,this.raw=T.trim().replace(r," "),this.set=this.raw.split("||").map(P=>this.parseRange(P.trim())).filter(P=>P.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const P=this.set[0];if(this.set=this.set.filter(M=>!w(M[0])),this.set.length===0)this.set=[P];else if(this.set.length>1){for(const M of this.set)if(M.length===1&&N(M[0])){this.set=[M];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let T=0;T<this.set.length;T++){T>0&&(this.formatted+="||");const z=this.set[T];for(let P=0;P<z.length;P++)P>0&&(this.formatted+=" "),this.formatted+=z[P].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(T){const P=((this.options.includePrerelease&&E)|(this.options.loose&&R))+":"+T,M=n.get(P);if(M)return M;const $=this.options.loose,q=$?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];T=T.replace(q,pt(this.options.includePrerelease)),s("hyphen replace",T),T=T.replace(l[c.COMPARATORTRIM],u),s("comparator trim",T),T=T.replace(l[c.TILDETRIM],p),s("tilde trim",T),T=T.replace(l[c.CARETTRIM],f),s("caret trim",T);let V=T.split(" ").map(Y=>J(Y,this.options)).join(" ").split(/\s+/).map(Y=>Ee(Y,this.options));$&&(V=V.filter(Y=>(s("loose invalid filter",Y,this.options),!!Y.match(l[c.COMPARATORLOOSE])))),s("range list",V);const K=new Map,W=V.map(Y=>new o(Y,this.options));for(const Y of W){if(w(Y))return[Y];K.set(Y.value,Y)}K.size>1&&K.has("")&&K.delete("");const ke=[...K.values()];return n.set(P,ke),ke}intersects(T,z){if(!(T instanceof e))throw new TypeError("a Range is required");return this.set.some(P=>j(P,z)&&T.set.some(M=>j(M,z)&&P.every($=>M.every(q=>$.intersects(q,z)))))}test(T){if(!T)return!1;if(typeof T=="string")try{T=new a(T,this.options)}catch{return!1}for(let z=0;z<this.set.length;z++)if(gt(this.set[z],T,this.options))return!0;return!1}}Hi=e;const t=Nc(),n=new t,i=di(),o=lr(),s=or(),a=Ie(),{safeRe:l,t:c,comparatorTrimReplace:u,tildeTrimReplace:p,caretTrimReplace:f}=_n(),{FLAG_INCLUDE_PRERELEASE:E,FLAG_LOOSE:R}=sr(),w=A=>A.value==="<0.0.0-0",N=A=>A.value==="",j=(A,T)=>{let z=!0;const P=A.slice();let M=P.pop();for(;z&&P.length;)z=P.every($=>M.intersects($,T)),M=P.pop();return z},J=(A,T)=>(s("comp",A,T),A=ne(A,T),s("caret",A),A=ee(A,T),s("tildes",A),A=F(A,T),s("xrange",A),A=nt(A,T),s("stars",A),A),Q=A=>!A||A.toLowerCase()==="x"||A==="*",ee=(A,T)=>A.trim().split(/\s+/).map(z=>de(z,T)).join(" "),de=(A,T)=>{const z=T.loose?l[c.TILDELOOSE]:l[c.TILDE];return A.replace(z,(P,M,$,q,V)=>{s("tilde",A,P,M,$,q,V);let K;return Q(M)?K="":Q($)?K=`>=${M}.0.0 <${+M+1}.0.0-0`:Q(q)?K=`>=${M}.${$}.0 <${M}.${+$+1}.0-0`:V?(s("replaceTilde pr",V),K=`>=${M}.${$}.${q}-${V} <${M}.${+$+1}.0-0`):K=`>=${M}.${$}.${q} <${M}.${+$+1}.0-0`,s("tilde return",K),K})},ne=(A,T)=>A.trim().split(/\s+/).map(z=>oe(z,T)).join(" "),oe=(A,T)=>{s("caret",A,T);const z=T.loose?l[c.CARETLOOSE]:l[c.CARET],P=T.includePrerelease?"-0":"";return A.replace(z,(M,$,q,V,K)=>{s("caret",A,M,$,q,V,K);let W;return Q($)?W="":Q(q)?W=`>=${$}.0.0${P} <${+$+1}.0.0-0`:Q(V)?$==="0"?W=`>=${$}.${q}.0${P} <${$}.${+q+1}.0-0`:W=`>=${$}.${q}.0${P} <${+$+1}.0.0-0`:K?(s("replaceCaret pr",K),$==="0"?q==="0"?W=`>=${$}.${q}.${V}-${K} <${$}.${q}.${+V+1}-0`:W=`>=${$}.${q}.${V}-${K} <${$}.${+q+1}.0-0`:W=`>=${$}.${q}.${V}-${K} <${+$+1}.0.0-0`):(s("no pr"),$==="0"?q==="0"?W=`>=${$}.${q}.${V}${P} <${$}.${q}.${+V+1}-0`:W=`>=${$}.${q}.${V}${P} <${$}.${+q+1}.0-0`:W=`>=${$}.${q}.${V} <${+$+1}.0.0-0`),s("caret return",W),W})},F=(A,T)=>(s("replaceXRanges",A,T),A.split(/\s+/).map(z=>qe(z,T)).join(" ")),qe=(A,T)=>{A=A.trim();const z=T.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return A.replace(z,(P,M,$,q,V,K)=>{s("xRange",A,P,M,$,q,V,K);const W=Q($),ke=W||Q(q),Y=ke||Q(V),Me=Y;return M==="="&&Me&&(M=""),K=T.includePrerelease?"-0":"",W?M===">"||M==="<"?P="<0.0.0-0":P="*":M&&Me?(ke&&(q=0),V=0,M===">"?(M=">=",ke?($=+$+1,q=0,V=0):(q=+q+1,V=0)):M==="<="&&(M="<",ke?$=+$+1:q=+q+1),M==="<"&&(K="-0"),P=`${M+$}.${q}.${V}${K}`):ke?P=`>=${$}.0.0${K} <${+$+1}.0.0-0`:Y&&(P=`>=${$}.${q}.0${K} <${$}.${+q+1}.0-0`),s("xRange return",P),P})},nt=(A,T)=>(s("replaceStars",A,T),A.trim().replace(l[c.STAR],"")),Ee=(A,T)=>(s("replaceGTE0",A,T),A.trim().replace(l[T.includePrerelease?c.GTE0PRE:c.GTE0],"")),pt=A=>(T,z,P,M,$,q,V,K,W,ke,Y,Me)=>(Q(P)?z="":Q(M)?z=`>=${P}.0.0${A?"-0":""}`:Q($)?z=`>=${P}.${M}.0${A?"-0":""}`:q?z=`>=${z}`:z=`>=${z}${A?"-0":""}`,Q(W)?K="":Q(ke)?K=`<${+W+1}.0.0-0`:Q(Y)?K=`<${W}.${+ke+1}.0-0`:Me?K=`<=${W}.${ke}.${Y}-${Me}`:A?K=`<${W}.${ke}.${+Y+1}-0`:K=`<=${K}`,`${z} ${K}`.trim()),gt=(A,T,z)=>{for(let P=0;P<A.length;P++)if(!A[P].test(T))return!1;if(T.prerelease.length&&!z.includePrerelease){for(let P=0;P<A.length;P++)if(s(A[P].semver),A[P].semver!==o.ANY&&A[P].semver.prerelease.length>0){const M=A[P].semver;if(M.major===T.major&&M.minor===T.minor&&M.patch===T.patch)return!0}return!1}return!0};return Hi}var qi,Yo;function lr(){if(Yo)return qi;Yo=1;const r=Symbol("SemVer ANY");class e{static get ANY(){return r}constructor(u,p){if(p=t(p),u instanceof e){if(u.loose===!!p.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),s("comparator",u,p),this.options=p,this.loose=!!p.loose,this.parse(u),this.semver===r?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(u){const p=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],f=u.match(p);if(!f)throw new TypeError(`Invalid comparator: ${u}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=r}toString(){return this.value}test(u){if(s("Comparator.test",u,this.options.loose),this.semver===r||u===r)return!0;if(typeof u=="string")try{u=new a(u,this.options)}catch{return!1}return o(u,this.operator,this.semver,this.options)}intersects(u,p){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(u.value,p).test(this.value):u.operator===""?u.value===""?!0:new l(this.value,p).test(u.semver):(p=t(p),p.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!p.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||o(this.semver,"<",u.semver,p)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||o(this.semver,">",u.semver,p)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}qi=e;const t=di(),{safeRe:n,t:i}=_n(),o=jo(),s=or(),a=Ie(),l=Ye();return qi}var ji,Ko;function cr(){if(Ko)return ji;Ko=1;const r=Ye();return ji=(t,n,i)=>{try{n=new r(n,i)}catch{return!1}return n.test(t)},ji}var Gi,Zo;function Pc(){if(Zo)return Gi;Zo=1;const r=Ye();return Gi=(t,n)=>new r(t,n).set.map(i=>i.map(o=>o.value).join(" ").trim().split(" ")),Gi}var Wi,Qo;function $c(){if(Qo)return Wi;Qo=1;const r=Ie(),e=Ye();return Wi=(n,i,o)=>{let s=null,a=null,l=null;try{l=new e(i,o)}catch{return null}return n.forEach(c=>{l.test(c)&&(!s||a.compare(c)===-1)&&(s=c,a=new r(s,o))}),s},Wi}var Xi,Jo;function Mc(){if(Jo)return Xi;Jo=1;const r=Ie(),e=Ye();return Xi=(n,i,o)=>{let s=null,a=null,l=null;try{l=new e(i,o)}catch{return null}return n.forEach(c=>{l.test(c)&&(!s||a.compare(c)===1)&&(s=c,a=new r(s,o))}),s},Xi}var Yi,ea;function Dc(){if(ea)return Yi;ea=1;const r=Ie(),e=Ye(),t=ar();return Yi=(i,o)=>{i=new e(i,o);let s=new r("0.0.0");if(i.test(s)||(s=new r("0.0.0-0"),i.test(s)))return s;s=null;for(let a=0;a<i.set.length;++a){const l=i.set[a];let c=null;l.forEach(u=>{const p=new r(u.semver.version);switch(u.operator){case">":p.prerelease.length===0?p.patch++:p.prerelease.push(0),p.raw=p.format();case"":case">=":(!c||t(p,c))&&(c=p);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${u.operator}`)}}),c&&(!s||t(s,c))&&(s=c)}return s&&i.test(s)?s:null},Yi}var Ki,ta;function Bc(){if(ta)return Ki;ta=1;const r=Ye();return Ki=(t,n)=>{try{return new r(t,n).range||"*"}catch{return null}},Ki}var Zi,na;function Qi(){if(na)return Zi;na=1;const r=Ie(),e=lr(),{ANY:t}=e,n=Ye(),i=cr(),o=ar(),s=Ni(),a=Ui(),l=Di();return Zi=(u,p,f,E)=>{u=new r(u,E),p=new n(p,E);let R,w,N,j,J;switch(f){case">":R=o,w=a,N=s,j=">",J=">=";break;case"<":R=s,w=l,N=o,j="<",J="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(u,p,E))return!1;for(let Q=0;Q<p.set.length;++Q){const ee=p.set[Q];let de=null,ne=null;if(ee.forEach(oe=>{oe.semver===t&&(oe=new e(">=0.0.0")),de=de||oe,ne=ne||oe,R(oe.semver,de.semver,E)?de=oe:N(oe.semver,ne.semver,E)&&(ne=oe)}),de.operator===j||de.operator===J||(!ne.operator||ne.operator===j)&&w(u,ne.semver))return!1;if(ne.operator===J&&N(u,ne.semver))return!1}return!0},Zi}var Ji,ra;function Uc(){if(ra)return Ji;ra=1;const r=Qi();return Ji=(t,n,i)=>r(t,n,">",i),Ji}var es,ia;function zc(){if(ia)return es;ia=1;const r=Qi();return es=(t,n,i)=>r(t,n,"<",i),es}var ts,sa;function Vc(){if(sa)return ts;sa=1;const r=Ye();return ts=(t,n,i)=>(t=new r(t,i),n=new r(n,i),t.intersects(n,i)),ts}var ns,oa;function Fc(){if(oa)return ns;oa=1;const r=cr(),e=Xe();return ns=(t,n,i)=>{const o=[];let s=null,a=null;const l=t.sort((f,E)=>e(f,E,i));for(const f of l)r(f,n,i)?(a=f,s||(s=f)):(a&&o.push([s,a]),a=null,s=null);s&&o.push([s,null]);const c=[];for(const[f,E]of o)f===E?c.push(f):!E&&f===l[0]?c.push("*"):E?f===l[0]?c.push(`<=${E}`):c.push(`${f} - ${E}`):c.push(`>=${f}`);const u=c.join(" || "),p=typeof n.raw=="string"?n.raw:String(n);return u.length<p.length?u:n},ns}var rs,aa;function Hc(){if(aa)return rs;aa=1;const r=Ye(),e=lr(),{ANY:t}=e,n=cr(),i=Xe(),o=(p,f,E={})=>{if(p===f)return!0;p=new r(p,E),f=new r(f,E);let R=!1;e:for(const w of p.set){for(const N of f.set){const j=l(w,N,E);if(R=R||j!==null,j)continue e}if(R)return!1}return!0},s=[new e(">=0.0.0-0")],a=[new e(">=0.0.0")],l=(p,f,E)=>{if(p===f)return!0;if(p.length===1&&p[0].semver===t){if(f.length===1&&f[0].semver===t)return!0;E.includePrerelease?p=s:p=a}if(f.length===1&&f[0].semver===t){if(E.includePrerelease)return!0;f=a}const R=new Set;let w,N;for(const F of p)F.operator===">"||F.operator===">="?w=c(w,F,E):F.operator==="<"||F.operator==="<="?N=u(N,F,E):R.add(F.semver);if(R.size>1)return null;let j;if(w&&N){if(j=i(w.semver,N.semver,E),j>0)return null;if(j===0&&(w.operator!==">="||N.operator!=="<="))return null}for(const F of R){if(w&&!n(F,String(w),E)||N&&!n(F,String(N),E))return null;for(const qe of f)if(!n(F,String(qe),E))return!1;return!0}let J,Q,ee,de,ne=N&&!E.includePrerelease&&N.semver.prerelease.length?N.semver:!1,oe=w&&!E.includePrerelease&&w.semver.prerelease.length?w.semver:!1;ne&&ne.prerelease.length===1&&N.operator==="<"&&ne.prerelease[0]===0&&(ne=!1);for(const F of f){if(de=de||F.operator===">"||F.operator===">=",ee=ee||F.operator==="<"||F.operator==="<=",w){if(oe&&F.semver.prerelease&&F.semver.prerelease.length&&F.semver.major===oe.major&&F.semver.minor===oe.minor&&F.semver.patch===oe.patch&&(oe=!1),F.operator===">"||F.operator===">="){if(J=c(w,F,E),J===F&&J!==w)return!1}else if(w.operator===">="&&!n(w.semver,String(F),E))return!1}if(N){if(ne&&F.semver.prerelease&&F.semver.prerelease.length&&F.semver.major===ne.major&&F.semver.minor===ne.minor&&F.semver.patch===ne.patch&&(ne=!1),F.operator==="<"||F.operator==="<="){if(Q=u(N,F,E),Q===F&&Q!==N)return!1}else if(N.operator==="<="&&!n(N.semver,String(F),E))return!1}if(!F.operator&&(N||w)&&j!==0)return!1}return!(w&&ee&&!N&&j!==0||N&&de&&!w&&j!==0||oe||ne)},c=(p,f,E)=>{if(!p)return f;const R=i(p.semver,f.semver,E);return R>0?p:R<0||f.operator===">"&&p.operator===">="?f:p},u=(p,f,E)=>{if(!p)return f;const R=i(p.semver,f.semver,E);return R<0?p:R>0||f.operator==="<"&&p.operator==="<="?f:p};return rs=o,rs}var is,la;function qc(){if(la)return is;la=1;const r=_n(),e=sr(),t=Ie(),n=Eo(),i=Xt(),o=vc(),s=yc(),a=kc(),l=Sc(),c=_c(),u=xc(),p=Tc(),f=Rc(),E=Xe(),R=Ac(),w=Cc(),N=Ai(),j=Oc(),J=Lc(),Q=ar(),ee=Ni(),de=Uo(),ne=Vo(),oe=Di(),F=Ui(),qe=jo(),nt=Ic(),Ee=lr(),pt=Ye(),gt=cr(),A=Pc(),T=$c(),z=Mc(),P=Dc(),M=Bc(),$=Qi(),q=Uc(),V=zc(),K=Vc(),W=Fc(),ke=Hc();return is={parse:i,valid:o,clean:s,inc:a,diff:l,major:c,minor:u,patch:p,prerelease:f,compare:E,rcompare:R,compareLoose:w,compareBuild:N,sort:j,rsort:J,gt:Q,lt:ee,eq:de,neq:ne,gte:oe,lte:F,cmp:qe,coerce:nt,Comparator:Ee,Range:pt,satisfies:gt,toComparators:A,maxSatisfying:T,minSatisfying:z,minVersion:P,validRange:M,outside:$,gtr:q,ltr:V,intersects:K,simplifyRange:W,subset:ke,SemVer:t,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},is}var ss=qc();class jc{constructor(e){this.onEventCallback=e,this.events=[]}push(e){this.events.push(e),this.onEventCallback(e)}}function se(r,e){switch(r.op){case"reg":{if(!(r.id in e.graphRegisters))throw new Error(`Graph Register '${r.id}' not found`);return e.graphRegisters[r.id]}case"local":{if(!(r.name in e.localVariables))throw new Error(`Local variable '${r.name}' not found`);return e.localVariables[r.name]}case"la":return e.lastAction;case"gli":{const t=se(r.list,e);if(!Array.isArray(t))throw new Error(`gli: list must be array, got '${typeof t}'`);const n=se(r.index,e);if(typeof n!="number")throw new Error(`gli: index must be number, got '${typeof n}'`);if(n<0||n>=t.length)throw new Error(`gli: index out of bounds, got index ${n} for list of length ${t.length}`);return t[n]}case"gdv":{const t=se(r.d,e);if(typeof t!="object"||t===null||Array.isArray(t))throw new Error(`gdv: dict must be object, got '${typeof t}'`);const n=se(r.key,e);if(typeof n!="string")throw new Error(`gdv: key must be string, got '${typeof n}'`);if(!(n in t))throw new Error(`gdv: key '${n}' not found in dict`);return t[n]}case"lit":return r.value;case"if":return se(r.cond,e)?se(r.then,e):se(r.otherwise,e);case"not":return!se(r.operand,e);case"and":{for(const t of r.args){const n=se(t,e);if(typeof n!="boolean")throw new Error(`and: all args must be boolean, got '${typeof n}'`);if(!n)return!1}return!0}case"or":{for(const t of r.args){const n=se(t,e);if(typeof n!="boolean")throw new Error(`or: all args must be boolean, got '${typeof n}'`);if(n)return!0}return!1}case"eq":{const t=se(r.lhs,e),n=se(r.rhs,e);return t===n}case"ne":{const t=se(r.lhs,e),n=se(r.rhs,e);return t!==n}case"gt":case"ge":case"lt":case"le":{const t=se(r.lhs,e),n=se(r.rhs,e);if(typeof t!=typeof n)throw new Error(`${r.op}: lhs and rhs must have same type, got '${typeof t}' and '${typeof n}'`);if(typeof t!="number"&&typeof t!="string")throw new Error(`${r.op}: only number or string comparison supported, got '${typeof t}'`);switch(r.op){case"gt":return t>n;case"ge":return t>=n;case"lt":return t<n;case"le":return t<=n;default:const i=r;throw new Error(`Unsupported comparator op: ${i.op}`)}}case"add":case"sub":case"mul":case"div":{const t=se(r.lhs,e),n=se(r.rhs,e);if(typeof t!="number"||typeof n!="number")throw new Error(`${r.op}: operands must be numbers, got '${typeof t}' and '${typeof n}'`);switch(r.op){case"add":return t+n;case"sub":return t-n;case"mul":return t*n;case"div":if(n===0)throw new Error("div: division by zero");return t/n;default:const i=r;throw new Error(`Unsupported arithmetic op: ${i.op}`)}}case"append":{const t=se(r.array,e);if(!Array.isArray(t))throw new Error(`append: array must be array, got '${typeof t}'`);const n=se(r.value,e);return[...t,n]}case"concat":{const t=se(r.array,e);if(!Array.isArray(t))throw new Error(`concat: array must be array, got '${typeof t}'`);const n=se(r.value,e);if(!Array.isArray(n))throw new Error(`concat: value must be array, got '${typeof n}'`);return[...t,...n]}case"slice":{const t=se(r.array,e);if(!Array.isArray(t))throw new Error(`slice: array must be array, got '${typeof t}'`);const n=se(r.start,e);if(typeof n!="number")throw new Error(`slice: start must be number, got '${typeof n}'`);let i;if(r.end!==null){const o=se(r.end,e);if(typeof o!="number")throw new Error(`slice: end must be number, got '${typeof o}'`);i=o}return t.slice(n,i)}case"map":{const t=se(r.array,e);if(!Array.isArray(t))throw new Error(`map: array must be array, got '${typeof t}'`);const n=r.cur,i=e.localVariables;return t.map(o=>se(r.func,{...e,localVariables:{...i,[n]:o}}))}case"filter":{const t=se(r.array,e);if(!Array.isArray(t))throw new Error(`filter: array must be array, got '${typeof t}'`);const n=r.cur,i=e.localVariables,o=[];for(const s of t){const a=se(r.predicate,{...e,localVariables:{...i,[n]:s}});if(typeof a!="boolean")throw new Error(`filter: predicate must be boolean, got '${typeof a}'`);a&&o.push(s)}return o}case"fold":{const t=se(r.array,e);if(!Array.isArray(t))throw new Error(`fold: array must be array, got '${typeof t}'`);let n=se(r.init,e);const i=r.acc,o=r.cur,s=e.localVariables;for(const a of t)n=se(r.func,{...e,localVariables:{...s,[i]:n,[o]:a}});return n}default:{const t=r;throw new Error(`Unsupported expression op: ${t.op}`)}}}function os(r){const{transition:e,registers:t,lastAction:n}=r;switch(e.transition_type){case"Go":{const o={};for(const[s,a]of Object.entries(e.register_updates))o[s]=se(a,{graphRegisters:t,localVariables:{},lastAction:n});return{nextNodeId:e.to,registerUpdates:o}}case"Branch":{for(const{when:o,then:s}of e.cases)if(se(o,{graphRegisters:t,localVariables:{},lastAction:n}))return os({transition:s,registers:t,lastAction:n});return os({transition:e.otherwise,registers:t,lastAction:n})}case"End":return{nextNodeId:null,registerUpdates:{}};default:const i=e;throw new Error(`Unhandled transition: ${JSON.stringify(i)}`)}}async function Gc(r,e=n=>{},t=!1){const n=new pa;n.start();const i=new jc(e),o=Ca(),s=new Ga;o.appendChild(s.root);const a=Wa();if(o.appendChild(a),ss.gt(r.nodekit_version,rr)||ss.major(r.nodekit_version)!==ss.major(rr))throw new Error(`Incompatible NodeKit version requested: ${r.nodekit_version}, Runtime version: ${rr}`);if(!Aa()){const N=new Error("Unsupported device for NodeKit. Please use a desktop browser.");throw s.showErrorOverlay(N),N}s.showSessionConnectingOverlay();const l=new Oa;s.hideSessionConnectingOverlay(),t||await s.playStartScreen();const c={event_type:"TraceStartedEvent",t:0};i.push(c);function u(){if(document.visibilityState==="hidden"){const N={event_type:"PageSuspendedEvent",t:n.now()};i.push(N)}else if(document.visibilityState==="visible"){const N={event_type:"PageResumedEvent",t:n.now()};i.push(N)}}document.addEventListener("visibilitychange",u);const p=ga(n);i.push(p);const f=r.nodes;let E=r.start;for(;;){const N=f[E],j=new Ec(N,l,n);a.appendChild(j.root),await j.prepare();let J=await j.run();const Q={event_type:"NodeStartedEvent",t:J.tStart,node_id:E};i.push(Q);const ee={event_type:"ActionTakenEvent",node_id:E,action:J.action,t:J.action.t};i.push(ee);const de={event_type:"NodeEndedEvent",t:J.tEnd,node_id:E};for(i.push(de);a.firstChild;)a.removeChild(a.firstChild);if(!(E in r.transitions)){console.log("No transitions found; Graph finished");break}let ne=null;const oe=r.transitions[E],F=os({transition:oe,registers:r.registers,lastAction:J.action});if(ne=F.nextNodeId,ne===null)break;E=ne;for(const[qe,nt]of Object.entries(F.registerUpdates))r.registers[qe]=nt;console.warn("registers updated",r.registers)}const R={event_type:"TraceEndedEvent",t:n.now()};i.push(R),document.removeEventListener("visibilitychange",u);const w={nodekit_version:rr,events:i.events};return await s.playEndScreen(),s.showConsoleMessageOverlay("Trace",w),w}return Sr.play=Gc,Object.defineProperty(Sr,Symbol.toStringTag,{value:"Module"}),Sr})({});
